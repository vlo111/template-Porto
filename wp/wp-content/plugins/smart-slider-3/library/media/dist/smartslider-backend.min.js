function strip_tags(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,s=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(s,"").replace(i,function(e,i){return t.indexOf("<"+i.toLowerCase()+">")>-1?e:""})}var NextendSmartSliderAdminStorage=function(){this.timelineManager=null,this.timelineControl=null,this.slide=null,this.frontend=null,this.generator=null,this.layerManager=null,this.history=null,this.oneSecWidth=200,this.oneSecMs=1e3,this.fps=20,this.pxToFrame=this.oneSecWidth/this.fps,this.$currentSlideElement=null};NextendSmartSliderAdminStorage.prototype.durationToOffsetX=function(e){return e*this.oneSecWidth},NextendSmartSliderAdminStorage.prototype.offsetXToDuration=function(e){return e/this.oneSecWidth},NextendSmartSliderAdminStorage.prototype.normalizeOffsetX=function(e){return Math.round(e/this.pxToFrame)*this.pxToFrame},NextendSmartSliderAdminStorage.prototype.startEditor=function(e,t,i,s,n,r){return null===this.slide&&window[e].started(function(){new SmartSliderAdminSlide(e,t,i,s,n,r)}),this.slide},window.nextend.pre="div#n2-ss-0 ",window.nextend.smartSlider=new NextendSmartSliderAdminStorage,function(e,t,i){function s(){this.type="backgroundanimation",NextendVisualManagerMultipleSelection.prototype.constructor.apply(this,arguments)}s.prototype=Object.create(NextendVisualManagerMultipleSelection.prototype),s.prototype.constructor=s,s.prototype.loadDefaults=function(){NextendVisualManagerMultipleSelection.prototype.loadDefaults.apply(this,arguments),this.type="backgroundanimation",this.labels={visual:"Background animation",visuals:"Background animations"}},s.prototype.initController=function(){return new NextendBackgroundAnimationEditorController},s.prototype.createVisual=function(e,t){return new NextendVisualWithSetRowMultipleSelection(e,t,this)},i.NextendBackgroundAnimationManager=s}(nextend.smartSlider,n2,window),function(e,t){function i(){this.parameters={shiftedBackgroundAnimation:0},NextendVisualEditorController.prototype.constructor.call(this,!1),this.bgAnimationElement=e(".n2-bg-animation"),this.slides=e(".n2-bg-animation-slide"),this.bgImages=e(".n2-bg-animation-slide-bg"),NextendTween.set(this.bgImages,{rotationZ:1e-4}),this.directionTab=new NextendElementRadio("n2-background-animation-preview-tabs",["0","1"]),this.directionTab.element.on("nextendChange.n2-editor",e.proxy(this.directionTabChanged,this)),nModernizr.csstransforms3d&&nModernizr.csstransformspreserve3d||nextend.notificationCenter.error("Background animations are not available in your browser. It works if the <i>transform-style: preserve-3d</i> feature available. ")}i.prototype=Object.create(NextendVisualEditorController.prototype),i.prototype.constructor=i,i.prototype.loadDefaults=function(){NextendVisualEditorController.prototype.loadDefaults.call(this),this.type="backgroundanimation",this.current=0,this.animationProperties=!1,this.direction=0},i.prototype.get=function(){return null},i.prototype.load=function(e,t,i,s){this.lightbox.addClass("n2-editor-loaded")},i.prototype.setTabs=function(e){},i.prototype.directionTabChanged=function(){this.direction=parseInt(this.directionTab.element.val())},i.prototype.start=function(){this.animationProperties&&(this.timeline?this.timeline.play():this.next())},i.prototype.pause=function(){this.timeline&&this.timeline.pause()},i.prototype.next=function(){this.timeline=new NextendTimeline({paused:!0,onComplete:e.proxy(this.ended,this)});var t=this.bgImages.eq(this.current),i=this.bgImages.eq(1-this.current);nModernizr.csstransforms3d&&nModernizr.csstransformspreserve3d?(this.currentAnimation=new window["NextendSmartSliderBackgroundAnimation"+this.animationProperties.type](this,t,i,this.animationProperties,1,this.direction),this.slides.eq(this.current).css("zIndex",2),this.slides.eq(1-this.current).css("zIndex",3),this.timeline.to(this.slides.eq(this.current),.5,{opacity:0},this.currentAnimation.getExtraDelay()),this.timeline.to(this.slides.eq(1-this.current),.5,{opacity:1},this.currentAnimation.getExtraDelay()),this.currentAnimation.postSetup()):(this.timeline.to(this.slides.eq(this.current),1.5,{opacity:0},0),this.timeline.to(this.slides.eq(1-this.current),1.5,{opacity:1},0)),this.current=1-this.current,this.timeline.play()},i.prototype.ended=function(){this.currentAnimation&&this.currentAnimation.ended(),this.next()},i.prototype.setAnimationProperties=function(e){var t=this.animationProperties;this.animationProperties=e,t||this.next()},t.NextendBackgroundAnimationEditorController=i}(n2,window),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var s=[],n=arguments[1],r=0;i>r;r++)if(r in t){var a=t[r];e.call(n,a,r,t)&&s.push(a)}return s}),function(e,t,i){function s(){this.$input=e('<input type="text" name="name" />').on({mouseup:function(e){e.stopPropagation()},keyup:e.proxy(function(e){27==e.keyCode&&this.cancel()},this),blur:e.proxy(this.save,this)}),this.$form=e('<form class="n2-inline-form"></form>').append(this.$input).on("submit",e.proxy(this.save,this))}s.prototype.injectNode=function(e,t){this.$input.val(t),e.append(this.$form),this.$input.focus()},s.prototype.save=function(e){e.preventDefault(),this.$input.trigger("valueChanged",[this.$input.val()]),this.$input.off("blur"),this.destroy()},s.prototype.cancel=function(){this.$input.trigger("cancel"),this.destroy()},s.prototype.destroy=function(){this.$input.off("blur"),this.$form.remove()},t.NextendSmartSliderAdminInlineField=s}(n2,window),function(e,t,i,s){"use strict";function n(){this.historyStates=50,this.isEnabled=0!=this.historyStates,this.historyAddAllowed=!0,this.isBatched=!1,this.index=-1,this.history=[],this.preventUndoRedo=!1,this.undoBTN=t("#n2-ss-undo").on("click",t.proxy(this.undo,this)),this.redoBTN=t("#n2-ss-redo").on("click",t.proxy(this.redo,this)),this.updateUI()}n.prototype.updateUI=function(){0==this.index||0==this.history.length?this.undoBTN.removeClass("n2-active"):this.undoBTN.addClass("n2-active"),-1==this.index||this.index>=this.history.length?this.redoBTN.removeClass("n2-active"):this.redoBTN.addClass("n2-active")},n.prototype.throttleUndoRedo=function(){return this.preventUndoRedo?!0:(this.preventUndoRedo=!0,setTimeout(t.proxy(function(){this.preventUndoRedo=!1},this),100),!1)},n.prototype.add=function(e){if(this.isEnabled&&this.historyAddAllowed){-1!=this.index&&this.history.splice(this.index,this.history.length),this.index=-1;var i=e();return this.isBatched?this.history[this.history.length-1].push(i):(this.history.push([i]),this.isBatched=!0,setTimeout(t.proxy(function(){this.isBatched=!1},this),100)),this.history.length>this.historyStates&&this.history.unshift(),this.updateUI(),i}},n.prototype.off=function(){this.historyAddAllowed=!1},n.prototype.on=function(){this.historyAddAllowed=!0},n.prototype.undo=function(e){if(e&&e.preventDefault(),this.throttleUndoRedo())return!1;if(this.off(),-1==this.index?this.index=this.history.length-1:this.index--,this.index>=0)for(var t=this.history[this.index],i=t.length-1;i>=0;i--){var s=t[i];s[0].history(s[1],s[3],s[4],s)}else this.index=0;this.on(),this.updateUI()},n.prototype.redo=function(e){if(e&&e.preventDefault(),this.throttleUndoRedo())return!1;if(this.off(),-1!=this.index&&this.index<this.history.length){var t=this.history[this.index];this.index++;for(var i=0;i<t.length;i++){var s=t[i];s[0].history(s[1],s[2],s[4],s)}}this.on(),this.updateUI()},n.prototype.changeFuture=function(e,t){for(var i=0;i<this.history.length;i++)for(var s=0;s<this.history[i].length;s++){this.history[i][s][0]===e&&(this.history[i][s][0]=t);for(var n=2;n<this.history[i][s].length;n++)for(var r=0;r<this.history[i][s][n].length;r++)this.history[i][s][n][r]===e&&(this.history[i][s][n][r]=t)}},n2(window).ready(function(){e.history=new n})}(nextend.smartSlider,n2,window),function(e,t,i){function s(t){var i=e("#n2-quick-slides-edit");i.length<1||(this.ajaxUrl=t,i.on("click",e.proxy(this.openEdit,this)))}s.prototype.openEdit=function(t){t.preventDefault();var i=e("#n2-ss-slides .n2-box-slide"),s=this;this.modal=new NextendModal({zero:{fit:!0,fitX:!1,overflow:"auto",size:[1200,700],title:n2_("Quick Edit - Slides"),back:!1,close:!0,content:'<form class="n2-form"><table></table></form>',controls:['<a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-green n2-uc n2-h4">'+n2_("Save")+"</a>"],fn:{show:function(){var t=this.controls.find(".n2-button-green"),n=this.content.find(".n2-form").on("submit",function(e){e.preventDefault(),t.trigger("click")}),r=n.find("table");i.each(e.proxy(function(t,i){var n=e(i),a=e("<tr />").appendTo(r),o=n.data("slideid");a.append(e("<td />").append('<img src="'+n.data("image")+'" style="width:100px;"/>')),a.append(e("<td />").append(s.createInput("Name","title-"+o,n.data("title"),"width: 240px;"))),a.append(e("<td />").append(s.createTextarea("Description","description-"+o,n.data("description"),"width: 330px;height:24px;")));var l=n.data("link").split("|*|");a.append(e("<td />").append(s.createLink("Link","link-"+o,l[0],"width: 180px;"))),a.append(e("<td />").append(s.createTarget("Target","target-"+o,l.length>1?l[1]:"_self",""))),new NextendElementUrl("link-"+o,nextend.NextendElementUrlParams)},this)),t.on("click",e.proxy(function(t){var n={};i.each(e.proxy(function(t,i){var s=e(i),r=s.data("slideid"),a=e("#title-"+r).val(),o=e("#description-"+r).val(),l=e("#link-"+r).val()+"|*|"+e("#target-"+r).val();a==s.data("title")&&o==s.data("description")&&l==s.data("link")||(n[r]={name:a,description:o,link:l})},this)),jQuery.isEmptyObject(n)?this.hide(t):(this.hide(t),NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(s.ajaxUrl),data:{changed:Base64.encode(JSON.stringify(n))},dataType:"json"}).done(e.proxy(function(t){var i=t.data;for(var s in i){var n=e('.n2-box-slide[data-slideid="'+s+'"]');n.find(".n2-box-placeholder a.n2-h4").html(i[s].title),n.attr("data-title",i[s].rawTitle),n.data("title",i[s].rawTitle),n.attr("data-description",i[s].rawDescription),n.data("description",i[s].rawDescription),n.attr("data-link",i[s].rawLink),n.data("link",i[s].rawLink)}},this)))},this))}}}}),this.modal.setCustomClass("n2-ss-quick-slides-edit-modal"),this.modal.show()},s.prototype.createInput=function(t,i,s){var n="";4==arguments.length&&(n=arguments[3]);var r=e('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+t+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-text n2-border-radius"><input type="text" id="'+i+'" class="n2-h5" autocomplete="off" style="'+n+'"></div></div></div></div>');return r.find("input").val(s),r},s.prototype.createTextarea=function(t,i,s){var n="";4==arguments.length&&(n=arguments[3]);var r=e('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+t+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-textarea n2-border-radius"><textarea id="'+i+'" class="n2-h5" autocomplete="off" style="resize:y;'+n+'"></textarea></div></div></div></div>');return r.find("textarea").val(s),r},s.prototype.createLink=function(t,i,s){var n="";4==arguments.length&&(n=arguments[3]);var r=e('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+t+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-text n2-border-radius"><input type="text" id="'+i+'" class="n2-h5" autocomplete="off" style="'+n+'"><a href="#" class="n2-form-element-clear"><i class="n2-i n2-it n2-i-empty n2-i-grey-opacity"></i></a><a id="'+i+'_button" class="n2-form-element-button n2-h5 n2-uc" href="#">Link</a></div></div></div></div>');return r.find("input").val(s),r},s.prototype.createTarget=function(t,i,s){var n="";4==arguments.length&&(n=arguments[3]);var r=e('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+t+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-list"><select id="'+i+'" autocomplete="off" style="'+n+'"><option value="_self">Self</option><option value="_blank">Blank</option></select</div></div></div></div>');return r.find("select").val(s),r},t.NextendSmartSliderQuickSlides=s}(n2,window),function(e,t,i){function s(t){this.showGuides=1,this.guides=[],this.ratios={w:1,h:1},this.container=e('<div class="n2-ruler-container" />').appendTo("#smartslider-adjust-height .n2-ss-slider-outer-container"),this.scale=10,this.vertical=e('<div class="n2-ruler n2-ruler-vertical unselectable"></div>').appendTo(".n2-ss-slider-real-container"),this.horizontal=e('<div class="n2-ruler n2-ruler-horizontal unselectable"></div>').appendTo(this.container),this.verticalSpans=e(),this.horizontalSpans=e(),this.onResize(),nextend.smartSlider.frontend.sliderElement.on("SliderResize",e.proxy(this.onSliderResize,this)),e(window).on("resize",e.proxy(this.onResize,this)),this.positionDisplay=e('<div class="n2 n2-ss-position-display"/>').appendTo("body"),this.horizontal.on("mousedown",e.proxy(function(e){this.showGuides&&new r(this,this.horizontal,this.ratios.w,e)},this)),this.vertical.on("mousedown",e.proxy(function(e){this.showGuides&&new a(this,this.vertical,this.ratios.h,e)},this));try{t=e.extend({vertical:[],horizontal:[]},JSON.parse(Base64.decode(t)));for(var i=0;i<t.horizontal.length;i++){var s=new r(this,this.horizontal,this.ratios.w);s.setPosition(t.horizontal[i])}for(var i=0;i<t.vertical.length;i++){var s=new a(this,this.vertical,this.ratios.h);s.setPosition(t.vertical[i])}}catch(n){}nextend.ruler=this,this.measureToolVertical(),this.measureToolHorizontal()}function n(t,i,s,n){this.ruler=t,this.container=i,this.position=0,this.ratio=s,this.guide=e('<div class="n2-ruler-guide"><div class="n2-ruler-guide-border"></div><div class="n2-ruler-guide-handle"></div></div>').appendTo(i).on("mousedown",e.proxy(function(e){e.preventDefault(),e.stopPropagation(),nextend.smartSlider.layerManager.settings["n2-ss-lock-guides"]||this["delete"]()},this)),this.ruler.addGuide(this),n&&this.create(n)}function r(){n.prototype.constructor.apply(this,arguments)}function a(){n.prototype.constructor.apply(this,arguments)}s.prototype.addGuide=function(e){this.guides.push(e)},s.prototype.removeGuide=function(t){this.guides.splice(e.inArray(t,this.guides),1)},s.prototype.clearGuides=function(){for(var e=this.guides.length-1;e>=0;e--)this.guides[e]["delete"]()},s.prototype.onSliderResize=function(e,t){this.ratios=t;for(var i=0;i<this.guides.length;i++)this.guides[i].setRatio(t.w,t.h);this.onResize()},s.prototype.onResize=function(){var t=nextend.smartSlider.frontend.responsive.responsiveDimensions,i=Math.max(t.slider.width,e("#n2-tab-smartslider-editor").outerWidth(!0)-40),s=Math.max(t.slider.height,e("#n2-tab-smartslider-editor").outerHeight(!0));this.container.css({width:i+40,height:s+40});for(var n=this.horizontalSpans.length-3;n<i/this.scale;n++){var r=e("<span />").appendTo(this.horizontal);n%10==0?r.addClass("n2-ss-ruler-mark-large").append("<span>"+n/10*100+"</span>"):n%2==0&&r.addClass("n2-ss-ruler-mark-medium"),this.horizontalSpans=this.horizontalSpans.add(r)}for(var n=this.verticalSpans.length-3;n<s/this.scale;n++){var r=e("<span />").appendTo(this.vertical);n%10==0?r.addClass("n2-ss-ruler-mark-large").append("<span>"+n/10*100+"</span>"):n%2==0&&r.addClass("n2-ss-ruler-mark-medium"),this.verticalSpans=this.verticalSpans.add(r)}},s.prototype.toArray=function(){for(var e={horizontal:[],vertical:[]},t=0;t<this.guides.length;t++)this.guides[t]instanceof r?e.horizontal.push(this.guides[t].position):this.guides[t]instanceof a&&e.vertical.push(this.guides[t].position);return e},s.prototype.measureToolVertical=function(){var t=e('<div class="n2-ruler-guide" style="z-index:1;"><div class="n2-ruler-guide-border" style="border-color: #f00;"></div></div>').css("display","none").appendTo(this.vertical),i=!1,s=e.proxy(function(){i||(i=!0,t.css("display",""),this.positionDisplay.addClass("n2-active"))},this),n=e.proxy(function(){i&&(i=!1,t.css("display","none"),this.positionDisplay.removeClass("n2-active"))},this);this.vertical.on({mouseenter:e.proxy(function(i){if(this.showGuides){var r=0,a=Math.round(this.vertical.offset().top);s(),this.vertical.on("mousemove.n2-ruler-measure-tool",e.proxy(function(i){if(e(i.target).hasClass("n2-ruler-guide-border")&&e(i.target).parent()[0]!=t[0])n();else if(s(),r!=i.pageY){var o=i.pageY-a;t.css("top",o),this.positionDisplay.html(o-40+"px").css({left:i.pageX+10,top:i.pageY+10}),r=i.pageY}},this))}},this),mouseleave:e.proxy(function(){this.vertical.off(".n2-ruler-measure-tool"),n()},this)})},s.prototype.measureToolHorizontal=function(){var t=e('<div class="n2-ruler-guide" style="z-index:1;"><div class="n2-ruler-guide-border" style="border-color: #f00;"></div></div>').css("display","none").appendTo(this.horizontal),i=!1,s=e.proxy(function(){i||(i=!0,t.css("display",""),this.positionDisplay.addClass("n2-active"))},this),n=e.proxy(function(){i&&(i=!1,t.css("display","none"),this.positionDisplay.removeClass("n2-active"))},this);this.horizontal.on({mouseenter:e.proxy(function(i){if(this.showGuides){var r=0,a=Math.round(this.horizontal.offset().left);s(),this.horizontal.on("mousemove.n2-ruler-measure-tool",e.proxy(function(i){if(e(i.target).hasClass("n2-ruler-guide-border")&&e(i.target).parent()[0]!=t[0])n();else if(s(),r!=i.pageX){var o=Math.max(i.pageX-a,40);t.css("left",o),this.positionDisplay.html(o-40+"px").css({left:i.pageX+10,top:i.pageY+10}),r=i.pageX}},this))}},this),mouseleave:e.proxy(function(){this.horizontal.off(".n2-ruler-measure-tool"),n()},this)})},t.NextendSmartSliderRuler=s,n.prototype._position=function(e,t){return Math.max(0,e)},n.prototype.setPosition=function(e){this.position=e,this.refresh()},n.prototype.refresh=function(){this.positionRender(this.position)},n.prototype["delete"]=function(){this.ruler.removeGuide(this),this.guide.remove()},r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.prototype.create=function(e){var t=Math.round(this.container.offset().left)+40;this.position=this._position((e.pageX-t)/this.ratio,e),this.positionRender(this.position)},r.prototype.rawPositionRender=function(e){this.guide.css("left",Math.max(0,e)+40)},r.prototype.positionRender=function(e){this.guide.css("left",Math.max(0,e)*this.ratio+40)},r.prototype.setRatio=function(e,t){this.ratio=t,this.refresh()},a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.create=function(e){var t=Math.round(this.container.offset().top)+40;this.position=this._position((e.pageY-t)/this.ratio,e),this.positionRender(this.position)},a.prototype.rawPositionRender=function(e){this.guide.css("top",Math.max(0,e)+40)},a.prototype.positionRender=function(e){this.guide.css("top",Math.max(0,e)*this.ratio+40)},a.prototype.setRatio=function(e,t){this.ratio=e,this.refresh()}}(n2,window),function(e,t,i){function s(t,i,s,r,a,o){this.quickPostModal=null,this.quickVideoModal=null,this.parameters=s,this.slides=[],this.ajaxUrl=t,this.contentAjaxUrl=i,this.slidesPanel=e("#n2-ss-slides-container"),this.slidesContainer=this.slidesPanel.find(".n2-ss-slides-container"),this.initMenu(),this.initSlidesOrderable();for(var l=this.slidesContainer.find(".n2-box-slide"),d=0;d<l.length;d++)this.slides.push(new n(this,l.eq(d)));if(e("html").attr("data-slides",this.slides.length),e(".n2-add-quick-image, .n2-box-slide-dummy").on("click",e.proxy(this.addQuickImage,this)),e(".n2-add-quick-video").on("click",e.proxy(this.addQuickVideo,this)),e(".n2-add-quick-post").on("click",e.proxy(this.addQuickPost,this)),this.initBulk(),!r){var h=[];this.slidesContainer.fileupload({url:a,pasteZone:!1,dataType:"json",paramName:"image",dropZone:e("undefined"==typeof nextend.smartSlider?document:".n2-ss-slides-outer-container"),add:e.proxy(function(e,t){t.formData={path:"/"+o},t.submit()},this),done:e.proxy(function(e,t){var i=t.result;i.data&&i.data.name?h.push({title:i.data.name,description:"",image:i.data.url}):NextendAjaxHelper.notification(i)},this),fail:e.proxy(function(e,t){NextendAjaxHelper.notification(t.jqXHR.responseJSON)},this),start:function(){NextendAjaxHelper.startLoading()},stop:e.proxy(function(){h.length?this._addQuickImages(h):setTimeout(function(){NextendAjaxHelper.stopLoading()},100),h=[]},this)});var p=null;this.slidesContainer.on("dragover",e.proxy(function(t){null!==p?(clearTimeout(p),p=null):this.slidesContainer.addClass("n2-drag-over"),p=setTimeout(e.proxy(function(){this.slidesContainer.removeClass("n2-drag-over"),p=null},this),400)},this))}}function n(t,i){this.selected=!1,this.manager=t,this.box=i.data("slide",this).addClass("n2-clickable"),this.box.on("mouseenter",e.proxy(function(){this.manager.showMenu(this)},this)).on("mouseleave",e.proxy(function(){this.manager.hideMenu()},this)).on("click.n2-slide",e.proxy(this.goToEdit,this)),this.publishElement=this.box.find(".n2-slide-published").on("click",e.proxy(this.switchPublished,this)),this.box.find(".n2-ss-box-select").on("click",e.proxy(function(e){e.stopPropagation(),e.preventDefault(),this.invertSelection()},this))}s.prototype.changed=function(){},s.prototype.initSlidesOrderable=function(){this.slidesContainer.sortable({helper:"clone",forcePlaceholderSize:!1,tolerance:"pointer",items:".n2-box-slide",start:function(e,t){t.item.show()},stop:e.proxy(this.saveSlideOrder,this),placeholder:"n2-box-sortable-placeholder n2-box-sortable-placeholder-small",distance:10})},s.prototype.saveSlideOrder=function(t){for(var i=this.slidesContainer.find(".n2-box-slide"),s=[],n=[],r=[],a=0;a<i.length;a++){var o=i.eq(a).data("slide");s.push(o),n.push(o.getId())}for(var a=0;a<this.slides.length;a++)r.push(this.slides[a].getId());if(JSON.stringify(r)!=JSON.stringify(n)){e(window).triggerHandler("SmartSliderSidebarSlidesOrderChanged");var l={nextendcontroller:"slides",nextendaction:"order"};NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,l),data:{slideorder:n}}),this.slides=s,this.changed()}},s.prototype.initSlides=function(){for(var t=(this.slides.length,this.slidesContainer.find(".n2-box-slide")),i=[],s=0;s<t.length;s++){var n=t.eq(s).data("slide");i.push(n)}this.slides=i,this.changed(),e(window).triggerHandler("SmartSliderSidebarSlidesChanged"),e("html").attr("data-slides",this.slides.length)},s.prototype.unsetFirst=function(){for(var e=0;e<this.slides.length;e++)this.slides[e].unsetFirst();this.changed()},s.prototype.addQuickImage=function(t){t.preventDefault(),nextend.imageHelper.openMultipleLightbox(e.proxy(this._addQuickImages,this))},s.prototype.addBoxes=function(t){t.insertBefore(this.slidesContainer.find(".n2-clear")),t.addClass("n2-ss-box-just-added").each(e.proxy(function(t,i){new n(this,e(i))},this)),this.initSlides(),setTimeout(function(){t.removeClass("n2-ss-box-just-added")},200)},s.prototype._addQuickImages=function(t){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"quickImages"}),data:{images:Base64.encode(JSON.stringify(t))}}).done(e.proxy(function(t){this.addBoxes(e(t.data))},this))},s.prototype.addQuickVideo=function(t){t.preventDefault();var i=this;this.quickVideoModal||(this.quickVideoModal=new NextendModal({zero:{size:[500,350],title:n2_("Add video"),back:!1,close:!0,content:'<form class="n2-form"></form>',controls:['<a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-green n2-uc n2-h4">'+n2_("Add video")+"</a>"],fn:{show:function(){var t=this.controls.find(".n2-button"),s=(this.content.find(".n2-form").on("submit",function(e){e.preventDefault(),t.trigger("click")}).append(this.createInput(n2_("Video url"),"n2-slide-video-url","width: 446px;")),this.content.find("#n2-slide-video-url").focus());this.content.append(this.createHeading(n2_("Examples"))),this.content.append(this.createTable([["YouTube","https://www.youtube.com/watch?v=MKmIwHAFjSU"],["Vimeo","https://vimeo.com/144598279"]],["",""])),t.on("click",e.proxy(e.proxy(function(t){t.preventDefault();var n=s.val(),r=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,a=n.match(r),o=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,l=n.match(o),d=n.match(/\.(mp4|ogv|ogg|webm)/i);a?NextendAjaxHelper.getJSON("https://www.googleapis.com/youtube/v3/videos?id="+encodeURI(a[2])+"&part=snippet&key=AIzaSyC3AolfvPAPlJs-2FgyPJdEEKS6nbPHdSM").done(e.proxy(function(e){if(e.items.length){var t=e.items[0].snippet,s=e.items[0].snippet.thumbnails,r=s.maxres||s.standard||s.high||s.medium||s["default"];i._addQuickVideo(this,{type:"youtube",title:t.title,description:t.description,image:r.url,video:n})}},this)).fail(function(e){nextend.notificationCenter.error(e.error.errors[0].message)}):l?NextendAjaxHelper.getJSON("https://vimeo.com/api/v2/video/"+l[3]+".json").done(e.proxy(function(e){i._addQuickVideo(this,{type:"vimeo",title:e[0].title,description:e[0].description,video:l[3],image:e[0].thumbnail_large})},this)).fail(function(e){nextend.notificationCenter.error(e.responseText)}):d?nextend.notificationCenter.error("This video url is not supported!"):nextend.notificationCenter.error("This video url is not supported!")},this)))}}}})),this.quickVideoModal.show()},s.prototype._addQuickVideo=function(t,i){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"quickVideo"}),data:{video:Base64.encode(encodeURIComponent(JSON.stringify(i)))}}).done(e.proxy(function(t){this.addBoxes(e(t.data)),this.initSlides()},this)),t.hide()},s.prototype.addQuickPost=function(t){if(t.preventDefault(),!this.quickPostModal){var i=this,s={},n=e.proxy(function(e){return"undefined"==typeof s[e]&&(s[e]=NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.contentAjaxUrl),data:{keyword:e},dataType:"json"})),s[e]},this);this.quickPostModal=new NextendModal({zero:{size:[600,430],title:n2_("Add post"),back:!1,close:!0,content:'<div class="n2-form"></div>',fn:{show:function(){this.content.find(".n2-form").append(this.createInput(n2_("Keyword"),"n2-ss-keyword","width:546px;"));var t=e("#n2-ss-keyword"),s=this.createHeading("").appendTo(this.content),r=this.createResult().appendTo(this.content),a="";t.on("keyup",e.proxy(function(){a=t.val(),n(a).done(e.proxy(function(n){if(t.val()==a){""==a?s.html(n2_("No search term specified. Showing recent items.")):s.html(n2_printf(n2_('Showing items match for "%s"'),a));for(var o=n.data,l=[],d=this,h=0;h<o.length;h++)l.push([o[h].title,o[h].info,e('<div class="n2-button n2-button-normal n2-button-xs n2-button-green n2-radius-s n2-uc n2-h5">'+n2_("Select")+"</div>").on("click",{post:o[h]},function(e){i._addQuickPost(d,e.data.post)})]);r.html(""),this.createTable(l,["width:100%;","",""]).appendTo(this.createTableWrap().appendTo(r))}},this))},this)).trigger("keyup").focus()}}}})}this.quickPostModal.show()},s.prototype._addQuickPost=function(t,i){i.image||(i.image=""),NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"quickPost"}),data:{post:i}}).done(e.proxy(function(t){this.addBoxes(e(t.data)),this.initSlides()},this)),t.hide()},s.prototype.initBulk=function(){this.selection=[],this.isBulkSelection=!1;var t=e(".n2-bulk-select").find("a");t.eq(0).on("click",e.proxy(function(e){e.preventDefault(),this.bulkSelect(function(e){e.select()})},this)),t.eq(1).on("click",e.proxy(function(e){e.preventDefault(),this.bulkSelect(function(e){e.deSelect()})},this)),t.eq(2).on("click",e.proxy(function(e){e.preventDefault(),this.bulkSelect(function(e){e.box.hasClass("n2-slide-state-published")?e.select():e.deSelect()})},this)),t.eq(3).on("click",e.proxy(function(e){e.preventDefault(),this.bulkSelect(function(e){e.box.hasClass("n2-slide-state-published")?e.deSelect():e.select()})},this));var i=e(".n2-bulk-actions").find("a");i.eq(0).on("click",e.proxy(function(e){e.preventDefault(),this.bulkAction("deleteSlides")},this)),i.eq(1).on("click",e.proxy(function(e){e.preventDefault(),this.bulkAction("duplicateSlides")},this)),i.eq(2).on("click",e.proxy(function(e){e.preventDefault(),this.bulkAction("publishSlides")},this)),i.eq(3).on("click",e.proxy(function(e){e.preventDefault(),this.bulkAction("unPublishSlides")},this))},s.prototype.addSelection=function(e){0==this.selection.length&&this.enterBulk(),this.selection.push(e)},s.prototype.removeSelection=function(t){this.selection.splice(e.inArray(t,this.selection),1),0==this.selection.length&&this.leaveBulk()},s.prototype.bulkSelect=function(e){for(var t=0;t<this.slides.length;t++)e(this.slides[t])},s.prototype.bulkAction=function(e){var t=[],i=[];this.bulkSelect(function(e){e.selected&&(t.push(e),i.push(e.getId()))}),i.length?this[e](i,t):nextend.notificationCenter.notice("Please select one or more slides for the action!")},s.prototype.enterBulk=function(){this.isBulkSelection||(this.isBulkSelection=!0,this.slidesContainer.sortable("option","disabled",!0),e("#n2-admin").addClass("n2-ss-has-box-selection"))},s.prototype.leaveBulk=function(){if(this.isBulkSelection){this.slidesContainer.sortable("option","disabled",!1),e("#n2-admin").removeClass("n2-ss-has-box-selection");for(var t=0;t<this.slides.length;t++)this.slides[t].deSelect();this.selection=[],this.isBulkSelection=!1}},s.prototype.deleteSlides=function(t,i){this.hideMenu();var s=i[0].box.find(".n2-box-placeholder-title a").text();i.length>1&&(s+=" and "+(i.length-1)+" more"),NextendDeleteModal("slide-delete",s,e.proxy(function(){NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"delete"}),type:"POST",data:{slides:t}}).done(e.proxy(function(){for(var e=0;e<i.length;e++)i[e].deleted();this.initSlides(),this.leaveBulk()},this))},this))},s.prototype.duplicateSlides=function(t,i){for(var s=0;s<this.slides.length;s++)this.slides[s].selected&&this.slides[s].duplicate(e.Event("click",{currentTarget:null}))},s.prototype.publishSlides=function(t,i){NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"publish"}),type:"POST",data:{slides:t}}).done(e.proxy(function(){for(var e=0;e<i.length;e++)i[e].published();this.changed()},this))},s.prototype.unPublishSlides=function(t,i){NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"unpublish"}),type:"POST",data:{slides:t}}).done(e.proxy(function(){for(var e=0;e<i.length;e++)i[e].unPublished();this.changed()},this))},s.prototype.initMenu=function(){this.slide=null,this.menu=e("#n2-ss-slide-menu").detach().addClass("n2-inited"),this.menuActions={publish:this.menu.find(".n2-ss-publish").on("click",e.proxy(function(e){this.slide.switchPublished(e)},this)),unpublish:this.menu.find(".n2-ss-unpublish").on("click",e.proxy(function(e){this.slide.switchPublished(e)},this)),generator:this.menu.find(".n2-ss-generator").on("click",e.proxy(function(e){e.preventDefault(),e.stopPropagation(),window.location=this.slide.box.data("generator")},this)),duplicate:this.menu.find(".n2-ss-duplicate").on("click",e.proxy(function(e){this.slide.duplicate(e)},this)),"delete":this.menu.find(".n2-ss-delete").on("click",e.proxy(function(e){this.slide["delete"](e)},this)),setFirst:this.menu.find(".n2-ss-setFirst").on("click",e.proxy(function(e){this.slide.setFirst(e)},this)),saveLayout:this.menu.find(".n2-ss-saveLayout")},this.menu.find(".n2-button").on("click",e.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.menu.hasClass("n2-active")?this.menu.removeClass("n2-active").off("mouseleave"):this.menu.addClass("n2-active").on("mouseleave",function(){e(this).removeClass("n2-active")})},this))},s.prototype.showMenu=function(e){this.slide=e,this.menu.appendTo(e.box)},s.prototype.hideMenu=function(){this.menu.detach()},t.NextendSmartSliderAdminSidebarSlides=s,n.prototype.getId=function(){return this.box.data("slideid");
},n.prototype.setFirst=function(t){t.stopPropagation(),t.preventDefault(),NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.manager.ajaxUrl,{nextendaction:"first"}),type:"POST",data:{id:this.getId()}}).done(e.proxy(function(){this.manager.unsetFirst(),this.box.addClass("n2-slide-state-first")},this))},n.prototype.unsetFirst=function(){this.box.removeClass("n2-slide-state-first")},n.prototype.switchPublished=function(e){e.stopPropagation(),e.preventDefault(),this.isPublished()?this.manager.unPublishSlides([this.getId()],[this]):this.manager.publishSlides([this.getId()],[this])},n.prototype.isPublished=function(){return this.box.hasClass("n2-slide-state-published")},n.prototype.published=function(){this.box.addClass("n2-slide-state-published")},n.prototype.unPublished=function(){this.box.removeClass("n2-slide-state-published")},n.prototype.goToEdit=function(e,t){var i=this.box.data("editurl");"undefined"!=typeof t&&t?window.open(i,"_blank"):i==location.href?n2("#n2-admin").toggleClass("n2-ss-slides-outer-container-visible"):window.location=i},n.prototype.duplicate=function(t){t.stopPropagation(),t.preventDefault();var i=e.Deferred();return NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.box.data("editurl"),{nextendaction:"duplicate"})}).done(e.proxy(function(t){var s=e(t.data).insertAfter(this.box),r=new n(this.manager,s);this.manager.initSlides(),i.resolve(r)},this)),i},n.prototype["delete"]=function(e){e.stopPropagation(),e.preventDefault(),this.manager.deleteSlides([this.getId()],[this])},n.prototype.deleted=function(){this.box.remove()},n.prototype.invertSelection=function(e){e&&e.preventDefault(),this.selected?this.deSelect():this.select()},n.prototype.select=function(){this.selected||(this.selected=!0,this.box.addClass("n2-selected"),this.manager.addSelection(this))},n.prototype.deSelect=function(){this.selected&&(this.selected=!1,this.box.removeClass("n2-selected"),this.manager.removeSelection(this))},t.NextendSmartSliderAdminSlide=n}(n2,window),function(e,t,i,s){function n(i){this.detachedPosition={left:t.jStorage.get("ssPanelLeft")||100,top:t.jStorage.get("ssPanelTop")||100,height:t.jStorage.get("ssPanelHeight")||400},this.autoPosition=t.jStorage.get("ssPanelAutoPosition",1),this.lastHeight=this.detachedPosition.height,this.admin=t("#n2-admin"),this.sidebar=t("#n2-ss-slide-sidebar").on("mousedown",t.proxy(nextend.context.setMouseDownArea,nextend.context,"sidebarClicked")),this.title=this.sidebar.find(".n2-panel-titlebar-title"),this.sidebarTD=this.sidebar.parent(),this.layerManager=i,e.sidebarManager=this,this.editorPanel=t(".n2-ss-editor-panel"),this.views={layerEdit:t("#n2-ss-layer-edit")},this.viewPanes={layerEdit:t("#n2-tabbed-slide-editor-settings > .n2-tabs").addClass("n2-scrollable")};for(var s in this.viewPanes)this.viewPanes[s].on("DOMMouseScroll mousewheel",function(e){var i=!1;e.originalEvent&&(e.originalEvent.wheelDelta&&(i=e.originalEvent.wheelDelta/-1<0),e.originalEvent.deltaY&&(i=e.originalEvent.deltaY<0),e.originalEvent.detail&&(i=e.originalEvent.detail<0));var s=function(){return e.stopPropagation(),e.preventDefault(),e.returnValue=!1,!1};return!i&&this.scrollHeight<=t(this).innerHeight()+this.scrollTop+1?s():i&&0>=this.scrollTop-1?s():void 0});this.panelHeading=t("#n2-tabbed-slide-editor-settings").find(".n2-sidebar-tab-switcher .n2-td");var n=this.sidebar.find(".n2-panel-titlebar-nav-right");this.magnet=t('<a href="#"><i class="n2-i n2-i-magnet n2-i-grey-opacity" data-n2tip="Auto position layer window"></i></a>').on("click",t.proxy(function(e){e.preventDefault(),this.magnetize()},this)).css("display","none").appendTo(n),t('<a href="#"><i class="n2-i n2-i-closewindow n2-i-grey-opacity"></i></a>').on("click",t.proxy(function(e){e.preventDefault(),this.hide()},this)).appendTo(n),nextend.tooltip.add(n);var r=t("#n2-ss-slide-vertical-bar");t(".n2-ss-add-layer-button").on("click",function(e){e.preventDefault(),r.toggleClass("n2-active")}),t(".n2-ss-core-item").on("click",function(e){r.removeClass("n2-active")});var a=t("#wpadminbar, .navbar-fixed-top").height()+t(".n2-top-bar").height();this.$verticalBarInner=t(".n2-ss-slide-vertical-bar-inner").each(function(){var e=t(this);e.fixTo(e.parent(),{top:a})}),this.$resizeInnerContainer=t("#n2-ss-layers-switcher_0, #n2-ss-layers-switcher_1"),this.extraHeightToRemove=60,this.$resizeInnerContainer.length||(this.extraHeightToRemove=0,this.$resizeInnerContainer=this.$verticalBarInner),this.$resizeInnerContainer.css("overflow","auto"),this.detach(),t("#n2-admin").on("resize",t.proxy(this.resizeVerticalBar,this)),t(window).on("resize",t.proxy(this.onResize,this))}n.prototype.magnetize=function(){if(!this.autoPosition){this.autoPosition=1,t.jStorage.set("ssPanelAutoPosition",1),this.magnet.css("display","none");var e=this.layerManager.getSelectedLayer();e&&e.positionSidebar()}},n.prototype.show=function(e,i){this.setTitle(e.property.name),t("body").addClass("n2-ss-layer-edit-visible"),this.autoPosition&&this.sidebar.position({my:"left top",at:"right+10 top",collision:"flipfit",of:i.is(":visible")?i:"#n2-ss-layer-list"})},n.prototype._show=function(){t("body").addClass("n2-ss-layer-edit-visible")},n.prototype.hide=function(){t("body").removeClass("n2-ss-layer-edit-visible")},n.prototype.hideWithDeferred=function(e){t("body").hasClass("n2-ss-layer-edit-visible")&&(this.hide(),e.done(t.proxy(this._show,this)))},n.prototype.setTitle=function(e){this.title.html(e)},n.prototype.getLayerEditExcludedHeight=function(){return 85},n.prototype.resizeVerticalBar=function(){this.$resizeInnerContainer.height((window.innerHeight||document.documentElement.clientHeight)-(t("#n2-ss-layers").is(":visible")&&t("#n2-ss-layers").hasClass("n2-active")?t("#n2-ss-layers").height():0)-t("#wpadminbar, .navbar-fixed-top").height()-t(".n2-top-bar").height()-this.extraHeightToRemove)},n.prototype.onResize=function(){this.sidebar.css("display","block"),this.resizeVerticalBar();var e=window.innerHeight||document.documentElement.clientHeight,t=this.sidebar.height()-this.getLayerEditExcludedHeight();this.viewPanes.layerEdit.height(t);var i={},s=window.innerWidth||document.documentElement.clientWidth,n=this.sidebar[0].getBoundingClientRect();n.left<0?i.left=0:n.left+n.width>s&&(i.left=Math.max(0,s-n.width)),n.height>e-n.top&&(i.top=e-n.top-n.height+n.top,i.top<0&&(this.lastHeight=i.height=n.height+i.top,i.top=0)),this.sidebar.css(i),this.sidebar.css("display","")},n.prototype.detach=function(){this.autoPosition?(this.sidebar.css("height",this.detachedPosition.height),this.magnet.css("display","none")):(this.sidebar.css(this.detachedPosition),this.magnet.css("display","inline-block")),this.sidebar.appendTo(this.admin),this.admin.addClass("n2-sidebar-hidden"),t(window).off(".n2-ss-panel"),this.sidebar.removeClass("n2-sidebar-fixed"),this.sidebar.draggable({distance:5,handle:".n2-panel-titlebar",containment:"window",stop:t.proxy(function(e,i){this.sidebar.css("height",this.lastHeight);var s=this.sidebar[0].getBoundingClientRect();this.detachedPosition.left=s.left,this.detachedPosition.top=s.top,t.jStorage.set("ssPanelLeft",s.left),t.jStorage.set("ssPanelTop",s.top),this.autoPosition=0,t.jStorage.set("ssPanelAutoPosition",0),this.magnet.css("display","inline-block")},this),scroll:!1}).resizable({distance:5,handles:"s",stop:t.proxy(function(e,i){this.lastHeight=this.detachedPosition.height=this.sidebar.height(),t.jStorage.set("ssPanelHeight",this.detachedPosition.height)},this),create:t.proxy(function(e,i){t(e.target).find(".ui-resizable-handle").addClass("n2-ss-panel-resizer")},this)}),this.onResize(),nextend.triggerResize()},n.prototype.switchTab=function(e){this.panelHeading.filter('[data-tab="'+e+'"]').trigger("click")},i.NextendSmartSliderSidebar=n}(nextend.smartSlider,n2,window),function(e,t,i,s){function n(i,s,n,r,a,o){this.options=t.extend({slideAsFile:0},o),this.readyDeferred=t.Deferred(),e.slide=this,this._warnInternetExplorerUsers(),this.$slideContentElement=t("#"+s),this.$slideGuidesElement=t("#slideguides"),this.slideStartValue=this.$slideContentElement.val(),this.$sliderElement=t("#"+i),e.frontend=window["n2-ss-0"],e.ruler=new NextendSmartSliderRuler(this.$slideGuidesElement.val()),e.frontend.visible(function(){t("body").addClass("n2-ss-slider-visible");var e=t("#n2-tab-smartslider-editor"),i=e.tinyscrollbar({axis:"x",wheel:!1,wheelLock:!1}).data("plugin_tinyscrollbar");"function"==typeof e.get(0).move&&(e.get(0).move=null),this.sliderElement.on("SliderResize",function(){i.update("relative")})});var l=this.$sliderElement.data("fontsize");nextend.fontManager.setFontSize(l),nextend.styleManager.setFontSize(l),e.$currentSlideElement=e.frontend.adminGetCurrentSlideElement(),new SmartSliderAdminGenerator,e.$currentSlideElement.addClass("n2-ss-currently-edited-slide");var d=e.frontend.parameters.isStaticEdited;new NextendSmartSliderAdminSlideLayerManager(e.$currentSlideElement.data("slide"),d,n,r,a),d||this._initializeBackgroundChanger(),this.readyDeferred.resolve(),t("#smartslider-form").on({checkChanged:t.proxy(this.prepareFormForCheck,this),submit:t.proxy(this.onSlideSubmit,this)}),this.createHistory()}n.prototype.ready=function(e){this.readyDeferred.done(e)},n.prototype.prepareFormForCheck=function(){var t=JSON.stringify(e.layerManager.getData()),i=JSON.stringify(JSON.parse(Base64.decode(this.slideStartValue)));this.$slideContentElement.val(i==t?this.slideStartValue:Base64.encode(t))},n.prototype.onSlideSubmit=function(e){if(!nextend.isPreview)if(this.prepareForm(),e.preventDefault(),nextend.askToSave=!1,this.options.slideAsFile&&typeof window.FormData!==s&&"undefined"!=typeof window.File){var i=new FormData,n=t("#smartslider-form").serializeArray();t.each(n,function(e,t){"slide[slide]"==t.name?i.append("slide",new File([t.value],"slide.txt")):i.append(t.name,t.value)}),NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(window.location.href),type:"POST",data:i,contentType:!1,processData:!1}).done(t.proxy(this.afterSave,this))}else NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(window.location.href),data:t("#smartslider-form").serialize(),dataType:"json"}).done(t.proxy(this.afterSave,this))},n.prototype.afterSave=function(){nextend.askToSave=!0,t("#smartslider-form").trigger("saved"),t(".n2-ss-edit-slide-top-details .n2-h1").html(t("#slidetitle").val())},n.prototype.prepareForm=function(){this.$slideGuidesElement.val(Base64.encode(JSON.stringify(e.ruler.toArray()))),this.$slideContentElement.val(Base64.encode(nextend.UnicodeToHTMLEntity(JSON.stringify(e.layerManager.getData()))))},n.prototype._initializeBackgroundChanger=function(){this.background={type:t("#slidebackground-type").on("nextendChange",t.proxy(this.__onAfterBackgroundTypeChange,this)),slideBackgroundColorField:t("#slidebackgroundColor").on("nextendChange",t.proxy(this.__onAfterBackgroundColorChange,this)),slideBackgroundGradientField:t("#slidebackgroundGradient").on("nextendChange",t.proxy(this.__onAfterBackgroundColorChange,this)),slideBackgroundColorEndField:t("#slidebackgroundColorEnd").on("nextendChange",t.proxy(this.__onAfterBackgroundColorChange,this)),slideBackgroundImageField:t("#slidebackgroundImage").on("nextendChange",t.proxy(this.__onAfterBackgroundImageChange,this)),slideBackgroundImageOpacity:t("#slidebackgroundImageOpacity").on("nextendChange",t.proxy(this.__onAfterBackgroundImageOpacityChange,this)),slidebackgroundFocusX:t("#slidebackgroundFocusX").on("nextendChange",t.proxy(this.__onAfterBackgroundImageChange,this)),slidebackgroundFocusY:t("#slidebackgroundFocusY").on("nextendChange",t.proxy(this.__onAfterBackgroundImageChange,this)),slideBackgroundModeField:t("#slidebackgroundMode").on("nextendChange",t.proxy(this.__onAfterBackgroundImageChange,this)),backgroundImageElement:e.$currentSlideElement.find(".nextend-slide-bg"),canvas:e.$currentSlideElement.find(".n2-ss-slide-background")},this.currentBackgroundType=this.background.type.val();var i=t("#slidethumbnail");if(""==i.val()){var s=t("#item_imageimage"),n=t.proxy(function(e){""!=e&&"$system$/images/placeholder/image.png"!=e&&(i.val(e).trigger("change"),this.background.slideBackgroundImageField.off(".slidethumbnail"),s.off(".slidethumbnail"))},this);this.background.slideBackgroundImageField.on("nextendChange.slidethumbnail",t.proxy(function(){n(this.background.slideBackgroundImageField.val())},this)),s.on("nextendChange.slidethumbnail",t.proxy(function(){n(s.val())},this))}},n.prototype.__onAfterBackgroundTypeChange=function(){var t=this.background.type.val();switch(this.currentBackgroundType=t,t){case"image":this.__onAfterBackgroundImageChange();break;case"video":this.__onAfterBackgroundImageChange();break;case"color":e.$currentSlideElement.data("slideBackground").changeDesktop("","",this.background.slideBackgroundModeField.val(),this.background.slidebackgroundFocusX.val(),this.background.slidebackgroundFocusY.val()),this.__onAfterBackgroundColorChange()}},n.prototype.__onAfterBackgroundColorChange=function(){var e=this.background.slideBackgroundColorField.val(),t=this.background.slideBackgroundGradientField.val();if("off"!=t){var i=this.background.slideBackgroundColorEndField.val(),s=this.background.canvas.css({background:"",filter:""});switch(t){case"horizontal":s.css("background","#"+e.substr(0,6)).css("background","-moz-linear-gradient(left, "+N2Color.hex2rgbaCSS(e)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background"," -webkit-linear-gradient(left, "+N2Color.hex2rgbaCSS(e)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","linear-gradient(to right, "+N2Color.hex2rgbaCSS(e)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#"+e.substr(0,6)+"', endColorstr='#"+i.substr(0,6)+"',GradientType=1)");break;case"vertical":s.css("background","#"+e.substr(0,6)).css("background","-moz-linear-gradient(top, "+N2Color.hex2rgbaCSS(e)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background"," -webkit-linear-gradient(top, "+N2Color.hex2rgbaCSS(e)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","linear-gradient(to bottom, "+N2Color.hex2rgbaCSS(e)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#"+e.substr(0,6)+"', endColorstr='#"+i.substr(0,6)+"',GradientType=0)");break;case"diagonal1":s.css("background","#"+e.substr(0,6)).css("background","-moz-linear-gradient(45deg, "+N2Color.hex2rgbaCSS(e)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background"," -webkit-linear-gradient(45deg, "+N2Color.hex2rgbaCSS(e)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","linear-gradient(45deg, "+N2Color.hex2rgbaCSS(e)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#"+e.substr(0,6)+"', endColorstr='#"+i.substr(0,6)+"',GradientType=1)");break;case"diagonal2":s.css("background","#"+e.substr(0,6)).css("background","-moz-linear-gradient(-45deg, "+N2Color.hex2rgbaCSS(e)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background"," -webkit-linear-gradient(-45deg, "+N2Color.hex2rgbaCSS(e)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","linear-gradient(-45deg, "+N2Color.hex2rgbaCSS(e)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#"+e.substr(0,6)+"', endColorstr='#"+i.substr(0,6)+"',GradientType=1)")}}else"00"==e.substr(6,8)?this.background.canvas.css("background",""):this.background.canvas.css("background","#"+e.substr(0,6)).css("background",N2Color.hex2rgbaCSS(e))},n.prototype.__onAfterBackgroundImageChange=function(){e.$currentSlideElement.data("slideBackground").changeDesktop(e.generator.fill(this.background.slideBackgroundImageField.val()),"",this.background.slideBackgroundModeField.val(),this.background.slidebackgroundFocusX.val(),this.background.slidebackgroundFocusY.val()),this.__onAfterBackgroundImageOpacityChange()},n.prototype.__onAfterBackgroundImageOpacityChange=function(){e.$currentSlideElement.data("slideBackground").setOpacity(this.background.slideBackgroundImageOpacity.val()/100)},n.prototype._warnInternetExplorerUsers=function(){var e=this.__isInternetExplorer();e&&10>e&&alert(window.ss2lang.The_editor_was_tested_under_Internet_Explorer_10_Firefox_and_Chrome_Please_use_one_of_the_tested_browser)},n.prototype.__isInternetExplorer=function(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")?parseInt(e.split("msie")[1]):!1},n.prototype.getLayout=function(){for(var i=t("#smartslider-form").serializeArray(),s={},n=0;n<i.length;n++){var r=i[n].name.match(/slide\[(.*?)\]/);r&&(s[r[1]]=i[n].value)}return delete s.generator,delete s.published,delete s.publishdates,delete s["record-start"],delete s["record-slides"],delete s.slide,s.slide=e.layerManager.getData(),s},n.prototype.loadLayout=function(i,s,n){var r=i.slide;if(delete i.slide,n?e.layerManager.loadData(r,!0):e.layerManager.loadData(r,!1),s)for(var a in i)t("#slide"+a).val(i[a]).trigger("change");i.slide=r},n.prototype.createHistory=function(){this.slideValues={},n2("#smartslider-form").find('input[id][name^="slide"], textarea[id][name^="slide"]').not("#slideslide").each(t.proxy(function(i,s){var n=t(s),r=n.data("field"),a=n.attr("id");this.slideValues[a]=n.val(),n.on("nextendChange",t.proxy(function(){var i=n.val(),s=this.slideValues[a];this.slideValues[a]=i,e.history.add(t.proxy(function(){return[this,"slideValueChange",i,s,[n,r]]},this))},this))},this))},n.prototype.history=function(e,t,i){switch(e){case"slideValueChange":i[1].insideChange(t)}},i.SmartSliderAdminSlide=n}(nextend.smartSlider,n2,window),function(e,t,i,s){function n(e){this.key="n2-ss-editor-device-lock-mode",this.devices={unknownUnknown:t("<div />")},this.responsives=[e],e.setOrientation("portrait"),e.parameters.onResizeEnabled=0,e.parameters.forceFull=0,e._getDevice=e._getDeviceZoom,this.lock=t("#n2-ss-lock").on("click",t.proxy(this.switchLock,this));var i=e.parameters.sliderWidthToDevice.desktopPortrait;this.container=e.containerElement.closest(".n2-ss-container-device").addBack(),this.container.width(i),this.containerWidth=i,this.initZoom();var s=t("#n2-ss-devices .n2-tr"),n=e.parameters.deviceModes;this.devices.desktopPortrait=t('<div class="n2-td n2-panel-option" data-device="desktop" data-orientation="portrait"><i class="n2-i n2-it n2-i-v-desktop"></i></div>').prependTo(s),n.desktopLandscape?this.devices.desktopLandscape=t('<div class="n2-td n2-panel-option" data-device="desktop" data-orientation="landscape"><i class="n2-i n2-it n2-i-v-desktop-landscape"></i></div>').prependTo(s):this.devices.desktopLandscape=this.devices.desktopPortrait,n.tabletPortrait?this.devices.tabletPortrait=t('<div class="n2-td n2-panel-option" data-device="tablet" data-orientation="portrait"><i class="n2-i n2-it n2-i-v-tablet"></i></div>').prependTo(s):this.devices.tabletPortrait=this.devices.desktopPortrait,n.tabletLandscape?this.devices.tabletLandscape=t('<div class="n2-td n2-panel-option" data-device="tablet" data-orientation="landscape"><i class="n2-i n2-it n2-i-v-tablet-landscape"></i></div>').prependTo(s):this.devices.tabletLandscape=this.devices.desktopLandscape,n.mobilePortrait?this.devices.mobilePortrait=t('<div class="n2-td n2-panel-option" data-device="mobile" data-orientation="portrait"><i class="n2-i n2-it n2-i-v-mobile"></i></div>').prependTo(s):this.devices.mobilePortrait=this.devices.tabletPortrait,n.mobileLandscape?this.devices.mobileLandscape=t('<div class="n2-td n2-panel-option" data-device="mobile" data-orientation="landscape"><i class="n2-i n2-it n2-i-v-mobile-landscape"></i></div>').prependTo(s):this.devices.mobileLandscape=this.devices.tabletLandscape,this.deviceOptions=t("#n2-ss-devices .n2-panel-option"),this.deviceOptions.each(t.proxy(function(e,i){t(i).on({mousedown:t.proxy(nextend.context.setMouseDownArea,nextend.context,"zoomDeviceClicked"),click:t.proxy(this.setDeviceMode,this)})},this)),e.sliderElement.on("SliderDeviceOrientation",t.proxy(this.onDeviceOrientationChange,this))}var r=null;nextend.ssBeforeResponsive=function(){r=new n(this),nextend.ssBeforeResponsive=function(){r.add(this)}},n.prototype.add=function(e){this.responsives.push(e),e.setOrientation("portrait"),e.parameters.onResizeEnabled=0,e.parameters.forceFull=0,e._getDevice=e._getDeviceZoom},n.prototype.onDeviceOrientationChange=function(e,i){t("#n2-admin").removeClass("n2-ss-mode-"+i.lastDevice+i.lastOrientation).addClass("n2-ss-mode-"+i.device+i.orientation),this.devices[i.lastDevice+i.lastOrientation].removeClass("n2-active"),this.devices[i.device+i.orientation].addClass("n2-active")},n.prototype.setDeviceMode=function(i){var s=t(i.currentTarget);if((i.ctrlKey||i.metaKey)&&e.layerManager){var n=s.data("orientation");e.layerManager.copyOrResetMode(s.data("device")+n[0].toUpperCase()+n.substr(1))}else for(var r=0;r<this.responsives.length;r++)this.responsives[r].setOrientation(s.data("orientation")),this.responsives[r].setMode(s.data("device"),this.responsives[0])},n.prototype.switchLock=function(e){e.preventDefault(),this.lock.toggleClass("n2-active"),this.lock.hasClass("n2-active")?(this.setZoomSyncMode(),this.zoomChange(this.zoom.slider("value"),"sync",!1),t.jStorage.set(this.key,"sync")):(this.setZoomFixMode(),t.jStorage.set(this.key,"fix"))},n.prototype.initZoom=function(){var e=t("#n2-ss-slider-zoom");if(e.length>0){"undefined"!=typeof e[0].slide&&(e[0].slide=null),this.zoom=e.removeAttr("slide").slider({range:"min",step:1,value:1,min:0,max:102}),this.responsives[0].sliderElement.on("SliderResize",t.proxy(this.sliderResize,this)),"fix"==t.jStorage.get(this.key,"sync")?this.setZoomFixMode():(this.setZoomSyncMode(),this.lock.addClass("n2-active"));var i=e.parent(),s=t.proxy(function(e){var t=this.zoom.slider("value");this.zoom.slider("value",t+e)},this),n=null,r=t.proxy(function(e){s(e),n=setInterval(t.proxy(s,this,e),40)},this);i.find(".n2-i-minus").on({mousedown:t.proxy(r,this,-1),"mouseup mouseleave":function(){n&&(clearInterval(n),n=null)}}),i.find(".n2-i-plus").on({mousedown:t.proxy(r,this,1),"mouseup mouseleave":function(){n&&(clearInterval(n),n=null)}})}},n.prototype.sliderResize=function(e,t){this.setZoom()},n.prototype.setZoomFixMode=function(){this.zoom.off(".n2-ss-zoom").on({"slide.n2-ss-zoom":t.proxy(this.zoomChangeFixMode,this),"slidechange.n2-ss-zoom":t.proxy(this.zoomChangeFixMode,this)})},n.prototype.setZoomSyncMode=function(){this.zoom.off(".n2-ss-zoom").on({"slide.n2-ss-zoom":t.proxy(this.zoomChangeSyncMode,this),"slidechange.n2-ss-zoom":t.proxy(this.zoomChangeSyncMode,this)})},n.prototype.zoomChangeFixMode=function(e,t){this.zoomChange(t.value,"fix",t)},n.prototype.zoomChangeSyncMode=function(e,t){this.zoomChange(t.value,"sync",t)},n.prototype.zoomChange=function(e,t,i){var s=1;50>e?s=nextend.smallestZoom/this.containerWidth+Math.max(e/50,0)*(1-nextend.smallestZoom/this.containerWidth):e>52&&(s=1+(e-52)/50);var n=parseInt(s*this.containerWidth);this.container.width(n);for(var r=1;r<this.responsives.length;r++)this.responsives[r].containerElement.width(n);for(var r=0;r<this.responsives.length;r++)switch(t){case"sync":this.responsives[r].doResize();break;default:this.responsives[r].doResize(!0)}i&&(i.handle.innerHTML=n+"px")},n.prototype.setZoom=function(){var e=this.responsives[0].containerElement.width()/this.containerWidth,t=50;1>e?t=(e-nextend.smallestZoom/this.containerWidth)/(1-nextend.smallestZoom/this.containerWidth)*50:e>1&&(t=50*(e-1)+52);this.zoom.slider("value");this.zoom.slider("value",t)}}(nextend.smartSlider,n2,window),function(e,t){function i(t,i){this.addToGroupModal=null,this.groupID=t,this.ajaxUrl=i,e(".n2-ss-create-slider").click(e.proxy(function(e){e.preventDefault(),e.stopImmediatePropagation(),this.showModal()},this)),this.notificationStack=new NextendNotificationCenterStackModal(e("body")),e(".n2-ss-add-sample-slider").click(e.proxy(function(e){e.preventDefault(),e.stopImmediatePropagation(),this.showDemoSliders()},this)),"createslider"==window.location.hash.substring(1)&&this.showModal()}i.prototype.showModal=function(){if(!this.createSliderModal){var t=this,i=this.ajaxUrl,s=[];s.push({key:"default",name:n2_("Default"),image:"$ss$/admin/images/sliderpresets/default.png"}),s.push({key:"fullwidth",name:n2_("Full width"),image:"$ss$/admin/images/sliderpresets/fullwidth.png"}),s.push({key:"thumbnailhorizontal",name:n2_("Thumbnail - horizontal"),image:"$ss$/admin/images/sliderpresets/thumbnailhorizontal.png"}),this.createSliderModal=new NextendModal({zero:{size:[N2SSPRO?750:550,N2SSPRO?630:520],title:n2_("Create Slider"),back:!1,close:!0,content:'<form class="n2-form"></form>',controls:['<a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-green n2-uc n2-h4">'+n2_("Create")+"</a>"],fn:{show:function(){var n=this.controls.find(".n2-button-green"),r=this.content.find(".n2-form").on("submit",function(e){e.preventDefault(),n.trigger("click")});r.append(this.createInput(n2_("Slider name"),"createslidertitle","width: 240px;")),r.append(this.createInputUnit(n2_("Width"),"createsliderwidth","px","width: 30px;")),r.append(this.createInputUnit(n2_("Height"),"createsliderheight","px","width: 30px;")),new NextendElementAutocompleteSimple("createsliderwidth",["1920","1200","1000","800","600","400"]),new NextendElementAutocompleteSimple("createsliderheight",["800","600","500","400","300","200"]);var a=e("#createslidertitle").val(n2_("Slider")).focus(),o=e("#createsliderwidth").val(900),l=e("#createsliderheight").val(500);o.parent().addClass("n2-form-element-autocomplete ui-front"),l.parent().addClass("n2-form-element-autocomplete ui-front"),this.createHeading(n2_("Preset")).appendTo(this.content);var d=this.createImageRadio(s).css("height",N2SSPRO?360:100).appendTo(this.content),h=d.find("input");d.css("overflow","hidden"),this.createHeading(n2_("Import Sample Sliders")).appendTo(this.content),e('<div class="n2-ss-create-slider-free-sample" style="background-image: url(\''+nextend.imageHelper.fixed("$ss$/admin/images/free/sample1.png")+'\')"></div><div class="n2-ss-create-slider-free-sample" style="background-image: url(\''+nextend.imageHelper.fixed("$ss$/admin/images/free/sample2.png")+'\')"></div><div class="n2-ss-create-slider-free-sample" style="background-image: url(\''+nextend.imageHelper.fixed("$ss$/admin/images/free/sample3.png")+"')\"></div>").on("click",e.proxy(function(){this.hide(),t.showDemoSliders()},this)).appendTo(this.content),n.on("click",e.proxy(function(){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(i,{nextendaction:"create"}),data:{groupID:t.groupID,sliderTitle:a.val(),sliderSizeWidth:o.val(),sliderSizeHeight:l.val(),preset:h.val()},dataType:"json"}).done(e.proxy(function(e){NextendAjaxHelper.startLoading()},this))},this))}}}})}this.createSliderModal.show()},i.prototype.showDemoSliders=function(){var t=this;e("body").css("overflow","hidden");var i=0,s=e('<iframe src="//smartslider3.com/demo-import/?pro='+i+"&version="+N2SS3VERSION+"&utm_campaign="+N2SS3C+"&utm_source=import-slider-frame&utm_medium=smartslider-"+N2PLATFORM+"-"+(i?"pro":"free")+'" frameborder="0"></iframe>').css({position:"fixed",zIndex:1e5,left:0,top:0,width:"100%",height:"100%"}).appendTo("body"),n=function(){e("body").css("overflow",""),s.remove(),window.removeEventListener("message",a,!1),t.notificationStack.popStack()},r=function(e){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(t.ajaxUrl,{nextendaction:"importDemo"}),data:{groupID:t.groupID,key:Base64.encode(e.replace(/^(http(s)?:)?\/\//,"//"))},dataType:"json"}).fail(function(){})},a=function(e){if("http://smartslider3.com"===e.origin||"https://smartslider3.com"===e.origin){var t=e.data;switch(t.key){case"importSlider":return void("function"==typeof nextend.joinCommunity?nextend.joinCommunity(function(){r(t.data.href)}):r(t.data.href));case"closeWindow":n()}}};this.notificationStack.enableStack(),NextendEsc.add(e.proxy(function(){return n(),!0},this)),window.addEventListener("message",a,!1)},t.NextendSmartSliderCreateSlider=i}(n2,window),function(e,t){function i(t,i){this.preventSort=!1,this.groupID=t,this.ajaxUrl=i,this.sliders=[],this.sliderPanel=e("#n2-ss-slider-container"),this.orderBy="ordering"==this.sliderPanel.data("orderby"),this.slidersContainer=this.sliderPanel.find(".n2-ss-sliders-container");for(var s=this.slidersContainer.find(".n2-ss-box-slider"),n=0;n<s.length;n++)this.sliders.push(new NextendSmartSliderAdminSlider(this,s.eq(n)));this.changed(),this.initMenu(),this.initOrderable(),this.create=new NextendSmartSliderCreateSlider(t,i),this.initBulk()}i.prototype.changed=function(){e("html").attr("data-sliders",this.sliders.length)},i.prototype.initSliders=function(){for(var t=(this.sliders.length,this.slidersContainer.find(".n2-ss-box-slider")),i=[],s=0;s<t.length;s++){var n=t.eq(s).data("slider");i.push(n)}this.sliders=i,this.changed(),e(window).triggerHandler("SmartSliderSidebarSlidersChanged")},i.prototype.initOrderable=function(){this.orderBy&&this.slidersContainer.sortable({helper:"clone",forcePlaceholderSize:!1,tolerance:"pointer",connectWith:".n2-ss-box-slider-group",items:".n2-ss-box-slider",start:function(e,t){t.item.show()},stop:e.proxy(this.saveOrder,this),placeholder:"n2-box-sortable-placeholder",distance:10})},i.prototype.saveOrder=function(t){if(this.preventSort)return this.slidersContainer.sortable("cancel"),void(this.preventSort=!1);for(var i=this.slidersContainer.find(".n2-ss-box-slider"),s=[],n=[],r=[],a=0;a<i.length;a++){var o=i.eq(a).data("slider");s.push(o),n.push(o.getId())}for(var a=0;a<this.sliders.length;a++)r.push(this.sliders[a].getId());if(JSON.stringify(r)!=JSON.stringify(n)){e(window).triggerHandler("SmartSliderSidebarSlidersOrderChanged");var l={nextendcontroller:"sliders",nextendaction:"order"};NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,l),data:{groupID:this.groupID,sliderorder:n,isReversed:"DESC"==this.sliderPanel.data("orderbydirection")?1:0}}),this.sliders=s}},i.prototype.initMenu=function(){this.slider=null,this.menu=e("#n2-ss-slider-menu").detach().addClass("n2-inited"),this.menuActions={addToGroup:this.menu.find(".n2-ss-add-to-group").on("click",e.proxy(function(e){e.stopPropagation(),e.preventDefault(),this.addToGroup([this.slider.getId()])},this)),removeFromGroup:this.menu.find(".n2-ss-remove-from-group").on("click",e.proxy(function(e){e.stopPropagation(),e.preventDefault(),this.removeFromGroup([this.slider.getId()])},this)),duplicate:this.menu.find(".n2-ss-duplicate").on("click",e.proxy(function(e){this.slider.duplicate(e)},this)),"delete":this.menu.find(".n2-ss-delete").on("click",e.proxy(function(e){this.slider["delete"](e)},this)),preview:this.menu.find(".n2-ss-preview").on("click",e.proxy(function(e){this.slider.preview(e)},this))},this.menu.find(".n2-button").on("click",e.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.menu.hasClass("n2-active")?this.menu.removeClass("n2-active").off("mouseleave"):this.menu.addClass("n2-active").on("mouseleave",function(){e(this).removeClass("n2-active")})},this))},i.prototype.showMenu=function(e){this.slider=e,this.menu.appendTo(e.box)},i.prototype.hideMenu=function(){this.menu.hasClass("n2-active")&&this.menu.removeClass("n2-active").off("mouseleave"),this.menu.detach()},i.prototype.deleteSliders=function(t,i){this.hideMenu();var s=i[0].box.find(".n2-box-placeholder-title a").text();i.length>1&&(s+=" and "+(i.length-1)+" more"),NextendDeleteModal("slider-delete",s,e.proxy(function(){NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendcontroller:"sliders",nextendaction:"delete"}),type:"POST",data:{sliders:t}}).done(e.proxy(function(){for(var e=0;e<i.length;e++)i[e].deleted();this.initSliders(),this.leaveBulk()},this))},this))},i.prototype.duplicateSliders=function(t,i){for(var s=0;s<this.sliders.length;s++)this.sliders[s].selected&&this.sliders[s].duplicate(e.Event("click",{currentTarget:null}))},i.prototype.exportSliders=function(t,i){
window.location.href=NextendAjaxHelper.makeFallbackUrl(this.ajaxUrl,{nextendcontroller:"sliders",nextendaction:"exportAll"})+"&"+e.param({sliders:t,currentGroupID:this.groupID})},i.prototype.initBulk=function(){this.selection=[],this.isBulkSelection=!1;var t=e(".n2-bulk-select").find("a");t.eq(0).on("click",e.proxy(function(e){e.preventDefault(),this.bulkSelect(function(e){e.select()})},this)),t.eq(1).on("click",e.proxy(function(e){e.preventDefault(),this.bulkSelect(function(e){e.deSelect()})},this));e(".n2-bulk-actions").find("a").on("click",e.proxy(function(t){switch(t.preventDefault(),e(t.currentTarget).data("action")){case"duplicate":this.bulkAction("duplicateSliders",!1);break;case"delete":this.bulkAction("deleteSliders",!1);break;case"export":this.bulkAction("exportSliders",!1);break;case"addToGroup":this.bulkAction("addToGroup",!0)}},this))},i.prototype.addSelection=function(e){0==this.selection.length&&this.enterBulk(),this.selection.push(e)},i.prototype.removeSelection=function(t){this.selection.splice(e.inArray(t,this.selection),1),0==this.selection.length&&this.leaveBulk()},i.prototype.bulkSelect=function(e){for(var t=0;t<this.sliders.length;t++)e(this.sliders[t])},i.prototype.bulkAction=function(e,t){var i=[],s=[];this.bulkSelect(function(e){!e.selected||t&&e.isGroup||(i.push(e),s.push(e.getId()))}),s.length?(this[e](s,i),this.leaveBulk()):t?nextend.notificationCenter.notice("Please select one or more sliders for the action!"):nextend.notificationCenter.notice("Please select one or more sliders or groups for the action!")},i.prototype.enterBulk=function(){this.isBulkSelection||(this.isBulkSelection=!0,this.orderBy&&this.slidersContainer.sortable("option","disabled",!0),e("#n2-admin").addClass("n2-ss-has-box-selection"))},i.prototype.leaveBulk=function(){if(this.isBulkSelection){this.orderBy&&this.slidersContainer.sortable("option","disabled",!1),e("#n2-admin").removeClass("n2-ss-has-box-selection");for(var t=0;t<this.sliders.length;t++)this.sliders[t].deSelect();this.selection=[],this.isBulkSelection=!1}},i.prototype.removeFromGroup=function(t){return NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"removeFromGroup"}),data:{currentGroupID:this.groupID,sliders:t},dataType:"json"}).done(e.proxy(function(i){for(var s=0;s<t.length;s++)e('[data-sliderid="'+t[s]+'"]').data("slider").deleted();this.initSliders()},this))},i.prototype._addToGroup=function(t,i,s){return NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"addToGroup"}),data:{currentGroupID:this.groupID,groupID:i,action:t,sliders:s},dataType:"json"}).done(e.proxy(function(n){if("move"==t){for(var r=0;r<s.length;r++)e('[data-sliderid="'+s[r]+'"]').data("slider").deleted();this.initSliders()}var a=e('[data-sliderid="'+i+'"] .n2-box-placeholder-buttons .n2-button-grey');a.html(parseInt(a.html())+s.length)},this))},i.prototype.addToGroup=function(t){var i=null,s=this,n=(this.ajaxUrl,new NextendModal({zero:{size:[350,220],title:n2_("Add to group"),back:!1,close:!0,content:'<form class="n2-form"></form>',controls:['<div class="n2-button n2-button-with-actions n2-button-l n2-button-green n2-radius-s n2-h4"><a class="n2-button-inner" href="#" data-action="move">'+n2_("Move")+'</a><div class="n2-button-menu-open"><i class="n2-i n2-i-buttonarrow"></i><div class="n2-button-menu"><div class="n2-button-menu-inner n2-border-radius"><a class="n2-h4" href="#" data-action="copy">'+n2_("Copy")+'</a><a class="n2-h4" href="#" data-action="link">'+n2_("Link")+"</a></div></div></div></div>"],fn:{show:function(){this.controls.find(".n2-button-menu-open").n2opener();var n=this.controls.find("a"),r=this.content.find(".n2-form").on("submit",function(e){e.preventDefault(),n.eq(0).trigger("click")});r.append(this.createSelect(n2_("Group"),"choosegroup",i,"width:300px;"));var a=e("#choosegroup");n.on("click",e.proxy(function(i){i.preventDefault(),s._addToGroup(e(i.currentTarget).data("action"),a.val(),t).done(e.proxy(function(){this.hide(i)},this))},this))}}}}));NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendcontroller:"sliders",nextendaction:"listGroups"}),dataType:"json"}).done(e.proxy(function(t){i=t.data,"undefined"!=typeof i[this.groupID]&&delete i[this.groupID],e.isEmptyObject(i)?(e("body").on({"groupAdded.addToGroup":e.proxy(function(){e("body").off(".addToGroup"),NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendcontroller:"sliders",nextendaction:"listGroups"}),dataType:"json"}).done(e.proxy(function(e){i=e.data,"undefined"!=typeof i[this.groupID]&&delete i[this.groupID],n.show()},this))},this),"groupAddCanceled.addToGroup":e.proxy(function(){e("body").off(".addToGroup")},this)}),this.createGroup.showModal()):n.show()},this))},t.NextendSmartSliderManageSliders=i}(n2,window),function(e,t){function i(t,i){this.selected=!1,this.manager=t,this.box=i.data("slider",this).addClass("n2-clickable"),this.isGroup=this.box.hasClass("n2-ss-box-slider-group"),this.box.on("mouseenter",e.proxy(function(){this.manager.showMenu(this)},this)).on("mouseleave",e.proxy(function(){this.manager.hideMenu()},this)).on("click.n2-slider",e.proxy(this.goToEdit,this)),this.box.find(".n2-ss-box-select").on("click",e.proxy(function(e){e.stopPropagation(),e.preventDefault(),this.invertSelection()},this))}i.prototype.getId=function(){return this.box.data("sliderid")},i.prototype.goToEdit=function(e,t){var i=this.box.data("editurl");"undefined"!=typeof t&&t?window.open(i,"_blank"):window.location=i},i.prototype.preview=function(e){e.stopPropagation(),e.preventDefault(),window.open(NextendAjaxHelper.makeFallbackUrl(this.box.data("editurl"),{nextendcontroller:"preview",nextendaction:"index"}),"_blank")},i.prototype.duplicate=function(t){t.stopPropagation(),t.preventDefault();var s=e.Deferred();return NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.box.data("editurl"),{nextendcontroller:"slider",nextendaction:"duplicate"})}).done(e.proxy(function(t){var n=e(t.data).insertAfter(this.box),r=new i(this.manager,n);this.manager.initSliders(),s.resolve(r)},this)),s},i.prototype["delete"]=function(e){e.stopPropagation(),e.preventDefault(),this.manager.deleteSliders([this.getId()],[this])},i.prototype.deleted=function(){this.box.remove()},i.prototype.invertSelection=function(e){e&&e.preventDefault(),this.selected?this.deSelect():this.select()},i.prototype.select=function(){this.selected||(this.selected=!0,this.box.addClass("n2-selected"),this.manager.addSelection(this))},i.prototype.deSelect=function(){this.selected&&(this.selected=!1,this.box.removeClass("n2-selected"),this.manager.removeSelection(this))},t.NextendSmartSliderAdminSlider=i}(n2,window),function(e,t){function i(t,i){this.element=e("#"+t),this.managerIdentifier=i,this.element.parent().on("click",e.proxy(this.show,this)),this.element.siblings(".n2-form-element-clear").on("click",e.proxy(this.clear,this)),this.name=this.element.siblings("input"),this.updateName(this.element.val()),NextendElement.prototype.constructor.apply(this,arguments)}function s(){i.prototype.constructor.apply(this,arguments)}i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.show=function(t){t.preventDefault(),nextend[this.managerIdentifier].show(this.element.val(),e.proxy(this.save,this))},i.prototype.clear=function(e){e.preventDefault(),e.stopPropagation(),this.val("")},i.prototype.save=function(e,t){this.val(t)},i.prototype.val=function(e){this.element.val(e),this.updateName(e),this.triggerOutsideChange()},i.prototype.insideChange=function(e){this.element.val(e),this.updateName(e),this.triggerInsideChange()},i.prototype.updateName=function(e){e=""==e?n2_("Disabled"):e.split("||").length>1?n2_("Multiple animations"):n2_("Single animation"),this.name.val(e)},t.NextendElementAnimationManager=i,s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.prototype.clear=function(e){e.preventDefault(),e.stopPropagation();var t=this.element.val().split("|*|");t[2]="",this.val(t.join("|*|"))},s.prototype.updateName=function(e){var t=e.split("|*|");e=t[2],e=""==e?n2_("Disabled"):e.split("||").length>1?n2_("Multiple animations"):n2_("Single animation"),this.name.val(e)},t.NextendElementPostAnimationManager=s}(n2,window),function(e,t){function i(t,i){this.value="",this.element=e("#"+t),this.$container=this.element.closest(".n2-form-tab"),this.panel=e("#"+t+"-panel"),this.setValue(i),this.options=this.panel.find(".n2-subform-image-option").on("click",e.proxy(this.selectOption,this)),this.active=this.getIndex(this.options.filter(".n2-active").get(0)),NextendElement.prototype.constructor.apply(this,arguments)}i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.selectOption=function(t){var i=this.getIndex(t.currentTarget);if(i!=this.active){this.options.eq(i).addClass("n2-active"),this.options.eq(this.active).removeClass("n2-active"),this.active=i;var s=e(t.currentTarget).data("value");this.insideChange(s),this.setValue(s)}},i.prototype.setValue=function(e){this.$container.removeClass("n2-ss-background-type-"+this.value),this.value=e,this.$container.addClass("n2-ss-background-type-"+this.value)},i.prototype.insideChange=function(e){this.element.val(e),this.triggerInsideChange()},i.prototype.getIndex=function(t){return e.inArray(t,this.options)},t.NextendElementBackground=i}(n2,window),function(e,t){function i(t){this.status=0,this.element=e("#"+t),this.$container=e(".n2-ss-parent-picker"),this.overlays=null,this.aligns=this.element.parent().parent().siblings(),this.picker=this.element.siblings(".n2-ss-layer-picker").on({click:e.proxy(function(){this.change("")},this)}),NextendElement.prototype.constructor.apply(this,arguments)}var s={INITIALIZED:0,PICK_PARENT:1,PICK_CHILD:2,PICK_PARENT_ALIGN:3,PICK_CHILD_ALIGN:4},n='<div class="n2-ss-picker-overlay-tile" data-align="left" data-valign="top" /><div class="n2-ss-picker-overlay-tile" data-align="center" data-valign="top" style="left:33%;top:0;" /><div class="n2-ss-picker-overlay-tile" data-align="right" data-valign="top" style="left:66%;top:0;width:34%;" /><div class="n2-ss-picker-overlay-tile" data-align="left" data-valign="middle" style="left:0;top:33%;" /><div class="n2-ss-picker-overlay-tile" data-align="center" data-valign="middle" style="left:33%;top:33%; " /><div class="n2-ss-picker-overlay-tile" data-align="right" data-valign="middle" style="left:66%;top:33%;width:34%;" /><div class="n2-ss-picker-overlay-tile" data-align="left" data-valign="bottom" style="left:0;top:66%;height:34%;" /><div class="n2-ss-picker-overlay-tile" data-align="center" data-valign="bottom" style="left:33%;top:66%;height:34%;" /><div class="n2-ss-picker-overlay-tile" data-align="right" data-valign="bottom" style="left:66%;top:66%;width:34%;height:34%;" />';i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.click=function(t){return e("#n2-admin").hasClass("n2-ss-mode-desktopPortrait")?void(this.status==s.INITIALIZED?(this.data={parent:null,parentVAlign:null,parentHAlign:null,child:null,childVAlign:null,childHAlign:null},e("body").on("mousedown.n2-ss-parent-linker",e.proxy(function(t){var i=e(t.target);i.parent();i.hasClass("n2-ss-picker-overlay")||i.hasClass("n2-ss-picker-overlay-tile")||this.destroy()},this)),NextendEsc.add(e.proxy(function(){return this.destroy(),!1},this)),this.pickParent(t)):(this.data=null,this.change(""),this.destroy())):void nextend.notificationCenter.notice("To chain layers together, please switch to desktop portrait mode!")},i.prototype.pickParent=function(t){var i=nextend.smartSlider.layerManager,n=e(i.mainLayerGroup.getChildLayersRecursive(!0));if(0==n.length)this.destroy();else{this.status=s.PICK_PARENT,nextend.tooltipMouse.show("Pick the parent layer!",t);e('<div class="n2-ss-picker-overlay"></div>').appendTo(n).on("click",e.proxy(function(t){t.preventDefault(),t.stopPropagation();var i=e(t.currentTarget).parent();i.data("layerObject");this.data.parent=i,this._destroy(),this.pickParentAlign(t)},this))}},i.prototype.pickParentAlign=function(t){this.status=s.PICK_PARENT_ALIGN,nextend.tooltipMouse.show("Pick the align point of the parent layer!",t);var i=e(n).appendTo(this.data.parent).on("click",e.proxy(function(t){t.preventDefault(),t.stopPropagation();var s=e(t.currentTarget);this.data.parentHAlign=s.data("align"),this.data.parentVAlign=s.data("valign"),s.off("click").addClass("n2-active"),i.not(s).remove(),this.pickChild(t)},this))},i.prototype.pickChild=function(t){this.status=s.PICK_CHILD,nextend.tooltipMouse.show("Pick the child layer!",t);var i=nextend.smartSlider.layerManager,n=e(i.mainLayerGroup.getChildLayersRecursive(!0)).not(this.data.parent),r=function(t){var i=t.data("layerObject").getProperty(!1,"parentid");i&&""!=i&&r(e("#"+i)),n=n.not(t)};if(r(this.data.parent),!n.length)return nextend.notificationCenter.error("There is no possible child layer for the selected parent layer!"),void this.destroy();var a=e('<div class="n2-ss-picker-overlay"></div>').appendTo(n).on("click",e.proxy(function(t){t.preventDefault(),t.stopPropagation();var i=e(t.currentTarget).parent();i.data("layerObject");this.data.child=i,a.remove(),this.pickChildAlign(t)},this))},i.prototype.pickChildAlign=function(t){this.status=s.PICK_CHILD_ALIGN,nextend.tooltipMouse.show("Pick the align point of the child layer!",t);e(n).appendTo(this.data.child).on("click",e.proxy(function(t){t.preventDefault(),t.stopPropagation();var i=e(t.currentTarget);this.data.childHAlign=i.data("align"),this.data.childVAlign=i.data("valign"),this.done()},this))},i.prototype._destroy=function(){e(".n2-ss-picker-overlay").remove(),e(".n2-ss-picker-overlay-tile").remove()},i.prototype.destroy=function(){nextend.tooltipMouse.hide(),this._destroy(),e("body").off(".n2-ss-parent-linker"),NextendEsc.pop(),this.status=s.INITIALIZED},i.prototype.done=function(){this.data.child.data("layerObject").parentPicked(this.data.parent.data("layerObject"),this.data.parentHAlign,this.data.parentVAlign,this.data.childHAlign,this.data.childVAlign),this.destroy()},i.prototype.change=function(e){this.element.val(e).trigger("change"),this._setValue(e),this.triggerOutsideChange()},i.prototype.insideChange=function(e){this.element.val(e),this._setValue(e),this.triggerInsideChange()},i.prototype._setValue=function(e){e&&""!=e?this.$container.css("display",""):this.$container.css("display","none")},t.NextendElementLayerPicker=i}(n2,window),function(e,t){function i(t){this.element=e("#"+t),this.setAttribute(),this.element.on("nextendChange",e.proxy(this.setAttribute,this))}i.prototype.setAttribute=function(){e("#n2-admin").attr("data-slider-type",this.element.val()),"block"==this.element.val()&&e(".n2-fm-shadow").trigger("click")},t.NextendElementSliderType=i}(n2,window),function(e,t){function i(t){this.element=e("#"+t),this.area=e("#"+t+"_area"),this.areas=this.area.find(".n2-area"),this.areas.on("click",e.proxy(this.chooseArea,this)),NextendElement.prototype.constructor.apply(this,arguments)}i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.chooseArea=function(t){var i=parseInt(e(t.target).data("area"));this.element.val(i),this.setSelected(i),this.triggerOutsideChange()},i.prototype.insideChange=function(e){e=parseInt(e),this.element.val(e),this.setSelected(e),this.triggerInsideChange()},i.prototype.setSelected=function(e){this.areas.removeClass("n2-active"),this.areas.eq(e-1).addClass("n2-active")},t.NextendElementSliderWidgetArea=i}(n2,window),function(e,t){function i(t){this.element=e("#"+t+"-mode"),this.container=this.element.closest(".n2-form-element-mixed"),this.tabs=this.container.find("> .n2-mixed-group"),this.element.on("nextendChange",e.proxy(this.onChange,this)),this.onChange()}i.prototype.onChange=function(){var e=this.element.val();"advanced"==e?(this.tabs.eq(2).css("display",""),this.tabs.eq(1).css("display","none")):(this.tabs.eq(1).css("display",""),this.tabs.eq(2).css("display","none"))},t.NextendElementWidgetPosition=i}(n2,window),function(e,t,i,s){"use strict";function n(){this._refreshTimeout=null,this.modal=!1,this.group=0,e.generator=this;var i=e.$currentSlideElement.data("variables");if(i){this.variables=i;for(var s in this.variables)!isNaN(parseFloat(s))&&isFinite(s)&&(this.group=Math.max(this.group,parseInt(s)+1));this.fill=this.generatorFill,this.group>0&&(this.registerField=this.generatorRegisterField,this.button=t('<a href="#" class="n2-button n2-button-normal n2-button-xs n2-radius-s n2-button-blue n2-h5 n2-uc" style="position:absolute;right: -2px;top: -18px;">Variable</a>').on("click",t.proxy(function(e){e.preventDefault(),this.showModal()},this)),this.registerField(t("#slidetitle")),this.registerField(t("#slidedescription")),this.registerField(t("#slidethumbnail")),this.registerField(t("#slidebackgroundImage")),this.registerField(t("#slidebackgroundAlt")),this.registerField(t("#slidebackgroundTitle")),this.registerField(t("#slidebackgroundVideoMp4")),this.registerField(t("#slidebackgroundVideoWebm")),this.registerField(t("#slidebackgroundVideoOgg")),this.registerField(t("#linkslidelink_0")),this.registerField(t("#layergenerator-visible")),this.registerField(t("#layergroup-generator-visible")),t("body").addClass("n2-ss-dynamic-slide")),this.initSlideDataRefresh()}else this.variables=null}n.prototype.isDynamicSlide=function(){return this.group>0},n.prototype.splitTokens=function(e){for(var t=[],i="",s=0,n=0;n<e.length;n++){var r=e[n];","===r&&0===s?(t.push(i),i=""):(i+=r,"("===r?s++:")"===r&&s--)}return i.length&&t.push(i),t},n.prototype.fill=function(e){return e},n.prototype.generatorFill=function(e){return e.replace(/{((([a-z]+)\(([^}]+)\))|([a-zA-Z0-9][a-zA-Z0-9_\/]*))}/g,t.proxy(this.parseFunction,this))},n.prototype.parseFunction=function(e,t,i,s,n,r){if("undefined"==typeof r){for(var a=this.splitTokens(n),o=0;o<a.length;o++)a[o]=this.parseVariable(a[o]);return this[s].apply(this,a)}return this.parseVariable(r)},n.prototype.parseVariable=function(e){var t=e.match(/^("|')(.*)("|')$/);if(t)return t[2];var i=e.match(/((([a-z]+)\(([^}]+)\)))/);if(i)return this.parseFunction.apply(this,i);var s=e.match(/([a-zA-Z][0-9a-zA-Z_]*)(\/([0-9a-z]+))?/);if(s){var n=s[3];if("undefined"==typeof n)n=0;else{var r=parseInt(n);isNaN(r)||(n=Math.max(n,1)-1)}return"undefined"!=typeof this.variables[n]&&"undefined"!=typeof this.variables[n][s[1]]?this.variables[n][s[1]]:""}return e},n.prototype.fallback=function(e,t){return""==e?t:e},n.prototype.cleanhtml=function(e){return strip_tags(e,"<p><a><b><br /><br/><i>")},n.prototype.removehtml=function(e){return t("<div>"+e+"</div>").text()},n.prototype.splitbychars=function(e,t,i){return e.substr(t,i)},n.prototype.splitbywords=function(e,t,i){var s=e,n=s.length,r=Math.max(0,0==t?0:s.indexOf(" ",t)),a=Math.max(0,i>n?n:s.indexOf(" ",i));return 0==a&&n>=i&&(a=n),s.substr(r,a)},n.prototype.findimage=function(e,t){var i=e,s=/(<img.*?src=[\'"](.*?)[\'"][^>]*>)|(background(-image)??\s*?:.*?url\((["|\']?)?(.+?)(["|\']?)?\))/gi,n=[],r=null;for(t="undefined"!=typeof t?parseInt(t)-1:0;r=s.exec(i);)"undefined"!=typeof r[2]?n.push(r[2]):"undefined"!=typeof r[6]&&n.push(r[6]);return n.length?n.length>t?n[t]:n[n.length-1]:""},n.prototype.findlink=function(e,t){var i=e,s=/href=["\']?([^"\'>]+)["\']?/gi,n=[],r=null;for(t="undefined"!=typeof t?parseInt(t)-1:0;r=s.exec(i);)"undefined"!=typeof r[1]&&n.push(r[1]);return n.length?n.length>t?n[t]:n[n.length-1]:""},n.prototype.removevarlink=function(e){var t=String(e),i=/<a href=\"(.*?)\">(.*?)<\/a>/g;return t.replace(i,"")},n.prototype.registerField=function(e){},n.prototype.generatorRegisterField=function(e){var i=e.parent();i.on({mouseenter:t.proxy(function(){this.activeField=e,this.button.prependTo(i)},this)})},n.prototype.getModal=function(){var e=this;if(!this.modal){var i={key:"",group:1,filter:"no",split:"no",splitStart:0,splitLength:300,findImage:0,findImageIndex:1,findLink:0,findLinkIndex:1,removeVarLink:0},s=function(){var e=i.key+"/"+i.group;return i.findImage&&(e="findimage("+e+","+Math.max(1,i.findImageIndex)+")"),i.findLink&&(e="findlink("+e+","+Math.max(1,i.findLinkIndex)+")"),i.removeVarLink&&(e="removevarlink("+e+")"),"no"!=i.filter&&(e=i.filter+"("+e+")"),"no"!=i.split&&i.splitStart>=0&&i.splitLength>0&&(e=i.split+"("+e+","+i.splitStart+","+i.splitLength+")"),"{"+e+"}"},n=t('<div class="n2-generator-result-container" />'),r=function(){n.html(t("<div/>").text(e.fill(s())).html())},a=e.group,o=null,l=null,d=t('<div class="n2-generator-insert-variable"/>'),h=NextendModal.prototype.createHeading(n2_("Choose the group")).appendTo(d),p=t('<div class="n2-group-container" />').appendTo(d);d.append(NextendModal.prototype.createHeading(n2_("Choose the variable")));var c=t('<div class="n2-variable-container" />').appendTo(d),u=t('<div class="n2-generator-functions-container n2-form-element-mixed" />').appendTo(t('<div class="n2-form" />').appendTo(d));d.append(NextendModal.prototype.createHeading(n2_("Result"))),n.appendTo(d),t('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Filter")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-list"><select autocomplete="off" name="filter" id="n2-generator-function-filter"><option selected="selected" value="no">'+n2_("No")+'</option><option value="cleanhtml">'+n2_("Clean HTML")+'</option><option value="removehtml">'+n2_("Remove HTML")+"</option></select></div></div></div>").appendTo(u);var y=u.find("#n2-generator-function-filter");y.on("change",t.proxy(function(){i.filter=y.val(),r()},this)),t('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Split by chars")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-list"><select autocomplete="off" name="split" id="n2-generator-function-split"><option selected="selected" value="no">'+n2_("No")+'</option><option value="splitbychars">'+n2_("Strict")+'</option><option value="splitbywords">'+n2_("Respect words")+'</option></select></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Start")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="0" id="n2-generator-function-split-start"></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Length")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="300" id="n2-generator-function-split-length"></div></div></div>').appendTo(u);var f=u.find("#n2-generator-function-split");f.on("change",t.proxy(function(){i.split=f.val(),r()},this));var g=u.find("#n2-generator-function-split-start");g.on("change",t.proxy(function(){i.splitStart=parseInt(g.val()),r()},this));var m=u.find("#n2-generator-function-split-length");m.on("change",t.proxy(function(){i.splitLength=parseInt(m.val()),r()},this)),t('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Find image")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-onoff"><div class="n2-onoff-slider"><div class="n2-onoff-no"><i class="n2-i n2-i-close"></i></div><div class="n2-onoff-round"></div><div class="n2-onoff-yes"><i class="n2-i n2-i-tick"></i></div></div><input type="hidden" autocomplete="off" value="0" id="n2-generator-function-findimage"></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Index")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="1" id="n2-generator-function-findimage-index"></div></div></div>').appendTo(u);var v=u.find("#n2-generator-function-findimage");v.on("nextendChange",t.proxy(function(){i.findImage=parseInt(v.val()),r()},this));var x=u.find("#n2-generator-function-findimage-index");x.on("change",t.proxy(function(){i.findImageIndex=parseInt(x.val()),r()},this)),t('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Find link")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-onoff"><div class="n2-onoff-slider"><div class="n2-onoff-no"><i class="n2-i n2-i-close"></i></div><div class="n2-onoff-round"></div><div class="n2-onoff-yes"><i class="n2-i n2-i-tick"></i></div></div><input type="hidden" autocomplete="off" value="0" id="n2-generator-function-findlink"></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Index")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="1" id="n2-generator-function-findlink-index"></div></div></div>').appendTo(u);var b=u.find("#n2-generator-function-findlink");b.on("nextendChange",t.proxy(function(){i.findLink=parseInt(b.val()),r()},this));var S=u.find("#n2-generator-function-findlink-index");S.on("change",t.proxy(function(){i.findLinkIndex=parseInt(S.val()),r()},this)),t('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Remove links")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-onoff"><div class="n2-onoff-slider"><div class="n2-onoff-no"><i class="n2-i n2-i-close"></i></div><div class="n2-onoff-round"></div><div class="n2-onoff-yes"><i class="n2-i n2-i-tick"></i></div></div><input type="hidden" autocomplete="off" value="0" id="n2-generator-function-removevarlink"></div></div></div>').appendTo(u);var k=u.find("#n2-generator-function-removevarlink");k.on("nextendChange",t.proxy(function(){i.removeVarLink=parseInt(k.val()),r()},this));var w=u.find("#n2-generator-function-removevarlink-index");w.on("change",t.proxy(function(){i.removeVarLinkIndex=parseInt(w.val()),r()},this));for(var L in this.variables[0])t('<a href="#" class="n2-button n2-button-normal n2-button-s n2-button-grey n2-radius-s">'+L+"</a>").on("click",t.proxy(function(e,s){s.preventDefault(),o.removeClass("n2-active"),t(s.currentTarget).addClass("n2-active"),i.key=e,r()},this,L)).appendTo(c);o=c.find("a"),o.eq(0).trigger("click"),1==a&&(h.css("display","none"),p.css("display","none"));for(var C=0;a>C;C++)t('<a href="#" class="n2-button n2-button-normal n2-button-s n2-button-grey n2-radius-s">'+(C+1)+"</a>").on("click",t.proxy(function(e,s){s.preventDefault(),l.removeClass("n2-active"),t(s.currentTarget).addClass("n2-active"),i.group=e+1,r()},this,C)).appendTo(p);l=p.find("a"),l.eq(0).trigger("click");var I=!1;this.modal=new NextendModal({zero:{size:[1e3,a>1?560:490],title:n2_("Insert variable"),back:!1,close:!0,content:d,controls:['<a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-green">'+n2_("Insert")+"</a>"],fn:{show:function(){I||(new NextendElementOnoff("n2-generator-function-findimage"),new NextendElementOnoff("n2-generator-function-findlink"),new NextendElementOnoff("n2-generator-function-removevarlink"),I=!0),this.controls.find(".n2-button").on("click",t.proxy(function(t){t.preventDefault(),e.insert(s()),this.hide(t)},this))}}}},!1),this.modal.setCustomClass("n2-ss-generator-modal")}return this.modal},n.prototype.showModal=function(){this.getModal().show()},n.prototype.insert=function(e){this.activeField.val(e).trigger("change")},n.prototype.initSlideDataRefresh=function(){var e=t("#slidetitle").on("nextendChange",t.proxy(function(){this.variables.slide.name=e.val(),this.refresh()},this)),i=t("#slidedescription").on("nextendChange",t.proxy(function(){this.variables.slide.description=i.val(),this.refresh()},this))},n.prototype.refresh=function(){this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null),this._refreshTimeout=setTimeout(t.proxy(this._refresh,this),100)},n.prototype._refresh=function(){for(var t=e.layerManager.layerList,i=0;i<t.length;i++)for(var s=t[i].items,n=0;n<s.length;n++)s[n].reRender()},i.SmartSliderAdminGenerator=n}(nextend.smartSlider,n2,window),function(e,t,i){function s(t){this.ajaxUrl=t,e("#generatorrecord-viewer").on("click",e.proxy(this.showRecords,this))}s.prototype.showRecords=function(t){t.preventDefault(),NextendAjaxHelper.ajax({type:"POST",url:this.ajaxUrl,data:e("#smartslider-form").serialize(),dataType:"json"}).done(function(e){var t=new NextendModal({zero:{size:[1300,700],title:"Records",content:e.data.html}},!0);t.content.css("overflow","auto")}).error(function(e){if(200==e.status){var t=new NextendModal({zero:{size:[1300,700],title:"Response",content:e.responseText}},!0);t.content.css("overflow","auto")}})},t.NextendSmartSliderGeneratorRecords=s}(n2,window),function(e,t,i,s){function n(e,n,r,a){this.item=e,this.layer=n,this.itemEditor=r,this.type=this.item.data("item"),this.values=this.item.data("itemvalues"),"object"!=typeof this.values&&(this.values=t.parseJSON(this.values)),i["NextendSmartSliderItemParser_"+this.type]!==s?this.parser=new i["NextendSmartSliderItemParser_"+this.type](this,r.getItemType(this.type)):this.parser=new i.NextendSmartSliderItemParser(this),this.item.data("item",this),"undefined"!=typeof a&&(0==this.layer.items.length||this.layer.items.length<=a?this.item.appendTo(this.layer.layer):this.layer.items[a].item.before(this.item)),"undefined"==typeof a||0==this.layer.items.length||this.layer.items.length<=a?this.layer.items.push(this):this.layer.items.splice(a,0,this),0===this.item.children().length&&this.reRender(),t("<div/>").addClass("ui-helper ui-item-overlay").css("zIndex",89).appendTo(this.item),t(window).trigger("ItemCreated")}n.prototype.changeValue=function(e,i){this==this.itemEditor.activeItem?t("#item_"+this.type+e).data("field").insideChange(i):this.values[e]=i},n.prototype.activate=function(e,t,i){this.itemEditor.setActiveItem(this,t,i)&&this.parser.activate()},n.prototype.deActivate=function(){this.parser.deActivate()},n.prototype.render=function(e,i,s){this.layer.layer.triggerHandler("itemRender"),this.item.html(this.parser.render(e,i)),this.values=s,t("<div/>").addClass("ui-helper ui-item-overlay").css("zIndex",89).appendTo(this.item);var n=this.parser.getName(i);n=n===!1?this.type:n.replace(/[<>]/gi,""),this.layer.rename(n,!1),this.layer.update()},n.prototype.reRender=function(e){var i={},s=this.itemEditor,n=s.getItemType(this.type),r=n.template;for(var a in this.values)i[a]=this.values[a];i=t.extend({},this.parser.getDefault(),i,e);var o=t.extend({},i);this.parser.parseAll(i,this),this.values=o;for(var l in i){var d=new RegExp("\\{"+l+"\\}","g");r=r.replace(d,i[l])}this.render(t(r),i,this.values)},n.prototype.duplicate=function(){this.layer.addItem(this.getHTML(),!0)},n.prototype["delete"]=function(){this.item.trigger("mouseleave"),this.item.remove(),this.itemEditor.activeItem==this&&(this.itemEditor.activeItem=null)},n.prototype.getHTML=function(e){var i="";return i=e?"["+this.type+' values="'+Base64.encode(JSON.stringify(this.values))+'"]':t('<div class="n2-ss-item n2-ss-item-'+this.type+'"></div>').attr("data-item",this.type).attr("data-itemvalues",JSON.stringify(this.values))},n.prototype.getData=function(){return{type:this.type,values:this.values}},n.prototype.history=function(e,i,s){switch(e){case"updateCurrentItem":this.reRender(t.extend(!0,{},i)),this.values=i,this.itemEditor.setActiveItem(this,null,!0)}},i.NextendSmartSliderItem=n}(nextend.smartSlider,n2,window),function(e,t,i,s){function n(e){this.suppressChange=!1,this.activeItemOriginalData=null,this.layerEditor=e,this._initInstalledItems(),this.form={},this.activeForm={form:t("<div></div>")}}n.prototype.setActiveItem=function(e,i,s){if(e!=this.activeItem||s){this.activeItemOriginalData=null;var n=e.type,r=e.values;this.activeForm.form.css("display","none"),this.activeForm=this.getItemType(n),this.activeItem&&this.activeItem.deActivate(),this.activeItem=e,this.suppressChange=!0;for(var a in r){var o=t("#item_"+n+a).data("field");o&&o.insideChange(r[a])}return this.suppressChange=!1,this.activeForm.form.css("display","block"),this.focusFirst(i),!0}return!1},n.prototype.focusFirst=function(e){var t=this.activeForm.fields.eq(0).data("field");
nextend.smartSlider.generator.isDynamicSlide()&&t.connectedField&&t.connectedField instanceof NextendElementImage||this.activeForm.fields.eq(0).data("field").focus("undefined"!=typeof e&&e)},n.prototype._initInstalledItems=function(){t(".n2-ss-core-item").on("click",t.proxy(function(e){this.createLayerItem(this.layerEditor.getActiveGroup(),t(e.currentTarget).data("item"),"click")},this))},n.prototype.createLayerItem=function(s,n,r){s=s||this.layerEditor.getActiveGroup();var a=this.getItemType(n),o=this.layerEditor.createLayer(s,t(".n2-ss-core-item-"+n).data("layerproperties")),l=t("<div></div>").data("item",n).data("itemvalues",t.extend(!0,{},a.values)).addClass("n2-ss-item n2-ss-item-"+n),d=new i.NextendSmartSliderItem(l,o,this,0);return r&&"click"==r?o.layer.trigger("mousedown",["create"]).trigger("mouseup",["create"]).trigger("click",["create"]):o.activate(),e.sidebarManager.switchTab("item"),e.history.add(t.proxy(function(){return[this,"createLayer","create","delete",[s,d,n]]},this)),d},n.prototype.getItemType=function(e){if(this.form[e]===s){var i=t("#smartslider-slide-toolbox-item-type-"+e),n={form:i,template:i.data("itemtemplate"),values:i.data("itemvalues"),fields:i.find('[name^="item_'+e+'"]'),fieldNameRegexp:new RegExp("item_"+e+"\\[(.*?)\\]","")};n.fields.on({nextendChange:t.proxy(this.updateCurrentItem,this),keydown:t.proxy(this.updateCurrentItemDeBounced,this)}),this.form[e]=n}return this.form[e]},n.prototype.updateCurrentItem=function(i){if(!this.suppressChange){null===this.activeItemOriginalData&&(this.activeItemOriginalData=t.extend({},this.activeItem.values));var s={},n={},r=this.form[this.activeItem.type],a=r.template,o=this.activeItem.parser;r.fields.each(t.proxy(function(e,i){var i=t(i),a=i.attr("name").match(r.fieldNameRegexp)[1];n[a]=s[a]=i.val()},this)),s=t.extend({},o.getDefault(),s),o.parseAll(s,this.activeItem);for(var l in s){var d=new RegExp("\\{"+l+"\\}","g");a=a.replace(d,s[l])}i&&"nextendChange"==i.type&&(e.history.add(t.proxy(function(){return[this.activeItem,"updateCurrentItem",t.extend({},n),this.activeItemOriginalData,[]]},this)),this.activeItemOriginalData=null),this.activeItem.render(t(a),s,n)}},n.prototype.updateCurrentItemDeBounced=NextendDeBounce(function(e){this.updateCurrentItem(e)},100),n.prototype.history=function(t,i,s){switch(t){case"createLayer":switch(i){case"delete":s[1].layer["delete"]();break;case"create":var n=this.createLayerItem(s[0],s[2]);e.history.changeFuture(s[1].layer,n.layer),e.history.changeFuture(s[1],n)}}},i.NextendSmartSliderItemManager=n}(nextend.smartSlider,n2,window),function(e,t,i){function s(e,t){this.pre="div#"+nextend.smartSlider.frontend.sliderElement.attr("id")+" ",this.formData=t,this.item=e,this.fonts=[],this.styles=[],this.needFill=[],this.added()}s.prototype.getDefault=function(){return{}},s.prototype.added=function(){},s.prototype.addedFont=function(t,i){var s=e("#item_"+this.item.type+i);s.length&&(this.fonts.push({mode:t,name:i,field:s.data("field"),def:this.formData.values[i]}),e.when(nextend.fontManager.addVisualUsage(t,this.item.values[i],this.pre)).done(e.proxy(function(e){e||this.item.changeValue(i,"")},this)))},s.prototype.addedStyle=function(t,i){var s=e("#item_"+this.item.type+i);s.length&&(this.styles.push({mode:t,name:i,field:s.data("field"),def:this.formData.values[i]}),e.when(nextend.styleManager.addVisualUsage(t,this.item.values[i],this.pre)).done(e.proxy(function(e){e||this.item.changeValue(i,"")},this)))},s.prototype.parseAll=function(e,t){for(var i=0;i<this.fonts.length;i++)e[this.fonts[i].name+"class"]=nextend.fontManager.getClass(e[this.fonts[i].name],this.fonts[i].mode)+" ";for(var i=0;i<this.styles.length;i++)e[this.styles[i].name+"class"]=nextend.styleManager.getClass(e[this.styles[i].name],this.styles[i].mode)+" ";for(var i=0;i<this.needFill.length;i++)"undefined"!=typeof e[this.needFill[i]]&&(e[this.needFill[i]]=nextend.smartSlider.generator.fill(e[this.needFill[i]]+""))},s.prototype.render=function(e,t){return e},s.prototype.getName=function(e){return!1},s.prototype.resizeLayerToImage=function(t,i){e("<img/>").attr("src",i).load(function(){var e=t.layer.layerEditor.slideSize,i=e.width,s=e.height;if(this.width>0&&this.height>0){if(i=parseInt(Math.min(this.width,i)),s=parseInt(Math.min(this.height,s)),nextend.smartSlider.history.off(),e.width/e.height<=i/s)t.layer.setProperty("width",i),t.layer.setProperty("height",this.height*i/this.width);else{var n=Math.min(this.width*e.height/this.height,i);t.layer.setProperty("width",n),t.layer.setProperty("height",this.height*n/this.width)}nextend.smartSlider.history.on()}})},s.prototype.fitLayer=function(e){return!1},s.prototype.activate=function(){nextend.basicCSS.activate("ss3item"+this.item.type,this.item.values,{font:this.fonts,style:this.styles})},s.prototype.deActivate=function(){nextend.basicCSS.deActivate()},t.NextendSmartSliderItemParser=s}(n2,window),function(e,t,i){function s(){NextendSmartSliderItemParser.apply(this,arguments)}s.prototype=Object.create(NextendSmartSliderItemParser.prototype),s.prototype.constructor=s,s.prototype.added=function(){this.needFill=["content","url"],this.addedFont("link","font"),this.addedStyle("button","style"),nextend.smartSlider.generator.registerField(e("#item_buttoncontent")),nextend.smartSlider.generator.registerField(e("#linkitem_buttonlink_0"))},s.prototype.getName=function(e){return e.content},s.prototype.parseAll=function(e){var t=e.link.split("|*|");e.url=t[0],e.target=t[1],delete e.link,0|e.fullwidth?e.display="block;":e.display="inline-block;",e.extrastyle=0|e.nowrap?"white-space: nowrap;":"",NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments)},t.NextendSmartSliderItemParser_button=s}(n2,window),function(e,t,i){function s(){NextendSmartSliderItemParser.apply(this,arguments)}s.prototype=Object.create(NextendSmartSliderItemParser.prototype),s.prototype.constructor=s,s.prototype.getDefault=function(){return{link:"#|*|_self",font:"",style:""}},s.prototype.added=function(){this.needFill=["heading","url"],this.addedFont("hover","font"),this.addedStyle("heading","style"),nextend.smartSlider.generator.registerField(e("#item_headingheading")),nextend.smartSlider.generator.registerField(e("#linkitem_headinglink_0"))},s.prototype.getName=function(e){return e.heading},s.prototype.parseAll=function(t){t.uid=e.fn.uid();var i=t.link.split("|*|");t.url=i[0],t.target=i[1],delete t.link,0|t.fullwidth?t.display="block;":t.display="inline-block;",t.extrastyle=0|t.nowrap?"white-space: nowrap;":"",t.heading=e("<div>"+t.heading+"</div>").text().replace(/\n/g,"<br />"),t.priority=2,t["class"]="",NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),"#"==t.url||""==t.url?(t.afontclass="",t.astyleclass=""):(t.afontclass=t.fontclass,t.fontclass="",t.astyleclass=t.styleclass,t.styleclass="")},s.prototype.render=function(e,t){if("#"==t.url||""==t.url){var i=e.find("a");i.parent().html(i.html())}return e},t.NextendSmartSliderItemParser_heading=s}(n2,window),function(e,t,i){function s(){NextendSmartSliderItemParser.apply(this,arguments)}s.prototype=Object.create(NextendSmartSliderItemParser.prototype),s.prototype.constructor=s,s.prototype.getDefault=function(){return{size:"100%|*|auto",link:"#|*|_self",style:""}},s.prototype.added=function(){this.needFill=["image","url"],this.addedStyle("box","style"),nextend.smartSlider.generator.registerField(e("#item_imageimage")),nextend.smartSlider.generator.registerField(e("#item_imagealt")),nextend.smartSlider.generator.registerField(e("#item_imagetitle")),nextend.smartSlider.generator.registerField(e("#linkitem_imagelink_0"))},s.prototype.getName=function(e){return e.image.split("/").pop()},s.prototype.parseAll=function(e,t){var i=e.size.split("|*|");e.width=i[0],e.height=i[1],delete e.size;var s=e.link.split("|*|");e.url=s[0],e.target=s[1],delete e.link,NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),t&&"$system$/images/placeholder/image.png"==t.values.image&&e.image!=t.values.image?(e.image=nextend.imageHelper.fixed(e.image),this.resizeLayerToImage(t,e.image)):e.image=nextend.imageHelper.fixed(e.image)},s.prototype.fitLayer=function(e){return this.resizeLayerToImage(e,nextend.imageHelper.fixed(e.values.image)),!0},s.prototype.render=function(e,t){return"#"==t.url&&e.html(e.children("a").html()),e},t.NextendSmartSliderItemParser_image=s}(n2,window),function(e,t,i){function s(){NextendSmartSliderItemParser.apply(this,arguments)}function n(e){var t=!1,i=!1,s="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|noscript|legend|section|article|aside|hgroup|header|footer|nav|figure|details|menu|summary";return-1!==e.indexOf("<object")&&(e=e.replace(/<object[\s\S]+?<\/object>/g,function(e){return e.replace(/[\r\n]+/g,"")})),e=e.replace(/<[^<>]+>/g,function(e){return e.replace(/[\r\n]+/g," ")}),-1===e.indexOf("<pre")&&-1===e.indexOf("<script")||(t=!0,e=e.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(e){return e.replace(/(\r\n|\n)/g,"<wp-line-break>")})),-1!==e.indexOf("[caption")&&(i=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(e){return e=e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>"),e=e.replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){return e.replace(/[\r\n\t]+/," ")}),e.replace(/\s*\n\s*/g,"<wp-temp-br />")})),e+="\n\n",e=e.replace(/<br \/>\s*<br \/>/gi,"\n\n"),e=e.replace(new RegExp("(<(?:"+s+")(?: [^>]*)?>)","gi"),"\n$1"),e=e.replace(new RegExp("(</(?:"+s+")>)","gi"),"$1\n\n"),e=e.replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n"),e=e.replace(/\r\n|\r/g,"\n"),e=e.replace(/\n\s*\n+/g,"\n\n"),e=e.replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n"),e=e.replace(/<p>\s*?<\/p>/gi,""),e=e.replace(new RegExp("<p>\\s*(</?(?:"+s+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),e=e.replace(/<p>(<li.+?)<\/p>/gi,"$1"),e=e.replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>"),e=e.replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>"),e=e.replace(new RegExp("<p>\\s*(</?(?:"+s+")(?: [^>]*)?>)","gi"),"$1"),e=e.replace(new RegExp("(</?(?:"+s+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),e=e.replace(/\s*\n/gi,"<br />\n"),e=e.replace(new RegExp("(</?(?:"+s+")[^>]*>)\\s*<br />","gi"),"$1"),e=e.replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1"),e=e.replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]"),e=e.replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(e,t,i){return i.match(/<p( [^>]*)?>/)?e:t+"<p>"+i+"</p>"}),t&&(e=e.replace(/<wp-line-break>/g,"\n")),i&&(e=e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),e}s.prototype=Object.create(NextendSmartSliderItemParser.prototype),s.prototype.constructor=s,s.prototype.getDefault=function(){return{contentmobile:"",contenttablet:"",font:"",style:""}},s.prototype.added=function(){this.needFill=["content","contenttablet","contentmobile"],this.addedFont("paragraph","font"),this.addedStyle("heading","style"),nextend.smartSlider.generator.registerField(e("#item_textcontent")),nextend.smartSlider.generator.registerField(e("#item_textcontenttablet")),nextend.smartSlider.generator.registerField(e("#item_textcontentmobile"))},s.prototype.getName=function(e){return e.content},s.prototype.parseAll=function(e){NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),e.p=n(e.content),e.ptablet=n(e.contenttablet),e.pmobile=n(e.contentmobile)},s.prototype.render=function(e,t){return""==t.contenttablet&&(e=e.filter(":not(.n2-ss-tablet)"),e.filter(".n2-ss-desktop").addClass("n2-ss-tablet")),""==t.contentmobile&&(e=e.filter(":not(.n2-ss-mobile)"),e.filter(".n2-ss-tablet, .n2-ss-desktop").last().addClass("n2-ss-mobile")),e.find("p").addClass(t.fontclass+" "+t.styleclass),e.find("a").on("click",function(e){e.preventDefault()}),e},t.NextendSmartSliderItemParser_text=s}(n2,window),function(e,t,i){function s(){NextendSmartSliderItemParser.apply(this,arguments)}s.prototype=Object.create(NextendSmartSliderItemParser.prototype),s.prototype.constructor=s,s.prototype.added=function(){this.needFill=["vimeourl"],nextend.smartSlider.generator.registerField(e("#item_vimeovimeourl"))},s.prototype.getName=function(e){return e.vimeourl},s.prototype.parseAll=function(t,i){var s=i.values.vimeourl!=t.vimeourl;if(NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),""==t.image&&(t.image="$system$/images/placeholder/video.png"),t.image=nextend.imageHelper.fixed(t.image),s&&""!=t.vimeourl){var n=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,r=t.vimeourl.match(n),a=!1;r?a=r[3]:t.vimeourl.match(/^[0-9]+$/)&&(a=t.vimeourl),a?NextendAjaxHelper.getJSON("https://vimeo.com/api/v2/video/"+encodeURI(a)+".json").done(e.proxy(function(t){e("#item_vimeoimage").val(t[0].thumbnail_large).trigger("change")},this)).fail(function(e){nextend.notificationCenter.error(e.responseText)}):nextend.notificationCenter.error("The provided URL does not match any known Vimeo url or code!")}},s.prototype.fitLayer=function(e){return!0},t.NextendSmartSliderItemParser_vimeo=s}(n2,window),function(e,t,i){function s(){NextendSmartSliderItemParser.apply(this,arguments)}s.prototype=Object.create(NextendSmartSliderItemParser.prototype),s.prototype.constructor=s,s.prototype.added=function(){this.needFill=["youtubeurl","image","start"],nextend.smartSlider.generator.registerField(e("#item_youtubeyoutubeurl")),nextend.smartSlider.generator.registerField(e("#item_youtubeimage")),nextend.smartSlider.generator.registerField(e("#item_youtubestart"))},s.prototype.getName=function(e){return e.youtubeurl},s.prototype.parseAll=function(t,i){var s=i.values.youtubeurl!=t.youtubeurl;if(NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),""==t.image&&(t.image="$system$/images/placeholder/video.png"),t.image=nextend.imageHelper.fixed(t.image),s){var n=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,r=t.youtubeurl.match(n);r?NextendAjaxHelper.getJSON("https://www.googleapis.com/youtube/v3/videos?id="+encodeURI(r[2])+"&part=snippet&key=AIzaSyC3AolfvPAPlJs-2FgyPJdEEKS6nbPHdSM").done(e.proxy(function(t){if(t.items.length){var s=t.items[0].snippet.thumbnails,n=s.maxres||s.standard||s.high||s.medium||s["default"],a=n.url;"{video_url}"==i.values.youtubeurl&&(a=a.replace(r[2],"{video_id}")),e("#item_youtubeimage").val(a).trigger("change")}},this)).fail(function(e){nextend.notificationCenter.error(e.error.errors[0].message)}):nextend.notificationCenter.error("The provided URL does not match any known YouTube url or code!")}},s.prototype.fitLayer=function(e){return!0},s.prototype.render=function(e,t){return parseInt(t.playbutton)||e.find(".n2-video-play").remove(),e},t.NextendSmartSliderItemParser_youtube=s}(n2,window),function(e,t,i,s){function n(){this.property={},this.deviceProperty={}}n.prototype.getMode=function(){return this.layerEditor.getMode()},n.prototype.getProperty=function(e,t){if(e){var i=this.deviceProperty[this.getMode()],s=this.deviceProperty.desktopPortrait;if("undefined"!=typeof i[t])return i[t];if("undefined"!=typeof s[t])return s[t]}return this.property[t]},n.prototype.store=function(i,s,n,r){var a=this.property[s];if(this.property[s]=n,i){var o=this.getMode();e.history.add(t.proxy(function(){return[this,"store",n,this.deviceProperty[o][s],[this.layer,i,s,o]]},this)),this.deviceProperty[o][s]=n}else e.history.add(t.proxy(function(){return[this,"store",n,a,[this.layer,i,s,this.getMode()]]},this));r&&this.render(s,n)},n.prototype.storeWithModifier=function(i,s,n,r){this.property[i]=s;var a=this.getMode();e.history.add(t.proxy(function(){return[this,"storeWithModifier",s,this.deviceProperty[a][i],[this.layer,i,a]]},this)),this.deviceProperty[a][i]=s,r&&this.renderWithModifier(i,s,n)},n.prototype.render=function(e,t){this["_sync"+e](t)},n.prototype.renderWithModifier=function(e,t,i){this["_sync"+e](Math.round(t*i))},n.prototype.isDimensionPropertyAccepted=function(e){return!(!(e+"").match(/[0-9]+%/)&&"auto"!=e)},n.prototype.history=function(e,t,i){switch(e){case"store":var s=this.getMode();i[1]&&i[3]!=s?this.deviceProperty[i[3]][i[2]]=t:this[e](i[1],i[2],t,!0),this._renderModeProperties(!0);break;case"storeWithModifier":var s=this.getMode(),n=1;switch(i[1]){case"width":case"left":n=this.layerEditor.getResponsiveRatio("h");break;case"height":case"top":n=this.layerEditor.getResponsiveRatio("v")}i[2]==s?this[e](i[1],t,n,!0):this.deviceProperty[i[2]][i[1]]=t,this._renderModeProperties(!0)}},i.NextendSmartSliderLayerDataStorageAbtract=n}(nextend.smartSlider,n2,window),function(e,t,i,s){function n(e,i){"undefined"==typeof this.layer&&(this.layer=null),this.layerEditor=e,i||(i=a),this.group=i,this.layers=[],this.zIndexList=[],this.$=t(this),this.createLayer(),this.layerContainerElement=this.layer,this.createLayerRow(),r=r.add(this.layersItemsUlElement),this.layersItemsUlElement.sortable({axis:"y",helper:"clone",distance:10,placeholder:"sortable-placeholder",forcePlaceholderSize:!1,tolerance:"intersect",connectWith:r,items:".n2-ss-layer-row",connectWith:this.layerEditor.layersItemsElement.find("ul"),start:t.proxy(this.layersSortableStart,this),stop:t.proxy(this.layersSortableStop,this)}).appendTo(this.layerRow)}var r=t(),a={zIndexList:[],reIndexLayers:function(){}};n.prototype.addLayerBeforeInit=function(e,t){this.moveLayerToGroup(e,t)},n.prototype.lateInit=function(e,t){this.layers.length||e?this.zIndex=e-(t-1):this.zIndex=this.group.zIndexList.length,"undefined"==typeof this.group.zIndexList[this.zIndex]?this.group.zIndexList[this.zIndex]=this:this.group.zIndexList.splice(this.zIndex,0,this),this.group.reIndexLayers(),this.layers.length>0&&this.reIndexLayers()},n.prototype.startWithExistingNodes=function(){this.layer.find("> div").each(t.proxy(function(e,i){var s=t(i);switch(s.data("type")){case"group":var n=new NextendSmartSliderLayerGroup(this.layerEditor,this,s,[]);n.lateInit(),n.startWithExistingNodes();break;case"layer":var r=new NextendSmartSliderLayer(this.layerEditor,this,s,this.layerEditor.itemEditor);this.layers.push(r)}},this)),this.layers.length>0&&this.reIndexLayers()},n.prototype.getChildLayersRecursive=function(e){for(var t=[],i=0;i<this.zIndexList.length;i++)this.zIndexList[i]instanceof NextendSmartSliderLayer?e?t.push(this.zIndexList[i].layer[0]):t.push(this.zIndexList[i]):t.push.apply(t,this.zIndexList[i].getChildLayersRecursive(e));return t},n.prototype.moveLayerToGroup=function(e,t){this.moveLayersToGroup([e],[t])},n.prototype.moveLayersToGroup=function(e,i){for(var s=[],n=0;n<e.length;n++){var r=e[n],a=r.group;if(this.layers.push(r),r.setGroup(this,i[n]),this!=a){for(var o=a.layers.length;o--;)a.layers[o]==r&&a.layers.splice(o,1);-1==t.inArray(a,s)&&s.push(a)}}for(var n=0;n<s.length;n++)s[n].reIndexLayers();this.reIndexLayers()},n.prototype.reIndexLayers=function(){this.zIndexList=this.zIndexList.filter(function(e){return e!=s});for(var e=this.zIndexList.length-1;e>=0;e--)this.zIndexList[e].setZIndex(e)},n.prototype.layersSortableStart=function(e,t){t.item.show(),t.placeholder.html("<div></div>"),t.item.data("startindex",t.item.index())},n.prototype.layersSortableStop=function(i,s){var n=s.item.parent().data("container");if(n instanceof NextendSmartSliderLayerGroup&&s.item.hasClass("n2-ss-layer-group-row"))this.layersItemsUlElement.sortable("cancel");else{var r=this.zIndexList.length-t(s.item).data("startindex")-1,a=n.zIndexList.length-t(s.item).index()-1;if(n!=this){a++;var o=this.zIndexList[r];n.moveLayerToGroup(o,a),e.history.add(t.proxy(function(){return[n,"changeZIndexWithContainer",[o,a,this,n],[o,r,n,this],[]]},this))}else r!=a&&(n.zIndexList.splice(a,0,n.zIndexList.splice(r,1)[0]),n.reIndexLayers(),e.history.add(t.proxy(function(){return[n,"changeZIndex",[r,a],[a,r],[]]},this)))}},n.prototype.activateFirst=function(){this.zIndexList.length>0&&this.zIndexList[this.zIndexList.length-1].activate()},n.prototype.childDeleted=function(e){for(var t=0;t<this.layers.length;t++)if(this.layers[t]==e){this.layers.splice(t,1);break}this.zIndexList.splice(e.zIndex,1)},n.prototype.history=function(i,s,n){switch(i){case"changeZIndex":var r=s[0],a=s[1];this.zIndexList.splice(a,0,this.zIndexList.splice(r,1)[0]),this.reIndexLayers();break;case"changeZIndexWithContainer":var o=s[0],a=(s[2],s[1]),l=s[3];l.moveLayerToGroup(o,a);break;case"createGroup":switch(s){case"create":var d=n[0],h=new NextendSmartSliderLayerGroup(this.layerEditor,this.layerEditor.mainLayerGroup,!1);e.history.changeFuture(this,h),h.lateInit(d,0);break;case"delete":this["delete"]()}break;case"deleteGroup":switch(s){case"create":var h=new NextendSmartSliderLayerGroup(this.layerEditor,this.layerEditor.mainLayerGroup,!1,{data:t.extend(!0,{},n[0])});h.lateInit(),e.history.changeFuture(this,h),this.layerEditor.fixActiveLayer();break;case"delete":this["delete"]()}}},i.NextendSmartSliderLayerContainerAbstract=n}(nextend.smartSlider,n2,window),function(e,t,i,s){function n(e,i,s,n,a){if(this.status=h.UNDEFINED,this.isDeleted=!1,this._triggerLayerResizedThrottled=NextendThrottle(this._triggerLayerResized,30),this.doThrottledTheResize=this.doTheResize,this.parent=!1,this.parentIsVisible=!0,this.$=t(this),this.layerEditor=e,this.group=i,this.timelineLayer=null,s){this.property={id:s.attr("id"),"class":s.data("class"),parentid:s.data("parentid"),parentalign:s.data("desktopportraitparentalign"),parentvalign:s.data("desktopportraitparentvalign"),name:s.data("name")+"",nameSynced:s.data("namesynced"),crop:s.data("crop"),rotation:s.data("rotation"),inneralign:s.data("inneralign"),parallax:s.data("parallax"),align:s.data("desktopportraitalign"),valign:s.data("desktopportraitvalign"),fontsize:s.data("desktopportraitfontsize"),adaptivefont:s.data("adaptivefont"),generatorvisible:s.data("generatorvisible")||"",desktopPortrait:parseFloat(s.data("desktopportrait")),desktopLandscape:parseFloat(s.data("desktoplandscape")),tabletPortrait:parseFloat(s.data("tabletportrait")),tabletLandscape:parseFloat(s.data("tabletlandscape")),mobilePortrait:parseFloat(s.data("mobileportrait")),mobileLandscape:parseFloat(s.data("mobilelandscape")),left:parseInt(s.data("desktopportraitleft")),top:parseInt(s.data("desktopportraittop")),responsiveposition:parseInt(s.data("responsiveposition")),responsivesize:parseInt(s.data("responsivesize")),mouseenter:s.data("mouseenter"),click:s.data("click"),mouseleave:s.data("mouseleave"),play:s.data("play"),pause:s.data("pause"),stop:s.data("stop")};var o=s.data("desktopportraitwidth");this.isDimensionPropertyAccepted(o)?this.property.width=o:this.property.width=parseInt(o);var l=s.data("desktopportraitheight");this.isDimensionPropertyAccepted(l)?this.property.height=l:this.property.height=parseInt(l)}else s=t('<div class="n2-ss-layer" style="z-index: '+this.group.zIndexList.length+';"></div>').appendTo(this.group.layerContainerElement),this.property=t.extend({id:null,"class":"",parentid:null,parentalign:"center",parentvalign:"middle",name:"New layer",nameSynced:1,crop:"visible",rotation:0,inneralign:"left",parallax:0,align:"center",valign:"middle",fontsize:100,adaptivefont:0,generatorvisible:"",desktopPortrait:1,desktopLandscape:1,tabletPortrait:1,tabletLandscape:1,mobilePortrait:1,mobileLandscape:1,left:0,top:0,responsiveposition:1,width:"auto",height:"auto",responsivesize:1,mouseenter:r,click:r,mouseleave:r,play:r,pause:r,stop:r},a);this.layer=s,this.property.id||(this.property.id=null),this.subscribeParentCallbacks={},this.property.parentid?this.subscribeParent():this.property.parentid=null,this.property.parentalign||(this.property.parentalign="center"),this.property.parentvalign||(this.property.parentvalign="middle"),"undefined"==typeof this.property.nameSynced&&(this.property.nameSynced=1),"undefined"==typeof this.property.responsiveposition&&(this.property.responsiveposition=1),"undefined"==typeof this.property.responsivesize&&(this.property.responsivesize=1),this.property.inneralign||(this.property.inneralign="left"),this.property.crop||(this.property.crop="visible"),this.property.rotation||(this.property.rotation=0),this.property.parallax||(this.property.parallax=0),"undefined"==typeof this.property.fontsize&&(this.property.fontsize=100),"undefined"==typeof this.property.adaptivefont&&(this.property.adaptivefont=0),this.property.align||(this.property.align="left"),this.property.valign||(this.property.valign="top"),s.attr("data-align",this.property.align),s.attr("data-valign",this.property.valign),s.data("layerObject",this),s.css("visibility","hidden"),this.zIndex=parseInt(this.layer.css("zIndex")),isNaN(this.zIndex)&&(this.zIndex=0),this.deviceProperty={desktopPortrait:{left:this.property.left,top:this.property.top,width:this.property.width,height:this.property.height,align:this.property.align,valign:this.property.valign,parentalign:this.property.parentalign,parentvalign:this.property.parentvalign,fontsize:this.property.fontsize},desktopLandscape:{left:s.data("desktoplandscapeleft"),top:s.data("desktoplandscapetop"),width:s.data("desktoplandscapewidth"),height:s.data("desktoplandscapeheight"),align:s.data("desktoplandscapealign"),valign:s.data("desktoplandscapevalign"),parentalign:s.data("desktoplandscapeparentalign"),parentvalign:s.data("desktoplandscapeparentvalign"),fontsize:s.data("desktoplandscapefontsize")},tabletPortrait:{left:s.data("tabletportraitleft"),top:s.data("tabletportraittop"),width:s.data("tabletportraitwidth"),height:s.data("tabletportraitheight"),align:s.data("tabletportraitalign"),valign:s.data("tabletportraitvalign"),parentalign:s.data("tabletportraitparentalign"),parentvalign:s.data("tabletportraitparentvalign"),fontsize:s.data("tabletportraitfontsize")},tabletLandscape:{left:s.data("tabletlandscapeleft"),top:s.data("tabletlandscapetop"),width:s.data("tabletlandscapewidth"),height:s.data("tabletlandscapeheight"),align:s.data("tabletlandscapealign"),valign:s.data("tabletlandscapevalign"),parentalign:s.data("tabletlandscapeparentalign"),parentvalign:s.data("tabletlandscapeparentvalign"),fontsize:s.data("tabletlandscapefontsize")},mobilePortrait:{left:s.data("mobileportraitleft"),top:s.data("mobileportraittop"),width:s.data("mobileportraitwidth"),height:s.data("mobileportraitheight"),align:s.data("mobileportraitalign"),valign:s.data("mobileportraitvalign"),parentalign:s.data("mobileportraitparentalign"),parentvalign:s.data("mobileportraitparentvalign"),fontsize:s.data("mobileportraitfontsize")},mobileLandscape:{left:s.data("mobilelandscapeleft"),top:s.data("mobilelandscapetop"),width:s.data("mobilelandscapewidth"),height:s.data("mobilelandscapeheight"),align:s.data("mobilelandscapealign"),valign:s.data("mobilelandscapevalign"),parentalign:s.data("mobilelandscapeparentalign"),parentvalign:s.data("mobilelandscapeparentvalign"),fontsize:s.data("mobilelandscapefontsize")}},this.createRow(),this.itemEditor=n,this.initItems(),"left"!=this.property.inneralign&&this._syncinneralign(this.property.inneralign),this.property.rotation&&this._syncrotation(this.property.rotation),this.___makeLayerAlign(),this.___makeLayerResizeable(),this.___makeLayerDraggable();var d=null;this.chainParent=t('<div class="n2-ss-layer-chain-parent n2-button n2-button-icon n2-button-xs n2-radius-s n2-button-blue"><i class="n2-i n2-i-layerunlink"></i></div>').on({click:t.proxy(this.unlink,this),mouseenter:t.proxy(function(){d=t("#"+this.getProperty(!1,"parentid")).addClass("n2-highlight")},this),mouseleave:t.proxy(function(){d&&(d.removeClass("n2-highlight"),d=null)},this)}).appendTo(this.layer),e.layerList.push(this),"undefined"==typeof this.group.zIndexList[this.zIndex]?this.group.zIndexList[this.zIndex]=this:this.group.zIndexList.splice(this.zIndex,0,this),this.layerEditor.$.trigger("layerCreated",this),t(window).triggerHandler("layerCreated"),this.layer.on({mousedown:t.proxy(nextend.context.setMouseDownArea,nextend.context,"layerClicked"),click:t.proxy(this.activate,this),dblclick:t.proxy(function(){t('[data-tab="item"]').trigger("click"),this.items[0].itemEditor.focusFirst("dblclick")},this)});var p=s.data("status");null!==p&&"undefined"!=typeof p?this.changeStatus(p):this.changeStatus(h.NORMAL),setTimeout(t.proxy(function(){this._resize(!0),this.status!=h.HIDDEN&&this.layer.css("visibility","")},this),300)}window.nextendPreventClick=!1;var r,a=!1,o=function(){var e=0;return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){var i,s=(new Date).getTime();return i=Math.max(0,16-(s-e)),e=s+i,setTimeout(function(){t(s+i)},i)}}(),l={raf:!1,ratios:null,isThrottled:!1,layers:[]},d=function(){l.raf===!1&&(l.raf=!0,o(function(){for(var e=0;e<l.layers.length;e++)l.layers[e].isDeleted||l.layers[e].doTheResize(l.ratios,!0,l.isThrottled);l={raf:!1,ratios:null,isThrottled:!1,layers:[]}}))},h={UNDEFINED:0,NORMAL:1,LOCKED:2,HIDDEN:3};n.prototype=Object.create(i.NextendSmartSliderLayerDataStorageAbtract.prototype),n.prototype.constructor=n,n.prototype.setGroup=function(e,t){e.layersItemsUlElement.append(this.layerRow),e.layerContainerElement.append(this.layer),this.group.zIndexList.splice(this.zIndex,1),this.group=e,"undefined"==typeof t&&(t=this.zIndex),"undefined"==typeof e.zIndexList[t]?e.zIndexList[t]=this:e.zIndexList.splice(t,0,this)},n.prototype.getIndex=function(){return this.layerEditor.layerList.indexOf(this)},n.prototype.getParent=function(){return t("#"+this.getProperty(!1,"parentid")).data("layerObject")},n.prototype.requestID=function(){var e=this.getProperty(!1,"id");return e||(e=t.fn.uid(),this.setProperty("id",e,"layer")),e},n.prototype.createRow=function(){var e=300,i=null,s=t('<div class="n2-ss-layer-status"></div>'),n=t('<div class="n2-button n2-button-icon n2-button-m n2-button-m-narrow" data-n2tip="'+n2_("Delete layer")+'"><i class="n2-i n2-i-delete n2-i-grey-opacity"></i></div>').on("click",t.proxy(this["delete"],this)),r=t('<div class="n2-button n2-button-icon n2-button-m n2-button-m-narrow" data-n2tip="'+n2_("Duplicate layer")+'"><i class="n2-i n2-i-duplicate n2-i-grey-opacity"></i></div>').on("click",t.proxy(function(){this.duplicate(!0,!1)},this));t('<a href="#" class="n2-ss-sc-hide n2-button n2-button-icon n2-button-m"><i class="n2-i n2-i-eye"></i></a>').appendTo(s).on("click",t.proxy(function(e){e.preventDefault(),this.status==h.HIDDEN||this.status==h.LOCKED?this.setStatusNormal():this.changeStatus(h.HIDDEN)},this)),this.layerRow=t('<li class="n2-ss-layer-row"></li>').data("layer",this).on({mouseenter:t.proxy(function(){this.layer.addClass("n2-highlight")},this),mouseleave:t.proxy(function(e){this.layer.removeClass("n2-highlight")},this),mousedown:t.proxy(nextend.context.setMouseDownArea,nextend.context,"layerRowClicked")}).appendTo(this.group.layersItemsUlElement),this.layerTitleSpan=t('<span class="n2-ucf">'+this.property.name+"</span>").on({mouseup:t.proxy(function(s){i?(clearTimeout(i),i=null,this.editName()):(this.activate(s),i=setTimeout(t.proxy(function(){i=null},this),e))},this)}),this.layerTitle=t('<div class="n2-ss-layer-title"></div>').append(this.layerTitleSpan).append(t('<div class="n2-actions-left"></div>').append(s)).append(t('<div class="n2-actions"></div>').append(r).append(n)).appendTo(this.layerRow).on({mouseup:t.proxy(function(e){"DIV"===e.target.tagName&&this.activate(e)},this)}),nextend.tooltip.add(this.layerRow)},n.prototype.editName=function(){var e=new NextendSmartSliderAdminInlineField;e.$input.on({valueChanged:t.proxy(function(e,t){this.rename(t,!0),this.layerTitleSpan.css("display","inline")},this),cancel:t.proxy(function(){this.layerTitleSpan.css("display","inline")},this)}),this.layerTitleSpan.css("display","none"),e.injectNode(this.layerTitle,this.property.name)},n.prototype.rename=function(e,t){if(this.property.nameSynced||t){if(t&&(this.property.nameSynced=0),""==e){if(t&&(this.property.nameSynced=1,this.items.length))return this.items[0].reRender(),!1;e="Layer #"+(this.layerEditor.layerList.length+1)}e=e.substr(0,35),this.property.name!=e&&(this.property.name=e,this.layerTitleSpan.html(e),this.$.trigger("layerRenamed",e))}},n.prototype.setZIndex=function(e){
this.zIndex=e,this.layer.css("zIndex",e),this.group.layersItemsUlElement.append(this.layerRow),this.$.trigger("layerIndexed",e)},n.prototype.select=function(e){this.layerEditor.selectLayer(this,!0)},n.prototype.positionSidebar=function(){this.layerEditor.panel.show(this,this.layer)},n.prototype.showEditor=function(){this.layerEditor.panel._show()},n.prototype.activate=function(e,t,i){if(!a){if(document.activeElement&&document.activeElement.blur(),e&&(e.ctrlKey||e.metaKey)&&this.layerEditor.layerList[this.layerEditor.activeLayerIndex])return void this.select();if(!e||3!=e.which||!this.layerEditor.selectMode){i||this.layerEditor.exitSelectMode(),e&&this.positionSidebar(),0==this.items.length?console.error("The layer do not have item on it!"):this.items[0].activate(null,t);var s=this.getIndex();this.layerEditor.activeLayerIndex!==s&&(this.layerRow.addClass("n2-active"),this.layer.addClass("n2-active"),this.layer.triggerHandler("n2-ss-activate"),this.layerEditor.changeActiveLayer(s,i),nextend.activeLayer=this.layer,this.layerEditor.ui.onActivateLayer(this))}}},n.prototype.deActivate=function(){this.layer.removeClass("n2-active"),this.layerRow.removeClass("n2-active"),this.layer.triggerHandler("n2-ss-deactivate")},n.prototype.fit=function(){var e=this.layer.get(0);this.layerEditor.slideSize,this.layer.position();if(e.scrollWidth>0&&e.scrollHeight>0){for(var t=!1,i=0;i<this.items.length&&!(t=this.items[i].parser.fitLayer(this.items[i]));i++);if(!t){this.setProperty("width","auto","layer"),this.setProperty("height","auto","layer");var s=this.layer.width();Math.abs(this.layerEditor.layerContainerElement.width()-this.layer.position().left-s)<2&&this.setProperty("width",s,"layer")}}},n.prototype.hide=function(e){this.store(!1,e?e:this.getMode(),0,!0)},n.prototype.show=function(e){this.store(!1,e?e:this.getMode(),1,!0)},n.prototype.changeStatus=function(e){switch(e==this.status&&(e=h.NORMAL),this.status){case h.HIDDEN:this.layer.css("visibility",""),this.layerRow.removeClass("n2-ss-layer-status-hidden");break;case h.LOCKED:this.layer.nextenddraggable("enable"),this.layer.nextendResizable("enable"),this.layer.removeClass("n2-ss-layer-locked"),this.layerRow.removeClass("n2-ss-layer-status-locked")}switch(this.status=e,this.status){case h.HIDDEN:this.layer.css("visibility","hidden"),this.layerRow.addClass("n2-ss-layer-status-hidden");break;case h.LOCKED:this.layer.nextenddraggable("disable"),this.layer.nextendResizable("disable"),this.layer.addClass("n2-ss-layer-locked"),this.layerRow.addClass("n2-ss-layer-status-locked")}},n.prototype.setStatusNormal=function(){this.changeStatus(h.NORMAL)},n.prototype._hide=function(){this.layer.css("display","none")},n.prototype._show=function(){parseInt(this.property[this.layerEditor.getMode()])&&this.layer.css("display","block")},n.prototype.duplicate=function(i,s,n){var r=this.getHTML(!0,!1),a=r.attr("id");a&&(a=t.fn.uid(),r.attr("id",a)),s&&r.attr("data-parentid",s),a||s||(r.data("desktopportraittop",r.data("desktopportraittop")+40),r.data("desktopportraitleft",r.data("desktopportraitleft")+40));var o=this.layerEditor._addLayer(this.group,r,!0);"undefined"==typeof n?n=[]:n.push(o),this.layer.triggerHandler("LayerDuplicated",[a,n]),this.layerRow.trigger("mouseleave"),i&&o.activate(),s||e.history.add(t.proxy(function(){return[this,"duplicateLayer","duplicate","delete",[o]]},this))},n.prototype["delete"]=function(i,s){this.layerEditor.getSelectedLayer()==this&&this.layerEditor.panel.hide(),e.history.add(t.proxy(function(){return[this,"deleteLayer","delete","create",[this.group,this.getData({layersIncluded:!0,itemsIncluded:!0})]]},this)),this.deActivate();for(var n=0;n<this.items.length;n++)this.items[n]["delete"]();this.group.childDeleted(this);var r=this.getProperty(!1,"parentid");r&&this.unSubscribeParent(!0),this.layer.trigger("mouseup"),this.isDeleted=!0,this.layerEditor.layerDeleted(this.getIndex()),"undefined"==typeof s?s=[]:s.push(this),this.layer.triggerHandler("LayerDeleted",["undefined"!=typeof i?i:!1,s]),this.layer.remove(),this.layerRow.remove(),this.$.trigger("layerDeleted"),delete this.layer,delete this.itemEditor},n.prototype.getHTML=function(e,i){var s=t('<div class="n2-ss-layer"></div>').attr("style",this.getStyleText());for(var n in this.property)"width"!=n&&"height"!=n&&"left"!=n&&"top"!=n&&s.attr("data-"+n.toLowerCase(),this.property[n]);for(var n in this.deviceProperty)for(var r in this.deviceProperty[n])s.attr("data-"+n.toLowerCase()+r,this.deviceProperty[n][r]);s.css({position:"absolute",zIndex:this.zIndex+1});for(var n in this.deviceProperty.desktop)s.css(n,this.deviceProperty.desktop[n]+"px");if(e)for(var a=0;a<this.items.length;a++)s.append(this.items[a].getHTML(i));var o=this.getProperty(!1,"id");return o&&""!=o&&s.attr("id",o),this.status>h.NORMAL&&s.attr("data-status",this.status),s},n.prototype.getData=function(e){var t={zIndex:this.zIndex+1};this.status>h.NORMAL&&(t.status=this.status);for(var i in this.property)switch(i){case"width":case"height":case"left":case"top":case"align":case"valign":case"parentalign":case"parentvalign":case"fontsize":break;default:t[i.toLowerCase()]=this.property[i]}for(var s in this.deviceProperty)for(var n in this.deviceProperty[s]){var r=this.deviceProperty[s][n];"undefined"!=typeof r&&("width"==n&&this.isDimensionPropertyAccepted(r)||"height"==n&&this.isDimensionPropertyAccepted(r)||"align"==n||"valign"==n||"parentalign"==n||"parentvalign"==n||(r=parseFloat(r)),t[s.toLowerCase()+n]=r)}if(e.itemsIncluded){t.items=[];for(var a=0;a<this.items.length;a++)t.items.push(this.items[a].getData())}return t},n.prototype.getDataWithChildren=function(e){return e.push(this.getData({layersIncluded:!0,itemsIncluded:!0})),this.layer.triggerHandler("LayerGetDataWithChildren",[e]),e},n.prototype.initItems=function(){this.items=[];for(var e=this.layer.find(".n2-ss-item"),t=0;t<e.length;t++)this.addItem(e.eq(t),!1)},n.prototype.addItem=function(e,t){t&&e.appendTo(this.layer),new NextendSmartSliderItem(e,this,this.itemEditor)},n.prototype.rename=function(e,t){if(this.property.nameSynced||t){if(t&&(this.property.nameSynced=0),""==e){if(t&&(this.property.nameSynced=1,this.items.length))return this.items[0].reRender(),!1;e="Layer #"+(this.layerEditor.layerList.length+1)}e=e.substr(0,35),this.property.name!=e&&(this.property.name=e,this.layerTitleSpan.html(e),this.$.trigger("layerRenamed",e))}},n.prototype.setProperty=function(e,t,i){switch(e){case"responsiveposition":case"responsivesize":t=parseInt(t);case"id":case"parentid":case"class":case"inneralign":case"crop":case"rotation":case"parallax":case"adaptivefont":case"generatorvisible":case"mouseenter":case"click":case"mouseleave":case"play":case"pause":case"stop":this.store(!1,e,t,!0);break;case"parentalign":case"parentvalign":case"align":case"valign":case"fontsize":this.store(!0,e,t,!0);break;case"width":var s=this.layerEditor.getResponsiveRatio("h");parseInt(this.getProperty(!1,"responsivesize"))||(s=1);var n=t;this.isDimensionPropertyAccepted(t)||(n=~~t,n!=t&&this.$.trigger("propertyChanged",[e,n])),this.storeWithModifier(e,n,s,!0),this._resize(!1);break;case"height":var r=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsivesize"))||(r=1);var n=t;this.isDimensionPropertyAccepted(t)||(n=~~t,n!=t&&this.$.trigger("propertyChanged",[e,n])),this.storeWithModifier(e,n,r,!0),this._resize(!1);break;case"left":var a=this.layerEditor.getResponsiveRatio("h");parseInt(this.getProperty(!1,"responsiveposition"))||(a=1);var n=~~t;n!=t&&this.$.trigger("propertyChanged",[e,n]),this.storeWithModifier(e,n,a,!0);break;case"top":var o=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsiveposition"))||(o=1);var n=~~t;n!=t&&this.$.trigger("propertyChanged",[e,n]),this.storeWithModifier(e,n,o,!0);break;case"showFieldDesktopPortrait":this.store(!1,"desktopPortrait",parseInt(t),!0);break;case"showFieldDesktopLandscape":this.store(!1,"desktopLandscape",parseInt(t),!0);break;case"showFieldTabletPortrait":this.store(!1,"tabletPortrait",parseInt(t),!0);break;case"showFieldTabletLandscape":this.store(!1,"tabletLandscape",parseInt(t),!0);break;case"showFieldMobilePortrait":this.store(!1,"mobilePortrait",parseInt(t),!0);break;case"showFieldMobileLandscape":this.store(!1,"mobileLandscape",parseInt(t),!0)}"manager"!=i&&this.$.trigger("propertyChanged",[e,t])},n.prototype.render=function(e,t){this["_sync"+e](t)},n.prototype.renderWithModifier=function(e,t,i){"width"!=e&&"height"!=e||!this.isDimensionPropertyAccepted(t)?this["_sync"+e](Math.round(t*i)):this["_sync"+e](t)},n.prototype._syncclass=function(e){this.layer.removeClass(),this.layer.addClass("n2-ss-layer"),e&&""!=e&&this.layer.addClass(e)},n.prototype._syncid=function(e){e&&""!=e?this.layer.attr("id",e):this.layer.removeAttr("id")},n.prototype.subscribeParent=function(){var e=this;this.subscribeParentCallbacks={LayerResized:function(){e.resizeParent.apply(e,arguments)},LayerParent:function(){e.layer.addClass("n2-ss-layer-parent"),e.layer.triggerHandler("LayerParent")},LayerUnParent:function(){e.layer.removeClass("n2-ss-layer-parent"),e.layer.triggerHandler("LayerUnParent")},LayerDeleted:function(t,i,s){i?e["delete"](i,s):e.setProperty("parentid","","layer")},LayerDuplicated:function(t,i,s){e.duplicate(!1,i,s)},LayerShowChange:function(t,i,s){e.getMode()==i&&(e.parentIsVisible=s)},"n2-ss-activate":function(){e.layerRow.addClass("n2-parent-active")},"n2-ss-deactivate":function(){e.layerRow.removeClass("n2-parent-active")},LayerGetDataWithChildren:function(t,i){e.getDataWithChildren(i)}},this.parent=n2("#"+this.property.parentid).on(this.subscribeParentCallbacks),this.layer.addClass("n2-ss-layer-has-parent")},n.prototype.unSubscribeParent=function(e){if(this.layerRow.removeClass("n2-parent-active"),this.layer.removeClass("n2-ss-layer-has-parent"),this.parent&&this.parent.off(this.subscribeParentCallbacks),this.parent=!1,this.subscribeParentCallbacks={},!e){var t=this.layer.position();this.setPosition(t.left,t.top)}},n.prototype.unlink=function(e){e&&e.preventDefault(),this.setProperty("parentid","","layer")},n.prototype.parentPicked=function(e,t,i,s,n){this.setProperty("parentid","","layer"),this.setProperty("align",s,"layer"),this.setProperty("valign",n,"layer"),this.setProperty("parentalign",t,"layer"),this.setProperty("parentvalign",i,"layer"),this.setProperty("parentid",e.requestID(),"layer");var r;for(var a in this.deviceProperty)"desktopPortrait"!=a&&(this.deviceProperty[a].left=r,this.deviceProperty[a].top=r,this.deviceProperty[a].valign=r,this.deviceProperty[a].align=r)},n.prototype._syncparentid=function(e){e&&""!=e?0==t("#"+e).length?this.setProperty("parentid","","layer"):(this.layer.attr("data-parentid",e).addClass("n2-ss-layer-has-parent"),this.subscribeParent(),this.setPosition(this.layer.position().left,this.layer.position().top)):(this.layer.removeAttr("data-parentid"),this.unSubscribeParent(!1))},n.prototype._syncparentalign=function(e){this.layer.data("parentalign",e);var t=this.getParent();t&&t._resize(!1)},n.prototype._syncparentvalign=function(e){this.layer.data("parentvalign",e);var t=this.getParent();t&&t._resize(!1)},n.prototype._syncinneralign=function(e){this.layer.css("text-align",e)},n.prototype._synccrop=function(e){"auto"==e&&(e="hidden");var i=this.layer.find("> .n2-ss-layer-mask");if("mask"==e){if(e="hidden",!i.length){i=t("<div class='n2-ss-layer-mask'></div>").appendTo(this.layer);var s=this.layer.find(".n2-ss-layer-rotation");if(s.length)s.appendTo(i);else for(var n=0;n<this.items.length;n++)i.append(this.items[n].item)}}else if(i.length){var s=this.layer.find(".n2-ss-layer-rotation");if(s.length)s.appendTo(this.layer);else for(var n=0;n<this.items.length;n++)this.layer.append(this.items[n].item);i.remove()}this.layer.css("overflow",e)},n.prototype._syncrotation=function(e){var i=this.layer.find(".n2-ss-layer-rotation");if(0!=e){if(!i.length){i=t("<div class='n2-ss-layer-rotation'></div>").appendTo(this.layer.find(".n2-ss-layer-mask").addBack().last());for(var s=0;s<this.items.length;s++)i.append(this.items[s].item)}NextendTween.set(i[0],{rotationZ:e}),this.layer.data("rotation",e)}else{if(i.length){for(var s=0;s<this.items.length;s++)this.layer.find(".n2-ss-layer-mask").addBack().last().append(this.items[s].item);i.remove()}else NextendTween.set(i,{rotationZ:0});this.layer.data("rotation",0)}},n.prototype._syncparallax=function(e){},n.prototype._syncalign=function(e,t){"undefined"!==t&&e!=t&&this.setPosition(this.layer.position().left,this.layer.position().top),this.layer.attr("data-align",e)},n.prototype._syncvalign=function(e,t){"undefined"!==t&&e!=t&&this.setPosition(this.layer.position().left,this.layer.position().top),this.layer.attr("data-valign",e)},n.prototype._syncfontsize=function(e){this.adjustFontSize(this.getProperty(!1,"adaptivefont"),e,!0)},n.prototype._syncadaptivefont=function(e){this.adjustFontSize(e,this.getProperty(!0,"fontsize"),!0)},n.prototype.adjustFontSize=function(e,t,i){t=parseInt(t),parseInt(e)?this.layer.css("font-size",nextend.smartSlider.frontend.sliderElement.data("fontsize")*t/100+"px"):100!=t?this.layer.css("font-size",t+"%"):this.layer.css("font-size",""),i&&this.update()},n.prototype._syncgeneratorvisible=function(e){},n.prototype._syncleft=function(e){if(this.parent&&this.parentIsVisible){var t=this.parent.position(),i=this.getProperty(!0,"align"),s=this.getProperty(!0,"parentalign"),n=0;switch(s){case"right":n=t.left+this.parent.width();break;case"center":n=t.left+this.parent.width()/2;break;default:n=t.left}switch(i){case"right":this.layer.css({left:"auto",right:this.layer.parent().width()-n-e+"px"});break;case"center":this.layer.css({left:n+e-this.layer.width()/2+"px",right:"auto"});break;default:this.layer.css({left:n+e+"px",right:"auto"})}}else switch(this.getProperty(!0,"align")){case"right":this.layer.css({left:"auto",right:-e+"px"});break;case"center":this.layer.css({left:this.layer.parent().width()/2+e-this.layer.width()/2+"px",right:"auto"});break;default:this.layer.css({left:e+"px",right:"auto"})}this.triggerLayerResized()},n.prototype._synctop=function(e){if(this.parent&&this.parentIsVisible){var t=this.parent.position(),i=this.getProperty(!0,"valign"),s=this.getProperty(!0,"parentvalign"),n=0;switch(s){case"bottom":n=t.top+this.parent.height();break;case"middle":n=t.top+this.parent.height()/2;break;default:n=t.top}switch(i){case"bottom":this.layer.css({top:"auto",bottom:this.layer.parent().height()-n-e+"px"});break;case"middle":this.layer.css({top:n+e-this.layer.height()/2+"px",bottom:"auto"});break;default:this.layer.css({top:n+e+"px",bottom:"auto"})}}else switch(this.getProperty(!0,"valign")){case"bottom":this.layer.css({top:"auto",bottom:-e+"px"});break;case"middle":this.layer.css({top:this.layer.parent().height()/2+e-this.layer.height()/2+"px",bottom:"auto"});break;default:this.layer.css({top:e+"px",bottom:"auto"})}this.triggerLayerResized()},n.prototype._syncresponsiveposition=function(e){this._resize(!1)},n.prototype._syncwidth=function(e){this.layer.css("width",e+(this.isDimensionPropertyAccepted(e)?"":"px"))},n.prototype._syncheight=function(e){this.layer.css("height",e+(this.isDimensionPropertyAccepted(e)?"":"px"))},n.prototype._syncresponsivesize=function(e){this._resize(!1)},n.prototype._syncdesktopPortrait=function(e){this.__syncShowOnDevice("desktopPortrait",e)},n.prototype._syncdesktopLandscape=function(e){this.__syncShowOnDevice("desktopLandscape",e)},n.prototype._synctabletPortrait=function(e){this.__syncShowOnDevice("tabletPortrait",e)},n.prototype._synctabletLandscape=function(e){this.__syncShowOnDevice("tabletLandscape",e)},n.prototype._syncmobilePortrait=function(e){this.__syncShowOnDevice("mobilePortrait",e)},n.prototype._syncmobileLandscape=function(e){this.__syncShowOnDevice("mobileLandscape",e)},n.prototype.__syncShowOnDevice=function(e,t){if(this.getMode()==e){var t=parseInt(t);t?this._show():this._hide(),this.layer.triggerHandler("LayerShowChange",[e,t]),this.triggerLayerResized()}},n.prototype._syncmouseenter=n.prototype._syncclick=n.prototype._syncmouseleave=n.prototype._syncplay=n.prototype._syncpause=n.prototype._syncstop=function(){},n.prototype.___makeLayerAlign=function(){t('<div class="n2-ss-layer-border" />').prependTo(this.layer),this.alignMarker=t('<div class="n2-ss-layer-cc" />').appendTo(this.layer)},n.prototype.___makeLayerResizeable=function(){this._resizableJustClick=!1,this.layer.nextendResizable({handles:"n, e, s, w, ne, se, sw, nw",_containment:this.layerEditor.layerContainerElement,start:t.proxy(this.____makeLayerResizeableStart,this),resize:t.proxy(this.____makeLayerResizeableResize,this),stop:t.proxy(this.____makeLayerResizeableStop,this),create:t.proxy(function(){this.layer.find(".ui-resizable-handle, .n2-ss-layer-cc").on({mousedown:t.proxy(function(e){this._resizableJustClick=[e.clientX,e.clientY]},this),mouseup:t.proxy(function(e){if(this._resizableJustClick&&Math.abs(Math.sqrt(Math.pow(this._resizableJustClick[0]-e.clientX,2)+Math.pow(this._resizableJustClick[1]-e.clientY,2)))<1){$target=t(e.currentTarget);var i=this.layerEditor.sidebar.layerFeatures;$target.hasClass("ui-resizable-nw")?(i.horizontalAlign("left",!1),i.verticalAlign("top",!1)):$target.hasClass("ui-resizable-w")?(i.horizontalAlign("left",!1),i.verticalAlign("middle",!1)):$target.hasClass("ui-resizable-sw")?(i.horizontalAlign("left",!1),i.verticalAlign("bottom",!1)):$target.hasClass("ui-resizable-n")?(i.horizontalAlign("center",!1),i.verticalAlign("top",!1)):$target.hasClass("n2-ss-layer-cc")?(i.horizontalAlign("center",!1),i.verticalAlign("middle",!1)):$target.hasClass("ui-resizable-s")?(i.horizontalAlign("center",!1),i.verticalAlign("bottom",!1)):$target.hasClass("ui-resizable-ne")?(i.horizontalAlign("right",!1),i.verticalAlign("top",!1)):$target.hasClass("ui-resizable-e")?(i.horizontalAlign("right",!1),i.verticalAlign("middle",!1)):$target.hasClass("ui-resizable-se")&&(i.horizontalAlign("right",!1),i.verticalAlign("bottom",!1))}this._resizableJustClick=!1},this)})},this),smartguides:t.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this),tolerance:5}).on({mousedown:t.proxy(function(e){!this.status!=h.LOCKED&&this.layerEditor.positionDisplay.css({left:e.pageX+10,top:e.pageY+10}).html("W: "+parseInt(this.layer.width())+"px<br />H: "+parseInt(this.layer.height())+"px").addClass("n2-active"),document.activeElement&&document.activeElement.blur()},this),mouseup:t.proxy(function(e){this.layerEditor.positionDisplay.removeClass("n2-active")},this)})},n.prototype.____makeLayerResizeableStart=function(e,i){a=!0,this.resizableDeferred=t.Deferred(),this.layerEditor.panel.hideWithDeferred(this.resizableDeferred),t("body").addClass("n2-ss-resize-layer"),this._resizableJustClick&&(this._resizableJustClick=!1),this.____makeLayerResizeableResize(e,i),this.layerEditor.positionDisplay.addClass("n2-active")},n.prototype.____makeLayerResizeableResize=function(e,t){this.layerEditor.positionDisplay.css({left:e.pageX+10,top:e.pageY+10}).html("W: "+t.size.width+"px<br />H: "+t.size.height+"px"),this.triggerLayerResized()},n.prototype.____makeLayerResizeableStop=function(e,i){window.nextendPreventClick=!0,setTimeout(function(){window.nextendPreventClick=!1},50),t("body").removeClass("n2-ss-resize-layer"),this.resizableDeferred.resolve();var s=!1;if(i.originalSize.width==i.size.width){var n=this.getProperty(!0,"width");this.isDimensionPropertyAccepted(n)&&(s=!0,this._syncwidth(n))}var r=!1;if(i.originalSize.height==i.size.height){var n=this.getProperty(!0,"height");this.isDimensionPropertyAccepted(n)&&(r=!0,this._syncheight(n))}this.setPosition(i.position.left,i.position.top);var o=this.layerEditor.getResponsiveRatio("h"),l=this.layerEditor.getResponsiveRatio("v");if(parseInt(this.getProperty(!1,"responsivesize"))||(o=l=1),!s){var d=Math.round(i.size.width*(1/o));this.storeWithModifier("width",d,o,!1),this.$.trigger("propertyChanged",["width",d])}if(!r){var d=Math.round(i.size.height*(1/l));this.storeWithModifier("height",d,l,!1),this.$.trigger("propertyChanged",["height",d])}this.triggerLayerResized(),this.layer.triggerHandler("LayerUnParent"),this.layerEditor.positionDisplay.removeClass("n2-active"),setTimeout(function(){a=!1},80)},n.prototype.___makeLayerDraggable=function(){this.layer.nextenddraggable({_containment:this.layerEditor.layerContainerElement,start:t.proxy(this.____makeLayerDraggableStart,this),drag:t.proxy(this.____makeLayerDraggableDrag,this),stop:t.proxy(this.____makeLayerDraggableStop,this),smartguides:t.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this),tolerance:5})},n.prototype.____makeLayerDraggableStart=function(e,i){a=!0,this.draggableDeferred=t.Deferred(),this.layerEditor.panel.hideWithDeferred(this.draggableDeferred),t("body").addClass("n2-ss-move-layer"),this.layerEditor.draggableStart(i),this.____makeLayerDraggableDrag(e,i),this.layerEditor.positionDisplay.addClass("n2-active");var s=this.getProperty(!0,"width");this.isDimensionPropertyAccepted(s)&&this.layer.width(this.layer.width()+.5);var s=this.getProperty(!0,"height");this.isDimensionPropertyAccepted(s)&&this._syncheight(s)},n.prototype.____makeLayerDraggableDrag=function(e,t){this.layerEditor.positionDisplay.css({left:e.pageX+10,top:e.pageY+10}).html("L: "+parseInt(0|t.position.left)+"px<br />T: "+parseInt(0|t.position.top)+"px"),this.triggerLayerResized(),this.layerEditor.draggableDrag(t)},n.prototype.____makeLayerDraggableStop=function(e,i){window.nextendPreventClick=!0,setTimeout(function(){window.nextendPreventClick=!1},50),t("body").removeClass("n2-ss-move-layer"),this.draggableDeferred.resolve(),this.setPosition(i.position.left,i.position.top);var s=this.getProperty(!0,"width");this.isDimensionPropertyAccepted(s)&&this._syncwidth(s);var s=this.getProperty(!0,"height");this.isDimensionPropertyAccepted(s)&&this._syncheight(s),this.triggerLayerResized(),this.layer.triggerHandler("LayerUnParent"),this.layerEditor.positionDisplay.removeClass("n2-active");var n=this.layerEditor.draggableStop(i);n?setTimeout(function(){a=!1},80):(a=!1,this.activate(e))},n.prototype.moveX=function(e){this.setDeviceBasedAlign(),this.setProperty("left",this.getProperty(!0,"left")+e,"layer"),this.triggerLayerResized()},n.prototype.moveY=function(e){this.setDeviceBasedAlign(),this.setProperty("top",this.getProperty(!0,"top")+e,"layer"),this.triggerLayerResized()},n.prototype.setPosition=function(e,t){var i=this.layerEditor.getResponsiveRatio("h"),s=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsiveposition"))||(i=s=1),this.setDeviceBasedAlign();var n=this.parent,r={left:0,leftMultiplier:1,top:0,topMultiplier:1};if(n&&n.is(":visible")){var a=n.position();switch(this.getProperty(!0,"parentalign")){case"right":r.left=a.left+n.width();break;case"center":r.left=a.left+n.width()/2;break;default:r.left=a.left}switch(this.getProperty(!0,"parentvalign")){case"bottom":r.top=a.top+n.height();break;case"middle":r.top=a.top+n.height()/2;break;default:r.top=a.top}}else{switch(n=this.layer.parent(),this.getProperty(!0,"align")){case"center":r.left+=n.width()/2;break;case"right":r.left+=n.width()}switch(this.getProperty(!0,"valign")){case"middle":r.top+=n.height()/2;break;case"bottom":r.top+=n.height()}}var e,o=!1;switch(this.getProperty(!0,"align")){case"left":e=-Math.round((r.left-e)*(1/i));break;case"center":e=-Math.round((r.left-e-this.layer.width()/2)*(1/i));break;case"right":e=-Math.round((r.left-e-this.layer.width())*(1/i)),o=!0}this.storeWithModifier("left",e,i,o),this.$.trigger("propertyChanged",["left",e]);var t,o=!1;switch(this.getProperty(!0,"valign")){case"top":t=-Math.round((r.top-t)*(1/s));break;case"middle":t=-Math.round((r.top-t-this.layer.height()/2)*(1/s));break;case"bottom":t=-Math.round((r.top-t-this.layer.height())*(1/s)),o=!0}this.storeWithModifier("top",t,s,o),this.$.trigger("propertyChanged",["top",t])},n.prototype.setDeviceBasedAlign=function(){var e=this.getMode();"undefined"==typeof this.deviceProperty[e].align&&this.setProperty("align",this.getProperty(!0,"align"),"layer"),"undefined"==typeof this.deviceProperty[e].valign&&this.setProperty("valign",this.getProperty(!0,"valign"),"layer")},n.prototype.snap=function(){this.layer.nextendResizable("option","smartguides",t.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this)),this.layer.nextenddraggable("option","smartguides",t.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this))},n.prototype.changeEditorMode=function(e){var t=parseInt(this.property[e]);t?this._show():this._hide(),this.layer.triggerHandler("LayerShowChange",[e,t]),this._renderModeProperties(!1)},n.prototype.resetMode=function(i,s){if("desktopPortrait"!=i){var n;e.history.add(t.proxy(function(){return[this,"resetMode","reset","restore",[i,t.extend({},this.deviceProperty[i])]]},this));for(var r in this.property)this.deviceProperty[i][r]=n;i==s&&this._renderModeProperties(!0)}},n.prototype.restoreMode=function(e,i,s){"desktopPortrait"!=e&&(this.deviceProperty[e]=t.extend({},s),e==i&&this._renderModeProperties(!0))},n.prototype._renderModeProperties=function(e){for(var t in this.property)this.property[t]=this.getProperty(!0,t),this.$.trigger("propertyChanged",[t,this.property[t]]);var i=this.getProperty(!0,"fontsize");this.adjustFontSize(this.getProperty(!1,"adaptivefont"),i,!1),this.layer.attr("data-align",this.property.align),this.layer.attr("data-valign",this.property.valign),e&&this._resize(!0)},n.prototype.copyMode=function(e,i){e!=i&&(this.deviceProperty[i]=t.extend({},this.deviceProperty[i],this.deviceProperty[e]))},n.prototype._resize=function(e){this.resize({slideW:this.layerEditor.getResponsiveRatio("h"),slideH:this.layerEditor.getResponsiveRatio("v")},e)},n.prototype.doLinearResize=function(e){this.doThrottledTheResize(e,!0)},n.prototype.resize=function(e,t){this.parent&&!t||this.addToResizeCollection(this,e,!1)},n.prototype.doTheResize=function(e,t,i){var s=e.slideW,n=s,r=e.slideH,a=r;parseInt(this.getProperty(!1,"responsivesize"))||(n=a=1),this.renderWithModifier("width",this.getProperty(!0,"width"),n),this.renderWithModifier("height",this.getProperty(!0,"height"),a),parseInt(this.getProperty(!1,"responsiveposition"))||(s=r=1),this.renderWithModifier("left",this.getProperty(!0,"left"),s),this.renderWithModifier("top",this.getProperty(!0,"top"),r),t||this.triggerLayerResized(i,e)},n.prototype.resizeParent=function(e,t,i){this.addToResizeCollection(this,t,i)},n.prototype.addToResizeCollection=function(e,t,i){l.ratios=t,l.isThrottled=i;for(var s=0;s<l.layers.length;s++)if(l.layers[s]==this){l.layers.splice(s,1);break}l.layers.push(e),d(),this.triggerLayerResized(i,t)},n.prototype.update=function(){var e=this.parent;if("center"==this.getProperty(!0,"align")){var t=0;t=e?e.position().left+e.width()/2:this.layer.parent().width()/2;var i=this.layerEditor.getResponsiveRatio("h");parseInt(this.getProperty(!1,"responsiveposition"))||(i=1),this.layer.css("left",t-this.layer.width()/2+this.getProperty(!0,"left")*i)}if("middle"==this.getProperty(!0,"valign")){var s=0;s=e?e.position().top+e.height()/2:this.layer.parent().height()/2;var i=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsiveposition"))||(i=1),this.layer.css("top",s-this.layer.height()/2+this.getProperty(!0,"top")*i)}this.triggerLayerResized()},n.prototype.triggerLayerResized=function(e,t){e?this._triggerLayerResized(e,t):this._triggerLayerResizedThrottled(!0,t)},n.prototype._triggerLayerResized=function(e,t){this.isDeleted||this.layer.triggerHandler("LayerResized",[t||{slideW:this.layerEditor.getResponsiveRatio("h"),slideH:this.layerEditor.getResponsiveRatio("v")},e||!1])},n.prototype.getStyleText=function(){var e="",t=this.property.crop;return"auto"!=t&&"mask"!=t||(t="hidden"),e+="overflow:"+t+";",e+="text-align:"+this.property.inneralign+";"},n.prototype.nextLayer=function(){var e=this.zIndex-1;0>e||"undefined"==typeof this.group.zIndexList[e]?this.group.nextLayer():this.group.zIndexList[e].activate()},n.prototype.previousLayer=function(){var e=this.zIndex+1;e>this.group.zIndexList.length-1||"undefined"==typeof this.group.zIndexList[e]?this.group.previousLayer():this.group.zIndexList[e].activate()},n.prototype.history=function(i,s,n,r){switch(NextendSmartSliderLayerDataStorageAbtract.prototype.history.apply(this,arguments),i){case"addLayer":switch(s){case"add":var a=n[0],o=t.extend(!0,{},n[1]);this.layerEditor._zIndexOffset=-1,this.layerEditor._idTranslation={};var l=this.layerEditor.loadSingleData(o,a);e.history.changeFuture(this,l),e.history.changeFuture(this.items[0],l.items[0]),this.group.reIndexLayers(),this.layerEditor.refreshMode();break;case"delete":this["delete"]()}break;case"createLayer":switch(s){case"add":var a=n[0],o=t.extend(!0,{},n[1]);this.layerEditor._zIndexOffset=-1,this.layerEditor._idTranslation={};var l=this.layerEditor.loadSingleData(o,a);e.history.changeFuture(this,l),e.history.changeFuture(this.items[0],l.items[0]),this.group.reIndexLayers(),this.layerEditor.refreshMode();break;case"delete":this["delete"]()}break;case"duplicateLayer":switch(s){case"duplicate":var d=[];this.duplicate(!0,!1,d);for(var h=0;h<d.length;h++)e.history.changeFuture(r.oldLayers[h],d[h]),e.history.changeFuture(r.oldLayers[h].items[0],d[h].items[0]);r.oldLayers=[];break;case"delete":var p=[];n[0]["delete"](!0,p),r.oldLayers=p}break;case"deleteLayer":switch(s){case"create":var a=n[0],o=t.extend(!0,{},n[1]);this.layerEditor._zIndexOffset=-1,this.layerEditor._idTranslation={};var l=this.layerEditor.loadSingleData(o,a);e.history.changeFuture(this,l),e.history.changeFuture(this.items[0],l.items[0]),a.reIndexLayers(),this.layerEditor.refreshMode();break;case"delete":this["delete"]()}break;case"storeAnimations":break;case"resetMode":switch(s){case"reset":this.resetMode(n[0],this.layerEditor.getMode());break;case"restore":this.restoreMode(n[0],this.layerEditor.getMode(),n[1])}}},n.prototype.updateAnimations=function(){},n.prototype._sortZIndex=function(e){return e.group==this.group?this.zIndex>=e.zIndex:e.group instanceof NextendSmartSliderLayerGroup&&this.group instanceof NextendSmartSliderLayerGroup?this.group.zIndex>=e.group.zIndex:e.group instanceof NextendSmartSliderLayerGroup?this.zIndex>=e.group.zIndex:this.group instanceof NextendSmartSliderLayerGroup?this.group.zIndex>=e.zIndex:this.zIndex>=e.zIndex},i.NextendSmartSliderLayer=n}(nextend.smartSlider,n2,window),function(e,t,i,s){function n(e,t){var i=parseFloat(e);return isNaN(i)?t:i}function r(i,s,r,a){a||(a={}),this.isMainGroup=!1,this.isDeleted=!1,this.opened=!0,r?(this.layer=r,this.property=t.extend({name:"Group",parallax:0,fontsize:100,adaptivefont:0,generatorvisible:"",desktopPortrait:1,desktopLandscape:1,tabletPortrait:1,tabletLandscape:1,mobilePortrait:1,mobileLandscape:1},{name:this.layer.data("name")+"",parallax:this.layer.data("parallax"),fontsize:this.layer.data("desktopportraitfontsize"),adaptivefont:this.layer.data("adaptivefont"),generatorvisible:this.layer.data("generatorvisible")||"",desktopPortrait:n(this.layer.data("desktopportrait"),1),desktopLandscape:n(this.layer.data("desktoplandscape"),1),tabletPortrait:n(this.layer.data("tabletportrait"),1),tabletLandscape:n(this.layer.data("tabletlandscape"),1),mobilePortrait:n(this.layer.data("mobileportrait"),1),mobileLandscape:n(this.layer.data("mobilelandscape"),1)}),this.property.name.length||(this.property.name="Group")):(this.layer=!1,"undefined"!=typeof a.data?this.property={name:a.data.name,fontsize:a.data.fontsize,adaptivefont:a.data.adaptivefont,generatorvisible:a.data.generatorvisible,desktopPortrait:a.data.desktopportrait,desktopLandscape:a.data.desktoplandscape,tabletPortrait:a.data.tabletportrait,tabletLandscape:a.data.tabletlandscape,mobilePortrait:a.data.mobileportrait,mobileLandscape:a.data.mobilelandscape}:this.property={name:"Group",fontsize:100,adaptivefont:0,generatorvisible:"",desktopPortrait:1,desktopLandscape:1,
tabletPortrait:1,tabletLandscape:1,mobilePortrait:1,mobileLandscape:1}),NextendSmartSliderLayerContainerAbstract.prototype.constructor.call(this,i,s);var o=this.layer.data("opened");if(null!==o&&"undefined"!=typeof o&&(this.opened=!!o),this.deviceProperty={desktopPortrait:{fontsize:this.property.fontsize},desktopLandscape:{fontsize:this.layer.data("desktoplandscapefontsize")},tabletPortrait:{fontsize:this.layer.data("tabletportraitfontsize")},tabletLandscape:{fontsize:this.layer.data("tabletlandscapefontsize")},mobilePortrait:{fontsize:this.layer.data("mobileportraitfontsize")},mobileLandscape:{fontsize:this.layer.data("mobilelandscapefontsize")}},this.layerEditor.$.trigger("layerCreated",this),t(window).triggerHandler("layerCreated"),i.layerList.push(this),this._opened(),"undefined"!=typeof a.layers){for(var l=e.history.add(t.proxy(function(){return[this,"createGroup","create","delete",[]]},this)),d=[],h=0;h<a.layers.length;h++)d.push(this.layerEditor.loadSingleData(a.layers[h],this.layerEditor.mainLayerGroup));this.groupLayersStartAndLateInit(d),l[4].push(this.zIndex)}}var a=!1;r.prototype=Object.create(NextendSmartSliderLayerContainerAbstract.prototype),r.prototype.constructor=r;for(var o in NextendSmartSliderLayerDataStorageAbtract.prototype)r.prototype[o]=NextendSmartSliderLayerDataStorageAbtract.prototype[o];r.prototype.groupLayersStartAndLateInit=function(i){for(var s=0,n=0,r=0;r<i.length;r++)i[r].group==this.layerEditor.mainLayerGroup&&(s=Math.max(s,i[r].zIndex),n++);isNaN(s)&&(s=0);for(var r=0;r<i.length;r++)e.history.add(t.proxy(function(e,t,i){return[this,"changeZIndexWithContainer",[e,r,t,this],[e,i,this,t],[]]},this,i[r],i[r].group,i[r].zIndex)),this.addLayerBeforeInit(i[r],r);this.lateInit(s,n)},r.prototype.createLayer=function(){this.layer||(this.layer=t('<div class="n2-ss-layer-group" style="z-index: '+this.group.zIndexList.length+';"></div>').appendTo(this.group.layerContainerElement))},r.prototype.createLayerRow=function(){var e=300,i=null;this.selectElement=t('<a href="#" class="n2-ss-layer-list-selector"><i class="n2-i n2-i-select"></i></a>').on("click",t.proxy(function(e){e.preventDefault(),this.select()},this));var s=t('<div class="n2-button n2-button-icon n2-button-m n2-button-m-narrow" data-n2tip="'+n2_("Delete layer")+'"><i class="n2-i n2-i-delete n2-i-grey-opacity"></i></div>').on("click",t.proxy(this["delete"],this)),n=t('<div class="n2-button n2-button-icon n2-button-m n2-button-m-narrow" data-n2tip="'+n2_("Duplicate layer")+'"><i class="n2-i n2-i-duplicate n2-i-grey-opacity"></i></div>').on("click",t.proxy(function(){this.duplicate(!0,!1)},this));this.openerElement=t('<a href="#" class="n2-button n2-button-icon n2-button-m n2-ss-layer-list-group-opener" onclick="return false;"><i class="n2-i n2-i-folderopened"></i></a>').on("click",t.proxy(this.switchOpened,this)),this.layerRow=t('<li class="n2-ss-layer-row n2-ss-layer-group-row"></li>').data("layer",this).appendTo(this.group.layersItemsUlElement),this.layerTitleSpan=t('<span class="n2-ucf">'+this.property.name+"</span>").on({mouseup:t.proxy(function(s){i?(clearTimeout(i),i=null,this.editName()):(this.activate(s),i=setTimeout(t.proxy(function(){i=null},this),e))},this)}),this.layerTitle=t('<div class="n2-ss-layer-title"></div>').append(this.layerTitleSpan).append(t('<div class="n2-actions-left"></div>').append(this.openerElement)).append(t('<div class="n2-actions"></div>').append(n).append(s)).appendTo(this.layerRow).on({mouseup:t.proxy(function(e){"DIV"===e.target.tagName&&this.activate(e)},this)}),this.layersItemsUlElement=t('<ul class="n2-list n2-h4 n2-list-orderable" />').data("container",this),nextend.tooltip.add(this.layerRow)},r.prototype.switchOpened=function(){this.opened=!this.opened,this._opened()},r.prototype._opened=function(){this.opened?(this.openerElement.removeClass("n2-closed"),this.layersItemsUlElement.css("display",""),this.layer.triggerHandler("opened")):(this.openerElement.addClass("n2-closed"),this.layersItemsUlElement.css("display","none"),this.layerEditor.$.trigger("groupHidden",this),this.layer.triggerHandler("closed"))},r.prototype.setZIndex=function(e){this.zIndex=e,this.layer.css("zIndex",e),this.group.layersItemsUlElement.append(this.layerRow),this.$.trigger("layerIndexed",e)},r.prototype.editName=function(){var e=new NextendSmartSliderAdminInlineField;e.$input.on({valueChanged:t.proxy(function(e,t){this.rename(t,!0),this.layerTitleSpan.css("display","inline")},this),cancel:t.proxy(function(){this.layerTitleSpan.css("display","inline")},this)}),this.layerTitleSpan.css("display","none"),e.injectNode(this.layerTitle,this.property.name)},r.prototype.rename=function(e){""==e&&(e="GROUP"),e=e.substr(0,35),this.property.name!=e&&(this.property.name=e,this.layerTitleSpan.html(e))},r.prototype.getData=function(e){var t={type:"group",zIndex:this.zIndex,layers:[],opened:this.opened};if(e.layersIncluded)for(var i=0;i<this.zIndexList.length;i++)t.layers.push(this.zIndexList[i].getData(e));for(var s in this.property)switch(s){case"fontsize":break;default:t[s.toLowerCase()]=this.property[s]}for(var n in this.deviceProperty)for(var r in this.deviceProperty[n]){var a=this.deviceProperty[n][r];"undefined"!=typeof a&&("width"==r&&this.isDimensionPropertyAccepted(a)||"height"==r&&this.isDimensionPropertyAccepted(a)||"align"==r||"valign"==r||"parentalign"==r||"parentvalign"==r||(a=parseFloat(a)),t[n.toLowerCase()+r]=a)}return t},r.prototype.positionSidebar=function(){this.layerEditor.panel.show(this,t("#n2-ss-layer-list"))},r.prototype.activate=function(e,t){if(!a){if(document.activeElement&&document.activeElement.blur(),e&&(e.ctrlKey||e.metaKey))return void this.select();if(!e||3!=e.which){t||this.layerEditor.exitSelectMode(),e&&this.positionSidebar();var i=this.getIndex();if(this.layerEditor.activeLayerIndex!==i){this.layerRow.addClass("n2-active"),this.layer.triggerHandler("n2-ss-activate"),this.layerEditor.changeActiveLayer(i,t),nextend.activeLayer=this.layer;var s=this.layerEditor.mainLayerGroup.layersItemsUlElement.parent(),n=s.scrollTop(),r=this.layerRow.get(0).offsetTop;(n>r||r>n+s.height()-this.layerRow.height())&&s.scrollTop(r)}this.layerEditor.startSelection(!0),this.layerEditor.addSelection(this.layers,!0)}}},r.prototype.deActivate=function(){this.layerEditor.endSelection(!0),this.layerRow.removeClass("n2-active"),this.layer.triggerHandler("n2-ss-deactivate")},r.prototype.select=function(){this.layerEditor.selectLayer(this,!1),this.layerEditor.addSelection(this.layers,!1)},r.prototype.getIndex=function(){return this.layerEditor.layerList.indexOf(this)},r.prototype.nextLayer=function(){var e=this.zIndex-1;if(0>e||"undefined"==typeof this.group.zIndexList[e])this.group.nextLayer();else{var t=this.group.zIndexList[e];t.activate()}},r.prototype.previousLayer=function(){var e=this.zIndex+1;if(e>this.zIndexList.length-1||"undefined"==typeof this.group.zIndexList[e])this.group.previousLayer();else{var t=this.group.zIndexList[e];t.activate()}},r.prototype.dispatchActionToChildren=function(e,t){for(var i=0;i<this.layers.length;i++)this.layers[i][e].apply(this.layers[i],t)},r.prototype.snap=function(){},r.prototype["delete"]=function(){this.layerEditor.getSelectedLayer()==this&&this.layerEditor.panel.hide(),this.deActivate();for(var i=t.extend([],this.layers),s=0;s<i.length;s++)i[s]["delete"]();e.history.add(t.proxy(function(){return[this,"deleteGroup","delete","create",[this.getData({layersIncluded:!1,itemsIncluded:!1})]]},this)),this.group.childDeleted(this),this.layer.trigger("mouseup"),this.isDeleted=!0,this.layerEditor.layerDeleted(this.getIndex()),this.layer.triggerHandler("LayerDeleted"),this.layer.remove(),this.layerRow.remove(),this.$.trigger("layerDeleted"),delete this.layer},r.prototype.duplicate=function(e,t){this.layerEditor.loadData([this.getData({layersIncluded:!0,itemsIncluded:!0})],!1)},r.prototype._syncparallax=function(e){},r.prototype._syncfontsize=function(e){this.adjustFontSize(this.getProperty(!1,"adaptivefont"),e,!0)},r.prototype._syncadaptivefont=function(e){this.adjustFontSize(e,this.getProperty(!0,"fontsize"),!0)},r.prototype.adjustFontSize=function(e,t,i){t=parseInt(t),parseInt(e)?this.layer.css("font-size",nextend.smartSlider.frontend.sliderElement.data("fontsize")*t/100+"px"):100!=t?this.layer.css("font-size",t+"%"):this.layer.css("font-size",""),i&&this.update()},r.prototype._syncgeneratorvisible=function(e){},r.prototype._syncdesktopPortrait=function(e){this.__syncShowOnDevice("desktopPortrait",e)},r.prototype._syncdesktopLandscape=function(e){this.__syncShowOnDevice("desktopLandscape",e)},r.prototype._synctabletPortrait=function(e){this.__syncShowOnDevice("tabletPortrait",e)},r.prototype._synctabletLandscape=function(e){this.__syncShowOnDevice("tabletLandscape",e)},r.prototype._syncmobilePortrait=function(e){this.__syncShowOnDevice("mobilePortrait",e)},r.prototype._syncmobileLandscape=function(e){this.__syncShowOnDevice("mobileLandscape",e)},r.prototype.__syncShowOnDevice=function(e,t){if(this.getMode()==e){var t=parseInt(t);t?this._show():this._hide(),this.layer.triggerHandler("LayerShowChange",[e,t])}},r.prototype._hide=function(){this.layer.css("display","none")},r.prototype._show=function(){parseInt(this.property[this.layerEditor.getMode()])&&this.layer.css("display","block"),this.update()},r.prototype.update=function(){for(var e=0;e<this.layers.length;e++)this.layers[e].update()},r.prototype.setProperty=function(e,t,i){switch(e){case"parallax":case"generatorvisible":case"adaptivefont":this.store(!1,e,t,!0);break;case"fontsize":this.store(!0,e,t,!0);break;case"showFieldDesktopPortrait":this.store(!1,"desktopPortrait",parseInt(t),!0);break;case"showFieldDesktopLandscape":this.store(!1,"desktopLandscape",parseInt(t),!0);break;case"showFieldTabletPortrait":this.store(!1,"tabletPortrait",parseInt(t),!0);break;case"showFieldTabletLandscape":this.store(!1,"tabletLandscape",parseInt(t),!0);break;case"showFieldMobilePortrait":this.store(!1,"mobilePortrait",parseInt(t),!0);break;case"showFieldMobileLandscape":this.store(!1,"mobileLandscape",parseInt(t),!0)}"manager"!=i&&this.$.trigger("propertyChanged",[e,t])},r.prototype.changeEditorMode=function(e){var t=parseInt(this.property[e]);t?this._show():this._hide(),this.layer.triggerHandler("LayerShowChange",[e,t]),this._renderModeProperties(!1)},r.prototype._renderModeProperties=function(e){for(var t in this.property)this.property[t]=this.getProperty(!0,t),this.$.trigger("propertyChanged",[t,this.property[t]]);var i=this.getProperty(!0,"fontsize");this.adjustFontSize(this.getProperty(!1,"adaptivefont"),i,!1)},r.prototype.updateAnimations=function(){},r.prototype.showEditor=function(){this.layerEditor.panel._show()},r.prototype.doAction=function(e,i){for(var s=t.extend([],this.zIndexList),n=0;n<s.length;n++)s[n][e].apply(s[n],i)},r.prototype.copyMode=function(e,i){e!=i&&(this.deviceProperty[i]=t.extend({},this.deviceProperty[i],this.deviceProperty[e]))},r.prototype.resetMode=function(e,t){if("desktopPortrait"!=e){var i;for(var s in this.property)this.deviceProperty[e][s]=i;e==t&&this._renderModeProperties(!0)}},r.prototype.restoreMode=function(e,i,s){"desktopPortrait"!=e&&(this.deviceProperty[e]=t.extend({},s),e==i&&this._renderModeProperties(!0))},r.prototype.history=function(e,t,i,s){NextendSmartSliderLayerDataStorageAbtract.prototype.history.apply(this,arguments),NextendSmartSliderLayerContainerAbstract.prototype.history.apply(this,arguments)},i.NextendSmartSliderLayerGroup=r}(nextend.smartSlider,n2,window),function(e,t,i,s){function n(){this.isShown=!t.jStorage.get("ssLayersShown",!1),this.tlHeight=t.jStorage.get("ssLayersHeight")||200,this.$container=t("#n2-ss-layers"),this.fixScroll(),this.switchLayerList(),this.topBar=t(".n2-ss-layer-list-top-bar").on("mousedown",t.proxy(this.resizeStart,this)),this.topBar.find(".n2-ss-layer-list-opener").on("click",t.proxy(function(e){e.preventDefault(),this.switchLayerList()},this)),t(".n2-ss-slide-show-layers").on("click",t.proxy(function(e){e.preventDefault(),this.switchLayerList()},this)),this.onResize(),t(window).on("resize",t.proxy(this.onResize,this))}n.prototype.onResize=function(){var e=this.$container.height();this.paneLeft.height(e-48),this.paneRight.height(e-48)},n.prototype.onActivateLayer=function(e){var t=this.paneLeft.scrollTop(),i=e.layerRow.get(0).offsetTop;(t>i||i>t+this.paneLeft.height()-e.layerRow.height())&&(this.paneLeft.scrollTop(i),this.paneRight.scrollTop(i))},n.prototype.fixScroll=function(){this.paneLeft=t(".n2-ss-layers-sidebar-rows"),this.paneRight=t(".n2-ss-timeline-content-layers-container");var e=t.proxy(function(e){var t=this.paneLeft.scrollTop();e.originalEvent.deltaY>0?t+=40:t-=40,t=40*Math.round(t/40),this.paneLeft.scrollTop(t),this.paneRight.scrollTop(t),e.preventDefault()},this);this.paneLeft.on("mousewheel",e),this.paneLeft.on("scroll",t.proxy(function(e){var t=this.paneLeft.scrollTop();this.paneRight.scrollTop(t),e.preventDefault()},this)),this.paneRight.on("mousewheel",e)},n.prototype.resizeStart=function(e){this.isShown&&(e.target==this.topBar[0]||t(e.target).hasClass("n2-h2"))&&(e.preventDefault(),this.startY=e.clientY,this.height=this.$container.height(),t("body").on({"mousemove.n2-ss-tl-resize":t.proxy(this.resizeMove,this),"mouseup.n2-ss-tl-resize":t.proxy(this.resizeStop,this),"mouseleave.n2-ss-tl-resize":t.proxy(this.resizeStop,this)}))},n.prototype.resizeMove=function(e){e.preventDefault(),this.setTLHeight(this._calculateDesiredHeight(e))},n.prototype.resizeStop=function(e){e.preventDefault(),t("body").off(".n2-ss-tl-resize");var i=this._calculateDesiredHeight(e);this.setTLHeight(i),this.tlHeight=i,t.jStorage.set("ssLayersHeight",i),t("#n2-admin").triggerHandler("resize")},n.prototype._calculateDesiredHeight=function(e){var t=this.startY-e.clientY+this.height-48;return this.__calculateDesiredHeight(t)},n.prototype.__calculateDesiredHeight=function(e){return 40*Math.round(Math.min(Math.max(40,e),(window.innerHeight||document.documentElement.clientHeight)/2)/40)+48},n.prototype.switchLayerList=function(){this.isShown=!this.isShown,this.$container.toggleClass("n2-active",this.isShown),this.isShown?this.setTLHeight(this.tlHeight):this.setTLHeight(48),t.jStorage.set("ssLayersShown",this.isShown)},n.prototype.setTLHeight=function(e){e=Math.max(48,e),this.$container.height(e),e=this.$container.height(),this.paneLeft.height(e-48),this.paneRight.height(e-48),nextend.triggerResize()},n.prototype.activateAdd=function(e,t){this.$add.css({left:e,top:t}).appendTo(this.$container)},window.NextendSmartSliderAdminLayersUserInterface=n}(nextend.smartSlider,n2,window),function(e,t,i,s){function n(e){this.isMainGroup=!0,NextendSmartSliderLayerContainerAbstract.prototype.constructor.call(this,e,!1),this.lateInit(),this.startWithExistingNodes()}n.prototype=Object.create(NextendSmartSliderLayerContainerAbstract.prototype),n.prototype.constructor=n,n.prototype.createLayer=function(){this.layer||(this.layer=this.layerEditor.layerContainerElement)},n.prototype.createLayerRow=function(){this.layersItemsUlElement=this.layerEditor.layersItemsElement.find("ul").data("container",this)},n.prototype.nextLayer=function(){var e=this.zIndexList[this.zIndexList.length-1];e.activate()},n.prototype.previousLayer=function(){var e=this.zIndexList[0];e.activate()},i.NextendSmartSliderMainLayerGroup=n}(nextend.smartSlider,n2,window),function(e,t,i,s){function n(i,s,n,r,a){this.activeLayerIndex=-1,this.snapToEnabled=!0,this.staticSlide=s,this.initSelectMode(),this.$=t(this),e.layerManager=this,this.responsive=e.frontend.responsive,this.panel=new NextendSmartSliderSidebar(this),this.layerList=[],this.layersItemsElement=t("#n2-ss-layer-list"),this.frontendSlideLayers=i,this.frontendSlideLayers.setZero(),this.layerContainerElement=e.$currentSlideElement.find(".n2-ss-layers-container"),this.layerContainerElement.length||(this.layerContainerElement=e.$currentSlideElement),this.layerContainerElement.parent().prepend('<div class="n2-ss-slide-border n2-ss-slide-border-left" /><div class="n2-ss-slide-border n2-ss-slide-border-top" /><div class="n2-ss-slide-border n2-ss-slide-border-right" /><div class="n2-ss-slide-border n2-ss-slide-border-bottom" />'),this.slideSize={width:this.layerContainerElement.width(),height:this.layerContainerElement.height()},e.frontend.sliderElement.on("SliderResize",t.proxy(this.refreshSlideSize,this)),this.sidebar=new NextendSmartSliderAdminSlideSidebarSettings(this),this.ui=new NextendSmartSliderAdminLayersUserInterface(this),e.itemEditor=this.itemEditor=new NextendSmartSliderItemManager(this),this.positionDisplay=t('<div class="n2 n2-ss-position-display"/>').appendTo("body"),this.mainLayerGroup=new NextendSmartSliderMainLayerGroup(this),t("#smartslider-slide-toolbox-layer").on("mouseenter",function(){t("#n2-admin").addClass("smartslider-layer-highlight-active")}).on("mouseleave",function(){t("#n2-admin").removeClass("smartslider-layer-highlight-active")}),this._initDeviceModeChange(),this.initSettings(),this.sidebar.startFeatures();var l=t("#n2-ss-layer-adaptive-font").on("click",t.proxy(function(){this.sidebar.forms.layer.adaptivefont.data("field").onoff.trigger("click")},this));this.sidebar.forms.layer.adaptivefont.on("nextendChange",t.proxy(function(){1==this.sidebar.forms.layer.adaptivefont.val()?l.addClass("n2-active"):l.removeClass("n2-active")},this)),new NextendElementNumber("n2-ss-layer-font-size",-Number.MAX_VALUE,Number.MAX_VALUE),new NextendElementAutocompleteSlider("n2-ss-layer-font-size",{min:50,max:300,step:5});var p=t("#n2-ss-layer-font-size").on("outsideChange",t.proxy(function(){var e=parseInt(p.val());this.sidebar.forms.layer.fontsize.val(e).trigger("change")},this));this.sidebar.forms.layer.fontsize.on("nextendChange",t.proxy(function(){p.data("field").insideChange(this.sidebar.forms.layer.fontsize.val())},this)),t(".n2-ss-slide-duplicate-layer").on("click",t.proxy(function(e){e.preventDefault(),this.duplicate()},this)),t(".n2-ss-slide-delete-layer").on("click",t.proxy(function(e){e.preventDefault(),this["delete"]()},this)),t(window).on({keydown:t.proxy(function(i){if(!("TEXTAREA"==i.target.tagName||"INPUT"==i.target.tagName||e.timelineControl&&e.timelineControl.isActivated())&&-1!=this.activeLayerIndex){var s=i.keyCode;if(s>=49&&57>=s){var n=i.originalEvent.location||i.originalEvent.keyLocation||0;3==n&&(s+=48)}if(46==s||8==s)this["delete"](),i.preventDefault();else if(35==s)this.duplicate(),i.preventDefault();else if(16==s)o[s]=1;else if(38==s){if(!o[s]){var r=t.proxy(function(){this.doActionOnActiveLayer("moveY",[-1*(o[16]?10:1)])},this);r(),o[s]=setInterval(r,100)}i.preventDefault()}else if(40==s){if(!o[s]){var r=t.proxy(function(){this.doActionOnActiveLayer("moveY",[o[16]?10:1])},this);r(),o[s]=setInterval(r,100)}i.preventDefault()}else if(37==s){if(!o[s]){var r=t.proxy(function(){this.doActionOnActiveLayer("moveX",[-1*(o[16]?10:1)])},this);r(),o[s]=setInterval(r,100)}i.preventDefault()}else if(39==s){if(!o[s]){var r=t.proxy(function(){this.doActionOnActiveLayer("moveX",[o[16]?10:1])},this);r(),o[s]=setInterval(r,100)}i.preventDefault()}else if(s>=97&&105>=s){var a=d[s],l=h[s],p=!1;this.sidebar.forms.layer.align.val()==a&&this.sidebar.forms.layer.valign.val()==l&&(p=!0),this.sidebar.layerFeatures.horizontalAlign(a,p),this.sidebar.layerFeatures.verticalAlign(l,p)}else 34==s?(i.preventDefault(),this.layerList[this.activeLayerIndex].nextLayer()):33==s?(i.preventDefault(),this.layerList[this.activeLayerIndex].previousLayer()):65==s?(i.preventDefault(),this.layerList[this.activeLayerIndex].fit()):(i.ctrlKey||i.metaKey)&&(90==s?i.shiftKey?e.history.redo():e.history.undo():67==s?this.copy():86==s?this.paste(0):71==s&&(this.createGroupFromSelected(),i.preventDefault()))}},this),keyup:t.proxy(function(e){"undefined"!=typeof o[e.keyCode]&&o[e.keyCode]&&(clearInterval(o[e.keyCode]),o[e.keyCode]=0)},this)}),this.addContextMenu(),n||e.frontend.sliderElement.fileupload({url:r,pasteZone:!1,dropZone:e.frontend.sliderElement,dataType:"json",paramName:"image",add:t.proxy(function(e,t){t.formData={path:"/"+a},t.submit()},this),done:t.proxy(function(e,t){var i=t.result;if(i.data&&i.data.name){var s=this.itemEditor.createLayerItem(!1,"image");s.reRender({image:i.data.url}),s.activate(null,null,!0)}else NextendAjaxHelper.notification(i)},this),fail:t.proxy(function(e,t){NextendAjaxHelper.notification(t.jqXHR.responseJSON)},this),start:function(){NextendAjaxHelper.startLoading()},stop:function(){setTimeout(function(){NextendAjaxHelper.stopLoading()},100)}});var c=this;window.validateLayers=function(){console.group();for(var e=0;e<c.mainLayerGroup.zIndexList.length;e++)console.log(e,c.mainLayerGroup.zIndexList[e].layerRow.get(0));console.groupEnd()},this.$.on("layerCreated",t.proxy(function(){this.editorVisibilityRefresh()},this)),this.editorVisibilityRefresh(),t("body").on("mousedown",t.proxy(function(e){"main"==nextend.context.getCurrentWindow()&&nextend.context.mouseDownArea===!1&&this.panel.hide()},this))}function r(e){this.mode=c.UNDEFINED,this.forms={undefined:null},this.layerEditor=e,this.toolboxElement=t("#smartslider-slide-toolbox-layer"),this.startLayer(),this.startGroup()}function a(e){this.fields=e,this.initParentLinker(),this.initAlign(),this.initEvents()}var o={16:0,38:0,40:0,37:0,39:0},l={left:0,center:1,right:2,top:0,middle:1,bottom:2},d={97:"left",98:"center",99:"right",100:"left",101:"center",102:"right",103:"left",104:"center",105:"right"},h={97:"bottom",98:"bottom",99:"bottom",100:"middle",101:"middle",102:"middle",103:"top",104:"top",105:"top"},p={OFF:0,ON:1,GROUP:2};n.prototype.getMode=function(){return this.mode},n.prototype._getMode=function(){return this.responsive.getNormalizedModeString()},n.prototype.getResponsiveRatio=function(e){return"h"==e?this.responsive.lastRatios.slideW:"v"==e?this.responsive.lastRatios.slideH:0},n.prototype.isGroup=function(e){return e instanceof NextendSmartSliderLayerGroup},n.prototype.getActiveGroup=function(){var e=this.getSelectedLayer();return this.isGroup(e)?e:e?e.group:this.mainLayerGroup},n.prototype.createLayer=function(e,t){var i=this.sidebar.layerFeatures.layerDefault;for(var s in i)null!==i[s]&&(t[s]=i[s]);var n=new NextendSmartSliderLayer(this,e,!1,this.itemEditor,t);return e.reIndexLayers(),n},n.prototype.addLayer=function(i,s,n){var r=this._addLayer(i,s,n);return e.history.add(t.proxy(function(){return[r,"addLayer","add","delete",[i,r.getData({layersIncluded:!0,itemsIncluded:!0})]]},this)),r},n.prototype._addLayer=function(e,i,s){var n=t(i);this.layerContainerElement.append(n);var r=new NextendSmartSliderLayer(this,e,n,this.itemEditor);return e!=this.mainLayerGroup&&e.moveLayerToGroup(r,r.zIndex),s&&(this.mainLayerGroup.reIndexLayers(),this.refreshMode()),r},n.prototype.switchToLayerTab=function(){e.slide._changeView(1)},n.prototype._initDeviceModeChange=function(){var i=t("#layerresettodesktop").on("click",t.proxy(this.__onResetToDesktopClick,this));this.resetToDesktopTRElement=i.closest("tr"),this.resetToDesktopGlobalElement=t("#n2-ss-layer-reset-to-desktop").on("click",t.proxy(function(){"block"==this.resetToDesktopTRElement.css("display")&&i.trigger("click")},this));var s=t("#n2-ss-layer-show-on"),n={},r=e.frontend.responsive.parameters.deviceModes;for(var a in r)r[a]&&(n[a]=t('<div class="n2-radio-option"><i class="n2-i n2-it n2-i-'+a+'"></i></div>').on("click",t.proxy(function(e){this.sidebar.forms.layer["showField"+e.charAt(0).toUpperCase()+e.substr(1)].data("field").onoff.trigger("click")},this,a)).appendTo(s));s.children().first().addClass("n2-first"),s.children().last().addClass("n2-last"),this.globalShowOnDeviceCB=function(e){"undefined"!=typeof n[e]&&n[e].toggleClass("n2-active",1==this.sidebar.forms.layer["showField"+e.charAt(0).toUpperCase()+e.substr(1)].val())},this.sidebar.forms.layer.showFieldDesktopPortrait.on("nextendChange",t.proxy(this.globalShowOnDeviceCB,this,"desktopPortrait")),this.sidebar.forms.layer.showFieldDesktopLandscape.on("nextendChange",t.proxy(this.globalShowOnDeviceCB,this,"desktopLandscape")),this.sidebar.forms.layer.showFieldTabletPortrait.on("nextendChange",t.proxy(this.globalShowOnDeviceCB,this,"tabletPortrait")),this.sidebar.forms.layer.showFieldTabletLandscape.on("nextendChange",t.proxy(this.globalShowOnDeviceCB,this,"tabletLandscape")),this.sidebar.forms.layer.showFieldMobilePortrait.on("nextendChange",t.proxy(this.globalShowOnDeviceCB,this,"mobilePortrait")),this.sidebar.forms.layer.showFieldMobileLandscape.on("nextendChange",t.proxy(this.globalShowOnDeviceCB,this,"mobileLandscape")),t("#layershow").data("field").setAvailableDevices(r),t("#layergroup-show").data("field").setAvailableDevices(r),this.__onChangeDeviceOrientation(),e.frontend.sliderElement.on("SliderDeviceOrientation",t.proxy(this.__onChangeDeviceOrientation,this)),e.frontend.sliderElement.on("SliderResize",t.proxy(this.__onResize,this))},n.prototype.refreshMode=function(){this.__onChangeDeviceOrientation(),e.frontend.responsive.reTriggerSliderDeviceOrientation()},n.prototype.__onChangeDeviceOrientation=function(){this.mode=this._getMode(),this.globalShowOnDeviceCB(this.mode),this.resetToDesktopTRElement.css("display","desktopPortrait"==this.mode?"none":"block"),this.resetToDesktopGlobalElement.css("display","desktopPortrait"==this.mode?"none":"");for(var e=0;e<this.layerList.length;e++)this.layerList[e].changeEditorMode(this.mode)},n.prototype.__onResize=function(e,t){for(var i=this.getSortedLayers(),s=0;s<i.length;s++)i[s].doLinearResize(t)},n.prototype.__onResetToDesktopClick=function(){if(-1!=this.activeLayerIndex){var e=this.getMode();this.layerList[this.activeLayerIndex].resetMode(e,e)}},n.prototype.copyOrResetMode=function(e){var t=this.getMode();if("desktopPortrait"!=e&&e==t)for(var i=0;i<this.layerList.length;i++)this.layerList[i].resetMode(e,t);else if("desktopPortrait"!=e&&"desktopPortrait"==t)for(var i=0;i<this.layerList.length;i++)this.layerList[i].resetMode(e,t);else if(e!=t)for(var i=0;i<this.layerList.length;i++)this.layerList[i].copyMode(t,e)},n.prototype.refreshSlideSize=function(){this.slideSize.width=e.frontend.dimensions.slide.width,this.slideSize.height=e.frontend.dimensions.slide.height},n.prototype.initSettings=function(){this.settings={};var e=t("#n2-ss-slide-canvas-settings").on("mouseleave",t.proxy(function(){e.removeClass("n2-active")},this));e.find("> a").on("click",function(t){t.preventDefault(),e.toggleClass("n2-active")}),this.$settingsPanel=e.find(".n2-ss-settings-panel-inner"),this.initSnapTo(),this.initEditorTheme(),this.initRuler()},n.prototype.addSettings=function(e,i,s,n){this.settings[e]=parseInt(t.jStorage.get(e,s));var r=t('<a href="">'+i+'<span class="n2-setting-tick"><i class="n2-i n2-it n2-i-tick2"></i></span></a>').on("click",t.proxy(function(i){i.preventDefault(),this.settings[e]=1==this.settings[e]?0:1,t.jStorage.set(e,this.settings[e]),r.toggleClass("n2-setting-enabled",1==this.settings[e]),n(this.settings[e])},this)).appendTo(this.$settingsPanel);r.toggleClass("n2-setting-enabled",1==this.settings[e]),n(this.settings[e])},n.prototype.addAction=function(e,i){t('<a href="" class="n2-panel-action">'+e+"</a>").on("click",t.proxy(function(e){e.preventDefault(),i()},this)).appendTo(this.$settingsPanel)},n.prototype.initRuler=function(){var e=t("#n2-tab-smartslider-editor");this.addSettings("n2-ss-ruler-enabled","Ruler",1,t.proxy(function(t){e.toggleClass("n2-ss-has-ruler",1==t),nextend.triggerResize()},this)),this.addSettings("n2-ss-show-guides","Show Guides",1,t.proxy(function(t){nextend.ruler.showGuides=t,e.toggleClass("n2-ss-show-guides",1==t)},this)),this.addSettings("n2-ss-lock-guides","Lock Guides",0,t.proxy(function(t){e.toggleClass("n2-ss-lock-guides",1==t)},this)),this.addAction("Clear Guides",t.proxy(function(){nextend.ruler.clearGuides()},this))},n.prototype.initSnapTo=function(){this.addSettings("n2-ss-snap-to-enabled","Smart Snap",1,t.proxy(function(e){for(var t=0;t<this.layerList.length;t++)this.layerList[t].snap()},this))},n.prototype.getSnap=function(){return this.settings["n2-ss-snap-to-enabled"]?t(this.staticSlide?".n2-ss-static-slide .n2-ss-layer:not(.n2-ss-layer-locked):not(.n2-ss-layer-parent):not(.n2-ss-layer-selected):visible, .n2-ruler-guide":".n2-ss-slide.n2-ss-slide-active .n2-ss-layer:not(.n2-ss-layer-locked):not(.n2-ss-layer-parent):not(.n2-ss-layer-selected):visible, .n2-ruler-guide"):!1},n.prototype.initEditorTheme=function(){var e=t("#n2-tab-smartslider-editor");this.addSettings("n2-ss-theme-dark","Dark Mode",0,function(t){e.toggleClass("n2-ss-theme-dark",1==t)})},n.prototype.deleteLayers=function(){for(var e=this.mainLayerGroup.zIndexList.length-1;e>=0;e--)this.mainLayerGroup.zIndexList[e]["delete"]()},n.prototype.layerDeleted=function(e){var t=this.layerList[e];t.group.reIndexLayers();for(var i=this.selectedLayers.length;i--;)t==this.selectedLayers[i]&&this.selectedLayers.splice(i,1);this.layerList.splice(e,1),e===this.activeLayerIndex&&(this.activeLayerIndex=-1),this.afterLayerDeleted(e),this.editorVisibilityRefresh()},n.prototype.editorVisibilityRefresh=function(){switch(this.layerList.length>0){case!1:t("body").removeClass("n2-ss-has-layers"),nextend.triggerResize();break;default:t("body").addClass("n2-ss-has-layers"),nextend.triggerResize()}},n.prototype.afterLayerDeleted=NextendDeBounce(function(e){var t=this.getSelectedLayer();!t||t.isDeleted?this.resetActiveLayer():t&&(this.activeLayerIndex=t.getIndex())},50),n.prototype.getSortedLayers=function(){for(var e=this.mainLayerGroup.getChildLayersRecursive(!1),t={},i=e.length-1;i>=0;i--)"undefined"!=typeof e[i].property.parentid&&e[i].property.parentid&&("undefined"==typeof t[e[i].property.parentid]&&(t[e[i].property.parentid]=[]),t[e[i].property.parentid].push(e[i]),e.splice(i,1));for(var i=0;i<e.length;i++)"undefined"!=typeof e[i].property.id&&e[i].property.id&&"undefined"!=typeof t[e[i].property.id]&&(t[e[i].property.id].unshift(0),t[e[i].property.id].unshift(i+1),e.splice.apply(e,t[e[i].property.id]),delete t[e[i].property.id]);return e},n.prototype.getActiveLayerData=function(){var e=[];if("undefined"!=typeof this.layerList[this.activeLayerIndex])if(this.selectMode==p.ON)for(var t=0;t<this.selectedLayers.length;t++)this.selectedLayers[t].getDataWithChildren(e);else this.layerList[this.activeLayerIndex].getDataWithChildren(e);return e},n.prototype.getHTML=function(){for(var e=t("<div></div>"),i=this.layerList,s=0;s<i.length;s++)e.append(i[s].getHTML(!0,!0));return e.html()},n.prototype.getData=function(){for(var e=[],t=this.mainLayerGroup.zIndexList,i=0;i<t.length;i++)e.push(t[i].getData({layersIncluded:!0,itemsIncluded:!0}));return e},n.prototype.loadData=function(i,s,n){n=n||this.mainLayerGroup,e.history.add(t.proxy(function(){return[this,"fixActiveLayer","","",[]]},this));var r=t.extend(!0,[],i);s&&this.deleteLayers(),this._zIndexOffset=this.mainLayerGroup.zIndexList.length,this._idTranslation={};for(var a=0;a<r.length;a++)"group"==r[a].type?this.loadSingleGroupData(r[a]):this.loadSingleData(r[a],this.mainLayerGroup);this.mainLayerGroup.reIndexLayers(),this.refreshMode(),-1==this.activeLayerIndex&&this.layerList.length>0&&this.layerList[0].activate(),e.history.add(t.proxy(function(){return[this,"fixActiveLayer","","",[]]},this))},n.prototype.loadSingleGroupData=function(e){return new NextendSmartSliderLayerGroup(this,this.mainLayerGroup,!1,e)},n.prototype.loadSingleData=function(e,i){var s=t('<div class="n2-ss-layer"></div>').attr("style",e.style),n=s.css("zIndex");if("auto"!=n&&""!=n||(n=e.zIndex?e.zIndex:1),s.css("zIndex",n+this._zIndexOffset),e.id){var r=t.fn.uid();this._idTranslation[e.id]=r,s.attr("id",r)}e.parentid&&("undefined"!=typeof this._idTranslation[e.parentid]?e.parentid=this._idTranslation[e.parentid]:e.parentid="");for(var a=0;a<e.items.length;a++)t('<div class="n2-ss-item n2-ss-item-'+e.items[a].type+'"></div>').data("item",e.items[a].type).data("itemvalues",e.items[a].values).appendTo(s);delete e.style,delete e.items;for(var o in e)s.data(o,e[o]);return this.addLayer(i,s,!1)},n.prototype.getSelectedLayer=function(){return-1==this.activeLayerIndex?!1:this.layerList[this.activeLayerIndex];
},n.prototype.fixActiveLayer=function(){var e=this.getSelectedLayer();(0==e||e.isDeleted)&&this.resetActiveLayer()},n.prototype.resetActiveLayer=function(){this.mainLayerGroup.zIndexList.length>0?this.mainLayerGroup.zIndexList[this.mainLayerGroup.zIndexList.length-1].activate():this.changeActiveLayer(-1)},n.prototype.changeActiveLayer=function(e,i){var s=this.activeLayerIndex;if(-1!=s){var n=this.layerList[s];n&&(n.$.off("propertyChanged.layerEditor"),n.deActivate())}if(this.activeLayerIndex=e,i||this.exitSelectMode(),-1!=e){var r=this.layerList[e];r instanceof NextendSmartSliderLayerGroup?this.sidebar.changeMode("GROUP"):this.sidebar.changeMode("LAYER"),r.$.on("propertyChanged.layerEditor",t.proxy(this.sidebar.activatePropertyChanged,this.sidebar));var a=r.property;for(var o in a)this.sidebar.activatePropertyChanged({target:r},o,a[o])}this.$.trigger("activeLayerChanged")},n.prototype.eye=function(){"undefined"!=typeof this.layerList[this.activeLayerIndex]&&this.doActionOnActiveLayer("changeStatus",[3])},n.prototype.lock=function(){"undefined"!=typeof this.layerList[this.activeLayerIndex]&&this.doActionOnActiveLayer("changeStatus",[2])},n.prototype["delete"]=function(){"undefined"!=typeof this.layerList[this.activeLayerIndex]&&this.doActionOnActiveLayer("delete")},n.prototype.duplicate=function(){"undefined"!=typeof this.layerList[this.activeLayerIndex]&&this.doActionOnActiveLayer("duplicate",[this.selectMode!=p.ON,!1])},n.prototype.copy=function(e){"undefined"==typeof e&&(e=this.getCopied());var i=this.getActiveLayerData();if(i.length){for(e.unshift({name:i[0].name,layers:i});e.length>5;)e.pop();t.jStorage.set("copied",JSON.stringify(e))}},n.prototype.paste=function(e,t){"undefined"==typeof t&&(t=this.getCopied()),t.length&&"undefined"!=typeof t[e]&&nextend.smartSlider.layerManager.loadData(t[e].layers,!1)},n.prototype.getCopied=function(){var e=t.jStorage.get("copied");return null===e?[]:JSON.parse(e)},n.prototype.addContextMenu=function(){var e=this;t.contextMenu({selector:"#n2-ss-0",className:"n2",autoHide:!0,build:function(i,s){var n=null,r=t(s.target).closest(".n2-ss-layer");r.length?(n=r.data("layerObject"),n.activate(s)):n=e.layerList[e.activeLayerIndex]||!1;var a={};n&&(a["delete"]={name:"Delete layer",icon:"delete"},a.duplicate={name:"Duplicate layer",icon:"duplicate"},a.copy={name:"Copy layer",icon:"copy"});var o=e.getCopied();if(1==o.length)a.paste={name:"Paste layer",icon:"paste",callback:t.proxy(e.paste,this,0,o)};else if(o.length>1){for(var l={},d=0;d<o.length;d++)l["paste"+d]={name:o[d].name,callback:t.proxy(e.paste,this,d,o)};a.paste={name:"Paste layer",icon:"paste",items:l}}return t.isEmptyObject(a)?!1:{animation:{duration:0,show:"show",hide:"hide"},zIndex:1e6,callback:function(t,i){e[t]()},positionSubmenu:function(e){if(t.ui&&t.ui.position)e.css("display","block").position({my:"left+2 top",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var i={top:0,left:this.outerWidth()};e.css(i)}},items:a}}})},n.prototype.history=function(e,t,i){switch(e){case"fixActiveLayer":this.fixActiveLayer()}},n.prototype.initSelectMode=function(){this.selectMode=p.OFF,this.selectedLayers=[],t(".n2-ss-layer-list-top-bar .n2-button").on("mousedown",t.proxy(function(e){switch(e.preventDefault(),t(e.currentTarget).data("action")){case"delete":this["delete"]();break;case"duplicate":this.duplicate();break;case"group":this.createGroupFromSelected();break;case"cancel":this.exitSelectMode()}},this))},n.prototype.startSelection=function(e){e?(this.selectMode==p.ON&&this.exitSelectMode(),this.changeSelectMode(p.GROUP)):this.changeSelectMode(p.ON)},n.prototype.changeSelectMode=function(e){var i=this.selectMode;i!=e&&(i==p.ON?t("#n2-admin").removeClass("n2-ss-select-layer-mode-on"):i==p.GROUP&&t("#n2-admin").removeClass("n2-ss-select-layer-mode-group"),this.selectMode=e,i==p.GROUP&&e==p.ON&&this.selectedLayers[0].activate(null,null,!0),e==p.OFF?t("#n2-admin").removeClass("n2-ss-select-layer-mode"):(t("#n2-admin").addClass("n2-ss-select-layer-mode"),e==p.ON?t("#n2-admin").addClass("n2-ss-select-layer-mode-on"):e==p.GROUP&&t("#n2-admin").addClass("n2-ss-select-layer-mode-group")),this.selectMode==p.OFF?t("body").off(".n2-ss-selection"):t("body").on("mousedown.n2-ss-selection",t.proxy(function(e){"main"==nextend.context.getCurrentWindow()&&nextend.context.mouseDownArea===!1&&this.exitSelectMode()},this)))},n.prototype.endSelection=function(e){e&&this.selectMode==p.GROUP&&this.exitSelectMode()},n.prototype.selectLayer=function(e,t){this.selectMode!=p.ON&&(this.startSelection(!1),t&&this.selectedLayers.push(this.layerList[this.activeLayerIndex])),this._selectLayer(e)},n.prototype._selectLayer=function(e){var i=t.inArray(e,this.selectedLayers);if(-1!=i){if(this.selectMode==p.ON&&this.selectedLayers.length<=1)return this.exitSelectMode(),!1;var s=this.selectedLayers[i];if(this.selectedLayers.splice(i,1),e.layerRow.removeClass("n2-selected"),e.layer.removeClass("n2-ss-layer-selected"),this.selectMode==p.ON&&this.selectedLayers.length<=1)return this.selectedLayers[0].activate(),this.exitSelectMode(),!1;s===this.layerList[this.activeLayerIndex]&&this.selectedLayers[0].activate(!1,null,!0)}else{for(var n=this.selectedLayers.length,r=0;r<this.selectedLayers.length;r++)if(this.selectedLayers[r]._sortZIndex(e)){n=r;break}this.selectedLayers.splice(n,0,e)}for(var r=0;r<this.selectedLayers.length;r++)this.selectedLayers[r].layerRow.addClass("n2-selected"),this.selectedLayers[r].layer.addClass("n2-ss-layer-selected")},n.prototype.addSelection=function(e,t){t||this.changeSelectMode(p.ON);for(var i=0;i<e.length;i++)this._selectLayer(e[i],!1)},n.prototype.exitSelectMode=function(){if(this.selectMode){for(var e=0;e<this.selectedLayers.length;e++)this.selectedLayers[e]!=this.layerList[this.activeLayerIndex]&&this.selectedLayers[e].layerRow.removeClass("n2-active"),this.selectedLayers[e].layerRow.removeClass("n2-selected"),this.selectedLayers[e].layer.removeClass("n2-ss-layer-selected");t("#n2-admin").removeClass("n2-ss-select-layer-mode"),this.selectedLayers=[],this.changeSelectMode(p.OFF)}},n.prototype.doActionOnActiveLayer=function(e,i){if(this.selectMode==p.ON)for(var s=t.extend([],this.selectedLayers),n=0;n<s.length;n++)s[n][e].apply(s[n],i);else"function"==typeof this.layerList[this.activeLayerIndex][e]?this.layerList[this.activeLayerIndex][e].apply(this.layerList[this.activeLayerIndex],i):this.layerList[this.activeLayerIndex].doAction(e,i)},n.prototype.draggableStart=function(e){if(this.selectMode){for(var t=!1,i=0;i<this.selectedLayers.length;i++){var s=this.selectedLayers[i],n=s.layer;if(n[0]!=e.helper[0]){var r=n.css("display");"none"==r&&n.css("display","block"),s._originalPosition=n.position(),"none"==r&&n.css("display",r)}else t=!0}t||this.exitSelectMode()}},n.prototype.draggableDrag=function(e){if(this.selectMode)for(var t={left:e.position.left-e.originalPosition.left,top:e.position.top-e.originalPosition.top},i=0;i<this.selectedLayers.length;i++){var s=this.selectedLayers[i],n=s.layer;s instanceof NextendSmartSliderLayerGroup||n[0]!=e.helper[0]&&(n.css({left:s._originalPosition.left+t.left,top:s._originalPosition.top+t.top,bottom:"auto",right:"auto"}),s.triggerLayerResized())}},n.prototype.draggableStop=function(e){if(this.selectMode){for(var t={left:e.position.left-e.originalPosition.left,top:e.position.top-e.originalPosition.top},i=0;i<this.selectedLayers.length;i++){var s=this.selectedLayers[i],n=s.layer;if(s instanceof NextendSmartSliderLayerGroup);else if(n[0]!=e.helper[0]){var r=n.css("display");"none"==r&&n.css("display","block"),s.setPosition(s._originalPosition.left+t.left,s._originalPosition.top+t.top),s.triggerLayerResized(),"none"==r&&n.css("display",r)}}return!0}return!1},n.prototype.createGroupFromSelected=function(){var i;switch(this.selectMode){case p.ON:i=new NextendSmartSliderLayerGroup(this,this.mainLayerGroup,!1);var s=e.history.add(t.proxy(function(){return[i,"createGroup","create","delete",[]]},this));i.groupLayersStartAndLateInit(this.selectedLayers),s[4].push(i.zIndex),this.exitSelectMode(),i.activate();break;case p.OFF:var n=this.layerList[this.activeLayerIndex];if(n.group instanceof NextendSmartSliderLayerGroup)n.group.activate();else{i=new NextendSmartSliderLayerGroup(this,this.mainLayerGroup,!1);var s=e.history.add(t.proxy(function(){return[i,"createGroup","create","delete",[]]},this));i.groupLayersStartAndLateInit([n]),s[4].push(i.zIndex),i.activate()}break;case p.GROUP:}},i.NextendSmartSliderAdminSlideLayerManager=n;var c={UNDEFINED:0,LAYER:1,GROUP:2},u={0:"UNDEFINED",1:"LAYER",2:"GROUP"};r.prototype.changeMode=function(e){this.mode!=c[e]&&(t("body").removeClass("n2-ss-editor-mode-"+u[this.mode]).addClass("n2-ss-editor-mode-"+e),c[e]==c.LAYER?t("#n2-tabbed-slide-editor-settings").data("pane").showTabs(["item","style","animations","position"]):c[e]==c.GROUP&&t("#n2-tabbed-slide-editor-settings").data("pane").showTabs(["group","animations"]),this.mode=c[e])},r.prototype.activatePropertyChanged=function(e,t,i){switch(this.mode){case c.LAYER:this.activeLayerPropertyChanged(e,t,i);break;case c.GROUP:this.activeGroupPropertyChanged(e,t,i)}},r.prototype.getActiveForm=function(){switch(this.mode){case c.LAYER:return this.forms.layer;case c.GROUP:return this.forms.group}return!1},r.prototype.startLayer=function(){this.forms.layer={id:t("#layerid"),parentid:t("#layerparentid"),parentalign:t("#layerparentalign"),parentvalign:t("#layerparentvalign"),left:t("#layerleft"),top:t("#layertop"),responsiveposition:t("#layerresponsive-position"),width:t("#layerwidth"),height:t("#layerheight"),responsivesize:t("#layerresponsive-size"),"class":t("#layerclass"),generatorvisible:t("#layergenerator-visible"),showFieldDesktopPortrait:t("#layershow-desktop-portrait"),showFieldDesktopLandscape:t("#layershow-desktop-landscape"),showFieldTabletPortrait:t("#layershow-tablet-portrait"),showFieldTabletLandscape:t("#layershow-tablet-landscape"),showFieldMobilePortrait:t("#layershow-mobile-portrait"),showFieldMobileLandscape:t("#layershow-mobile-landscape"),crop:t("#layercrop"),rotation:t("#layerrotation"),inneralign:t("#layerinneralign"),parallax:t("#layerparallax"),align:t("#layeralign"),valign:t("#layervalign"),fontsize:t("#layerfont-size"),adaptivefont:t("#layeradaptive-font"),mouseenter:t("#layeronmouseenter"),click:t("#layeronclick"),mouseleave:t("#layeronmouseleave"),play:t("#layeronplay"),pause:t("#layeronpause"),stop:t("#layeronstop")};for(var e in this.forms.layer)this.forms.layer[e].on("outsideChange",t.proxy(this.activateLayerPropertyChanged,this,e));this.layerEditor.responsive.isEnabled("desktop","Landscape")||this.forms.layer.showFieldDesktopLandscape.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("tablet","Portrait")||this.forms.layer.showFieldTabletPortrait.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("tablet","Landscape")||this.forms.layer.showFieldTabletLandscape.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("mobile","Portrait")||this.forms.layer.showFieldMobilePortrait.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("mobile","Landscape")||this.forms.layer.showFieldMobileLandscape.closest(".n2-mixed-group").css("display","none")},r.prototype.activateLayerPropertyChanged=function(e,t){if(-1!=this.layerEditor.activeLayerIndex){var i=this.forms.layer[e].val();this.layerEditor.layerList[this.layerEditor.activeLayerIndex].setProperty(e,i,"manager")}else{var s=this.forms.layer[e].data("field");"undefined"!=typeof s&&null!==s&&s.insideChange("")}},r.prototype.activeLayerPropertyChanged=function(e,t,i){if("function"==typeof this["layerFormSet"+t])this["layerFormSet"+t](i,e.target);else{var s=this.forms.layer[t].data("field");"undefined"!=typeof s&&s.insideChange(i)}},r.prototype.layerFormSetname=function(e){},r.prototype.layerFormSetnameSynced=function(e){},r.prototype.layerFormSetdesktopPortrait=function(e,t){this.forms.layer.showFieldDesktopPortrait.data("field").insideChange(e)},r.prototype.layerFormSetdesktopLandscape=function(e,t){this.forms.layer.showFieldDesktopLandscape.data("field").insideChange(e)},r.prototype.layerFormSettabletPortrait=function(e,t){this.forms.layer.showFieldTabletPortrait.data("field").insideChange(e)},r.prototype.layerFormSettabletLandscape=function(e,t){this.forms.layer.showFieldTabletLandscape.data("field").insideChange(e)},r.prototype.layerFormSetmobilePortrait=function(e,t){this.forms.layer.showFieldMobilePortrait.data("field").insideChange(e)},r.prototype.layerFormSetmobileLandscape=function(e,t){this.forms.layer.showFieldMobileLandscape.data("field").insideChange(e)},r.prototype.startFeatures=function(){this.layerFeatures=new a(this.forms.layer)},r.prototype.startGroup=function(){this.forms.group={parallax:t("#layergroup-parallax"),showFieldDesktopPortrait:t("#layergroup-show-desktop-portrait"),showFieldDesktopLandscape:t("#layergroup-show-desktop-landscape"),showFieldTabletPortrait:t("#layergroup-show-tablet-portrait"),showFieldTabletLandscape:t("#layergroup-show-tablet-landscape"),showFieldMobilePortrait:t("#layergroup-show-mobile-portrait"),showFieldMobileLandscape:t("#layergroup-show-mobile-landscape"),fontsize:t("#layergroup-font-size"),adaptivefont:t("#layergroup-adaptive-font"),generatorvisible:t("#layergroup-generator-visible")};for(var e in this.forms.group)this.forms.group[e].on("outsideChange",t.proxy(this.activateGroupPropertyChanged,this,e));this.layerEditor.responsive.isEnabled("desktop","Landscape")||this.forms.group.showFieldDesktopLandscape.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("tablet","Portrait")||this.forms.group.showFieldTabletPortrait.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("tablet","Landscape")||this.forms.group.showFieldTabletLandscape.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("mobile","Portrait")||this.forms.group.showFieldMobilePortrait.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("mobile","Landscape")||this.forms.group.showFieldMobileLandscape.closest(".n2-mixed-group").css("display","none")},r.prototype.activateGroupPropertyChanged=function(e,t){if(-1!=this.layerEditor.activeLayerIndex){var i=this.forms.group[e].val();this.layerEditor.layerList[this.layerEditor.activeLayerIndex].setProperty(e,i,"manager")}else{var s=this.forms.group[e].data("field");"undefined"!=typeof s&&null!==s&&s.insideChange("")}},r.prototype.activeGroupPropertyChanged=function(e,t,i){if("function"==typeof this["groupFormSet"+t])this["groupFormSet"+t](i,e.target);else{var s=this.forms.group[t].data("field");"undefined"!=typeof s&&s.insideChange(i)}},r.prototype.groupFormSetname=function(e){},r.prototype.groupFormSetdesktopPortrait=function(e){this.forms.group.showFieldDesktopPortrait.data("field").insideChange(e)},r.prototype.groupFormSetdesktopLandscape=function(e){this.forms.group.showFieldDesktopLandscape.data("field").insideChange(e)},r.prototype.groupFormSettabletPortrait=function(e){this.forms.group.showFieldTabletPortrait.data("field").insideChange(e)},r.prototype.groupFormSettabletLandscape=function(e){this.forms.group.showFieldTabletLandscape.data("field").insideChange(e)},r.prototype.groupFormSetmobilePortrait=function(e){this.forms.group.showFieldMobilePortrait.data("field").insideChange(e)},r.prototype.groupFormSetmobileLandscape=function(e){this.forms.group.showFieldMobileLandscape.data("field").insideChange(e)},i.NextendSmartSliderAdminSlideSidebarSettings=r,a.prototype.initParentLinker=function(){var e=this.fields.parentid.data("field");t("#n2-ss-layer-parent-linker").on({click:function(t){e.click(t)}})},a.prototype.initAlign=function(){this.layerDefault={align:null,valign:null};var e=t("#n2-ss-layer-horizontal-align .n2-radio-option"),i=t("#n2-ss-layer-vertical-align .n2-radio-option");e.add(i).on("click",t.proxy(function(s){if(s.ctrlKey||s.metaKey){var n=t(s.currentTarget),r=n.hasClass("n2-sub-active"),a=n.data("align");switch(a){case"left":case"center":case"right":e.removeClass("n2-sub-active"),r?(t.jStorage.set("ss-item-horizontal-align",null),this.layerDefault.align=null):(t.jStorage.set("ss-item-horizontal-align",a),this.layerDefault.align=a,n.addClass("n2-sub-active"));break;case"top":case"middle":case"bottom":i.removeClass("n2-sub-active"),r?(t.jStorage.set("ss-item-vertical-align",null),this.layerDefault.valign=null):(t.jStorage.set("ss-item-vertical-align",a),this.layerDefault.valign=a,n.addClass("n2-sub-active"))}}else if(-1!=this.activeLayerIndex){var a=t(s.currentTarget).data("align");switch(a){case"left":case"center":case"right":this.horizontalAlign(a,!0);break;case"top":case"middle":case"bottom":this.verticalAlign(a,!0)}}},this)),this.fields.align.on("nextendChange",t.proxy(function(){switch(e.removeClass("n2-active"),this.fields.align.val()){case"left":e.eq(0).addClass("n2-active");break;case"center":e.eq(1).addClass("n2-active");break;case"right":e.eq(2).addClass("n2-active")}},this)),this.fields.valign.on("nextendChange",t.proxy(function(){switch(i.removeClass("n2-active"),this.fields.valign.val()){case"top":i.eq(0).addClass("n2-active");break;case"middle":i.eq(1).addClass("n2-active");break;case"bottom":i.eq(2).addClass("n2-active")}},this));var s=t.jStorage.get("ss-item-horizontal-align",null),n=t.jStorage.get("ss-item-vertical-align",null);null!=s&&(e.eq(l[s]).addClass("n2-sub-active"),this.layerDefault.align=s),null!=n&&(i.eq(l[n]).addClass("n2-sub-active"),this.layerDefault.valign=n)},a.prototype.horizontalAlign=function(e,t){this.fields.align.val()!=e?this.fields.align.data("field").options.eq(l[e]).trigger("click"):t&&this.fields.left.val(0).trigger("change")},a.prototype.verticalAlign=function(e,t){this.fields.valign.val()!=e?this.fields.valign.data("field").options.eq(l[e]).trigger("click"):t&&this.fields.top.val(0).trigger("change")},a.prototype.initEvents=function(){var e=t("#n2-tab-events"),i=e.find(".n2-h3"),s=i.html(),n=t('<div class="n2-editor-header n2-h2 n2-uc"><span>'+s+"</span></div>");i.replaceWith(n)}}(nextend.smartSlider,n2,window);